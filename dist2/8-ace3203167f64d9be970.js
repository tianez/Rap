(window.webpackJsonp=window.webpackJsonp||[]).push([[8,13,16],{"/Csj":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=C(n("pRfh")),r=C(n("clYf")),l=C(n("G+8T")),i=C(n("p02J")),d=C(n("cLmd")),o=C(n("dAt5")),u=C(n("Fo7F")),c=n("cDcd"),s=C(c),f=n("Lrpq"),m=C(n("7l6G")),h=C(n("gJnY")),p=C(n("APrv")),A=C(n("rPIf")),g=C(n("2l6f")),v=C(n("JKjD")),E=C(n("NbhV"));function C(e){return e&&e.__esModule?e:{default:e}}var _=f.Modal.alert,B=E.default.div.withConfig({displayName:"GroupBasicInfo__AlertView"})(["line-height:0.22rem;"]),k=function(e){function t(){var e,n,d,u,c,m,h=this;(0,i.default)(this,t);for(var p=arguments.length,A=Array(p),g=0;g<p;g++)A[g]=arguments[g];return n=d=(0,o.default)(this,(e=t.__proto__||(0,l.default)(t)).call.apply(e,[this].concat(A))),d.handleChange=function(e){d.props.onChange("attendanceName",e)},d.handleChangeDeptList=(m=(0,r.default)(a.default.mark(function e(t,n){var r,l,i,o,u,c,m,p;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.props.data,l="null",r&&(l=r.id),0!=n.filter(function(e){return-1==r.deptList.indexOf(e)}).length){e.next=6;break}return e.abrupt("return",d.props.onChange("deptList",n));case 6:return i="?attendanceGroupId="+l,n.map(function(e){i+="&deptIds="+e}),e.next=10,Request("attendanceGroup/verifyMemberDeptment"+i);case 10:(o=e.sent).success?(u=o.data.existMemberList.length)>0?(c=o.data.existMemberList.map(function(e){return e.deptId}),m=o.data.existMemberList.map(function(e){return e.deptName}).slice(0,4),p=m.join(","),p+=u>4?"等"+u+"部门存在于其他考勤组，是否将他们移动到该考勤组?":u+"部门存在于其他考勤组，是否将他们移动到该考勤组?",_(s.default.createElement(B,null,p),"",[{text:"取消",onPress:function(){var e=n.filter(function(e){return-1==c.indexOf(e)});d.props.onChange("deptList",e)},style:"default"},{text:"确定",onPress:function(){return d.props.onChange("deptList",n)}}])):d.props.onChange("deptList",n):f.Toast.info(o.message);case 12:case"end":return e.stop()}},e,h)})),function(e,t){return m.apply(this,arguments)}),d.handleChangeUserList=(c=(0,r.default)(a.default.mark(function e(t){var n,r,l,i,o,u,c,m,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.props.data,r="null",n&&(r=n.id),0!=p.filter(function(e){return-1==n.userList.indexOf(e)}).length){e.next=6;break}return e.abrupt("return",d.props.onChange("userList",p));case 6:return l="?attendanceGroupId="+r,p.map(function(e){l+="&userIds="+e}),e.next=10,Request("attendanceGroup/verifyMemberPersonal"+l);case 10:(i=e.sent).success?(o=i.data.existMemberList.length)>0?(u=i.data.existMemberList.map(function(e){return e.userId}),c=i.data.existMemberList.map(function(e){return e.userName}).slice(0,4),m=c.join(","),m+=o>4?"等"+o+"人存在于其他考勤组，是否将他们移动到该考勤组?":o+"人存在于其他考勤组，是否将他们移动到该考勤组?",_(s.default.createElement(B,null,m),"",[{text:"取消",onPress:function(){var e=p.filter(function(e){return-1==u.indexOf(e)});d.props.onChange("userList",e)},style:"default"},{text:"确定",onPress:function(){return d.props.onChange("userList",p)}}])):d.props.onChange("userList",p):f.Toast.info(i.message);case 12:case"end":return e.stop()}},e,h)})),function(e){return c.apply(this,arguments)}),u=n,(0,o.default)(d,u)}return(0,u.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.onChange,n=e.data,a=e.onSave,r=e.title,l=e.bartitle;return s.default.createElement(m.default,null,s.default.createElement(f.NavBar,{mode:"light",icon:s.default.createElement(p.default,null)},l||"新增考勤组"),s.default.createElement(h.default,null,s.default.createElement(f.WhiteSpace,null),s.default.createElement(f.InputItem,{onChange:this.handleChange,value:n.attendanceName,placeholder:"请输入考勤组名称"},"考勤组名称"),s.default.createElement(f.WhiteSpace,null),s.default.createElement(g.default,{name:"deptList",value:n.deptList,onChange:this.handleChangeDeptList,multiple:!0}),s.default.createElement(A.default,{name:"userList",value:n.userList,onChange:this.handleChangeUserList,title:"其他参与人员"}),s.default.createElement(A.default,{name:"userId",value:n.userId,onChange:t,title:"考勤组负责人",single:!0}),s.default.createElement(f.WhiteSpace,null)),s.default.createElement(v.default,{onClick:a,title:r}))}}]),t}(c.Component);t.default=k},"2l6f":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=g(n("G+8T")),l=g(n("p02J")),i=g(n("cLmd")),d=g(n("dAt5")),o=g(n("Fo7F")),u=n("cDcd"),c=g(u),s=n("8LOv"),f=n("Lrpq"),m=g(n("APrv")),h=g(n("8+W1")),p=g(n("CkzZ")),A=n("rRcN");function g(e){return e&&e.__esModule?e:{default:e}}var v=f.List.Item,E=(0,A.contextConsumers)(function(e){return{query:e.query,deptlist:e.getIn(["deptList",localStorage.organizationId])}})(a=(0,s.withRouter)(a=function(e){function t(){var e,n,a,i;(0,l.default)(this,t);for(var o=arguments.length,u=Array(o),c=0;c<o;c++)u[c]=arguments[c];return n=a=(0,d.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(u))),a.handleShowDepartment=function(){var e=a.props,t=e.match,n=e.history,r=e.name;n.push(t.url+"?"+r+"=true")},a.handleSelected=function(e){var t=a.props.name;a.props.onChange(t,e),window.history.back()},i=n,(0,d.default)(a,i)}return(0,o.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){this.props.deptlist||this.props.dispatch.callBack(p.default)}},{key:"render",value:function(){var e=this,t=this.props,n=t.deptlist,a=void 0===n?$arr:n,r=t.value,l=t.query,i=t.name,d=a.filter(function(e){return r.indexOf(e.id)});return[c.default.createElement(v,{arrow:"horizontal",extra:d.map(function(e){return c.default.createElement("span",null,e.name)}),onClick:this.handleShowDepartment},c.default.createElement("span",null,"考勤部门")),l[i]&&c.default.createElement(h.default,{multiple:!0,selectedKeys:r},function(t,n){return c.default.createElement(f.NavBar,{mode:"light",icon:c.default.createElement(m.default,null),rightContent:c.default.createElement("div",{onClick:function(){return e.handleSelected(t,n)}},"确定")},"选择考勤部门")})]}}]),t}(u.Component))||a)||a;t.default=E},"4WUu":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=c(n("cDcd")),r=n("8LOv"),l=c(n("IqAT")),i=(c(n("rhuD")),c(n("nsRB"))),d=c(n("i2Z+")),o=c(n("NFNw")),u=c(n("5jUK"));function c(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.location,n=e.match;return a.default.createElement(r.Switch,{location:t},a.default.createElement(r.Route,{path:n.url+"/setting",component:i.default}),a.default.createElement(r.Route,{path:n.url+"/addgroup",component:d.default}),a.default.createElement(r.Route,{path:n.url+"/grouprule/:id",component:u.default}),a.default.createElement(r.Route,{path:n.url+"/groupinfo/:id",component:o.default}),a.default.createElement(r.Route,{path:n.url,exact:!0,component:l.default}))}},"5jUK":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,l,i=_(n("pRfh")),d=_(n("clYf")),o=_(n("KN1l")),u=_(n("G+8T")),c=_(n("p02J")),s=_(n("cLmd")),f=_(n("dAt5")),m=_(n("Fo7F")),h=n("cDcd"),p=_(h),A=_(n("b03M")),g=_(n("PfKs")),v=_(n("KB7+")),E=n("Lrpq"),C=_(n("RfQ1"));function _(e){return e&&e.__esModule?e:{default:e}}var B=(0,n("rRcN").contextConsumers)(function(e){return{query:e.query,schedules:e.getIn(["schedules",localStorage.organizationId])}})((r=function(e){function t(e){(0,c.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));l.call(n);var a=(0,g.default)(e.history.location.state);return n.state=a,n}return(0,m.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.props.dispatch.callBack(C.default)}},{key:"render",value:function(){var e={data:this.state,onChange:this.handleChange,onChangeDate:this.handleChangeDate,history:this.props.history};return p.default.createElement(A.default,(0,o.default)({},e,{onSave:this.handleSave}))}}]),t}(h.Component),l=function(){var e=this;this.handleChange=function(t,n){var a=e.state;a[t]=n,e.setState(a)},this.handleChangeDate=function(t){var n=e.state;e.setState((0,o.default)({},n,t)),window.history.back()},this.handleSave=(0,d.default)(i.default.mark(function t(){var n,a;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,v.default)(e.state),t.next=3,Request("attendanceGroup/updateRule",{method:"post",data:n});case 3:(a=t.sent).success?(E.Toast.info("保存成功"),window.history.back()):E.Toast.info(a.message);case 5:case"end":return t.stop()}},t,e)}))},a=r))||a;t.default=B},"6A+B":function(e,t,n){(t=e.exports=n("3G5m")(!0)).push([e.i,".AttendanceSetting_attendance_3655B {\n  background: #fff;\n  margin: 0.1rem 0; }\n\n.AttendanceSetting_detail_3ErKl {\n  padding: 0.1rem 0.15rem; }\n\n.AttendanceSetting_attendanceName_2d6GC {\n  font-size: 0.18rem;\n  line-height: 0.24rem;\n  padding: 0 0 0.08rem; }\n\n.AttendanceSetting_shiftList_16kq2 {\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  line-height: 0.22rem;\n  color: #666; }\n\n.AttendanceSetting_attendanceAdd_wpT9E {\n  line-height: 0.22rem;\n  color: #666; }\n  .AttendanceSetting_attendanceAdd_wpT9E .iconfont {\n    font-size: 0.12rem;\n    color: #666;\n    margin-right: 0.04rem; }\n\n.AttendanceSetting_act_1lhh3 {\n  font-size: 0.13rem;\n  border-top: 1px solid #eee;\n  padding: 0.1rem 0.15rem;\n  text-align: right; }\n\n.AttendanceSetting_a_3rWmw {\n  color: #108ee9;\n  display: inline-block;\n  line-height: 0.28rem;\n  margin: 0 0 0 0.08rem;\n  padding: 0 0.08rem;\n  border: 1px solid #108ee9;\n  border-radius: 0.04rem; }\n","",{version:3,sources:["E:/www/webpack4/src/pages/Attendance/AttendanceSetting.scss"],names:[],mappings:"AAAA;EACE,iBAAiB;EACjB,iBAAiB,EAAE;;AAErB;EACE,wBAAwB,EAAE;;AAE5B;EACE,mBAAmB;EACnB,qBAAqB;EACrB,qBAAqB,EAAE;;AAEzB;EACE,wBAAwB;EACxB,iBAAiB;EACjB,oBAAoB;EACpB,qBAAqB;EACrB,YAAY,EAAE;;AAEhB;EACE,qBAAqB;EACrB,YAAY,EAAE;EACd;IACE,mBAAmB;IACnB,YAAY;IACZ,sBAAsB,EAAE;;AAE5B;EACE,mBAAmB;EACnB,2BAA2B;EAC3B,wBAAwB;EACxB,kBAAkB,EAAE;;AAEtB;EACE,eAAe;EACf,sBAAsB;EACtB,qBAAqB;EACrB,sBAAsB;EACtB,mBAAmB;EACnB,0BAA0B;EAC1B,uBAAuB,EAAE",file:"AttendanceSetting.scss",sourcesContent:[".attendance {\n  background: #fff;\n  margin: 0.1rem 0; }\n\n.detail {\n  padding: 0.1rem 0.15rem; }\n\n.attendanceName {\n  font-size: 0.18rem;\n  line-height: 0.24rem;\n  padding: 0 0 0.08rem; }\n\n.shiftList {\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  line-height: 0.22rem;\n  color: #666; }\n\n.attendanceAdd {\n  line-height: 0.22rem;\n  color: #666; }\n  .attendanceAdd :global(.iconfont) {\n    font-size: 0.12rem;\n    color: #666;\n    margin-right: 0.04rem; }\n\n.act {\n  font-size: 0.13rem;\n  border-top: 1px solid #eee;\n  padding: 0.1rem 0.15rem;\n  text-align: right; }\n\n.a {\n  color: #108ee9;\n  display: inline-block;\n  line-height: 0.28rem;\n  margin: 0 0 0 0.08rem;\n  padding: 0 0.08rem;\n  border: 1px solid #108ee9;\n  border-radius: 0.04rem; }\n"],sourceRoot:""}]),t.locals={attendance:"AttendanceSetting_attendance_3655B",detail:"AttendanceSetting_detail_3ErKl",attendanceName:"AttendanceSetting_attendanceName_2d6GC",shiftList:"AttendanceSetting_shiftList_16kq2",attendanceAdd:"AttendanceSetting_attendanceAdd_wpT9E",act:"AttendanceSetting_act_1lhh3",a:"AttendanceSetting_a_3rWmw"}},"8+W1":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r,l,i=y(n("pRfh")),d=y(n("clYf")),o=y(n("G+8T")),u=y(n("p02J")),c=y(n("cLmd")),s=y(n("dAt5")),f=y(n("Fo7F")),m=n("cDcd"),h=y(m),p=y(n("faye")),A=n("Lrpq"),g=y(n("7l6G")),v=y(n("gJnY")),E=y(n("Mn//")),C=(y(n("8aFf")),y(n("RG7W"))),_=y(n("utdY")),B=y(n("CkzZ")),k=n("rRcN");function y(e){return e&&e.__esModule?e:{default:e}}var b=A.List.Item,x=A.Modal.prompt,w=(0,k.contextConsumers)(function(e){return{deptlist:e.getIn(["deptList",localStorage.organizationId]),orgInfo:e.orgInfo}})((l=r=function(e){function t(e){var n=this;(0,u.default)(this,t);var a,r=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return r.handleLeftClick=function(e){e.stopPropagation(),r.props.onLeftClick()},r.handleShowModal=function(){x("","请输入部门名称",[{text:"取消"},{text:"确定",onPress:r.handleSubmit}],"default",null,["部门名称"])},r.handleSubmit=(a=(0,d.default)(i.default.mark(function e(t){var a,l,d,o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.state.breadcrumbs,l=a.length,d=0==l?0:a.getIn([l-1,"id"]),e.next=5,Request("deptment/insertDeptment",{method:"post",data:{orginfoId:localStorage.organizationId,name:t,parent:d}});case 5:o=e.sent,console.log(o),o.success?(r.props.dispatch.callBack(B.default),A.Toast.info("新增成功")):A.Toast.info(o.message);case 8:case"end":return e.stop()}},e,n)})),function(e){return a.apply(this,arguments)}),r.handleChangeLists=function(e){var t=r.state.breadcrumbs;t=t.concat([e]),r.setState({breadcrumbs:t})},r.handleChangeBreadcrumbs=function(e){var t=r.state.breadcrumbs;t=t.slice(0,e),r.setState({breadcrumbs:t})},r.handleChecked=function(e){r.props.multiple?r.handleMultiplechecked(e):r.handleSingleCompleted(e)},r.handleMultiplechecked=function(e){var t=r.state.selectedKeys;t=-1==t.indexOf(e.id)?t.concat([e.id]):t.filter(function(t){return t!=e.id}),r.setState({selectedKeys:t})},r.handleSingleCompleted=function(e){var t=r.props.onSelected;t&&t(e)},r.handleFilter=function(e,t){var n=t.length,a=0==n?0:t.getIn([n-1,"id"]);return e.filter(function(e){return e.parent==a})},r.state={selectedKeys:$arr.concat(e.selectedKeys),breadcrumbs:$arr},r}return(0,f.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.props.dispatch.callBack(B.default)}},{key:"render",value:function(){var e=this.props,t=e.deptlist,n=void 0===t?$arr:t,a=e.multiple,r=e.children,l=this.state,i=l.selectedKeys,d=l.breadcrumbs,o=n.filter(function(e){return i.indexOf(e.id)>-1});return n=this.handleFilter(n,d),p.default.createPortal(h.default.createElement(g.default,null,r&&r(i,o),h.default.createElement(E.default,{onChangeBreadcrumbs:this.handleChangeBreadcrumbs,breadcrumbs:d}),h.default.createElement(v.default,null,h.default.createElement(A.List,{style:{marginTop:"6px"}},h.default.createElement(b,{onClick:this.handleShowModal},h.default.createElement("span",{className:_.default.add},"+"),"新建部门")),h.default.createElement(C.default,{multiple:a,deptlist:n,selectedKeys:i,onClick:this.handleChecked,onChangeLists:this.handleChangeLists}))),document.getElementById("app"))}}]),t}(m.Component),r.defaultProps={multiple:!1,selectedKeys:$arr},a=l))||a;t.default=w},"8aFf":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(n("cDcd")),r=n("Lrpq"),l=i(n("V3YV"));function i(e){return e&&e.__esModule?e:{default:e}}var d=r.List.Item;t.default=function(e){var t=e.selecteditems,n=e.multiple,i=e.onClick;return n?[a.default.createElement(r.List,{key:"list"},a.default.createElement(d,null,t.map(function(e){return a.default.createElement("span",{key:e.get("id"),className:l.default.checkedmenu,onClick:i.bind(null,e)},e.get("name"))}))),a.default.createElement(r.WhiteSpace,{key:"whitespace"})]:null}},AEAa:function(e,t,n){var a=n("ZV+L"),r=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},DWxq:function(e,t,n){(t=e.exports=n("3G5m")(!0)).push([e.i,'.AttendanceIndex_userinfo_1lJaa {\n  display: flex;\n  line-height: 0.46rem;\n  height: 0.46rem;\n  border-top: 1px solid #ccc;\n  background: #fff;\n  padding: 0 0.15rem; }\n\n.AttendanceIndex_username_FZSV_ {\n  flex: 1;\n  color: #108ee9;\n  font-size: 0.18rem; }\n\n.AttendanceIndex_lists__4HXm {\n  font-size: 0.13rem;\n  color: #666;\n  padding: 0 0.15rem; }\n\n.AttendanceIndex_tp_zSfVK {\n  line-height: 0.44rem; }\n\n.AttendanceIndex_daka_12kSa {\n  position: relative;\n  padding: 0 0.15rem 0.2rem; }\n  .AttendanceIndex_daka_12kSa:before, .AttendanceIndex_daka_12kSa:after {\n    content: "";\n    position: absolute;\n    top: 0.05rem;\n    z-index: 9;\n    background: #ccc; }\n  .AttendanceIndex_daka_12kSa:before {\n    width: 0.1rem;\n    height: 0.1rem;\n    left: 0;\n    border-radius: 0.1rem; }\n  .AttendanceIndex_daka_12kSa:after {\n    left: 0.04rem;\n    width: 0.01rem;\n    height: 100%; }\n  .AttendanceIndex_daka_12kSa .AttendanceIndex_t1_vzx-p {\n    color: #000;\n    margin: 0 0 0.1rem; }\n  .AttendanceIndex_daka_12kSa .AttendanceIndex_t2_2O9Lc {\n    font-size: 0.18rem;\n    color: #000;\n    font-weight: bold; }\n    .AttendanceIndex_daka_12kSa .AttendanceIndex_t2_2O9Lc .AttendanceIndex_t20_3U3oW {\n      line-height: 0.24rem;\n      padding-bottom: 0.05rem; }\n    .AttendanceIndex_daka_12kSa .AttendanceIndex_t2_2O9Lc .AttendanceIndex_t4_2arD_ {\n      color: #f00;\n      font-size: 0.12rem;\n      display: inline-block;\n      padding: 0.03rem;\n      border: 1px solid #f00;\n      border-radius: 0.03rem; }\n  .AttendanceIndex_daka_12kSa .AttendanceIndex_t3_UWmhp {\n    color: #999;\n    margin: 0.1rem 0;\n    line-height: 0.22rem; }\n  .AttendanceIndex_daka_12kSa .AttendanceIndex_dakaup_1RrmJ {\n    color: #108ee9; }\n\n.AttendanceIndex_lastdaka_1716_ {\n  position: relative;\n  padding: 0 0.15rem 0.2rem; }\n  .AttendanceIndex_lastdaka_1716_:before {\n    content: "";\n    position: absolute;\n    top: 0.05rem;\n    z-index: 9;\n    background: #ccc;\n    width: 0.1rem;\n    height: 0.1rem;\n    left: 0;\n    border-radius: 0.1rem; }\n',"",{version:3,sources:["E:/www/webpack4/src/pages/Attendance/AttendanceIndex.scss"],names:[],mappings:"AAAA;EACE,cAAc;EACd,qBAAqB;EACrB,gBAAgB;EAChB,2BAA2B;EAC3B,iBAAiB;EACjB,mBAAmB,EAAE;;AAEvB;EACE,QAAQ;EACR,eAAe;EACf,mBAAmB,EAAE;;AAEvB;EACE,mBAAmB;EACnB,YAAY;EACZ,mBAAmB,EAAE;;AAEvB;EACE,qBAAqB,EAAE;;AAEzB;EACE,mBAAmB;EACnB,0BAA0B,EAAE;EAC5B;IACE,YAAY;IACZ,mBAAmB;IACnB,aAAa;IACb,WAAW;IACX,iBAAiB,EAAE;EACrB;IACE,cAAc;IACd,eAAe;IACf,QAAQ;IACR,sBAAsB,EAAE;EAC1B;IACE,cAAc;IACd,eAAe;IACf,aAAa,EAAE;EACjB;IACE,YAAY;IACZ,mBAAmB,EAAE;EACvB;IACE,mBAAmB;IACnB,YAAY;IACZ,kBAAkB,EAAE;IACpB;MACE,qBAAqB;MACrB,wBAAwB,EAAE;IAC5B;MACE,YAAY;MACZ,mBAAmB;MACnB,sBAAsB;MACtB,iBAAiB;MACjB,uBAAuB;MACvB,uBAAuB,EAAE;EAC7B;IACE,YAAY;IACZ,iBAAiB;IACjB,qBAAqB,EAAE;EACzB;IACE,eAAe,EAAE;;AAErB;EACE,mBAAmB;EACnB,0BAA0B,EAAE;EAC5B;IACE,YAAY;IACZ,mBAAmB;IACnB,aAAa;IACb,WAAW;IACX,iBAAiB;IACjB,cAAc;IACd,eAAe;IACf,QAAQ;IACR,sBAAsB,EAAE",file:"AttendanceIndex.scss",sourcesContent:['.userinfo {\n  display: flex;\n  line-height: 0.46rem;\n  height: 0.46rem;\n  border-top: 1px solid #ccc;\n  background: #fff;\n  padding: 0 0.15rem; }\n\n.username {\n  flex: 1;\n  color: #108ee9;\n  font-size: 0.18rem; }\n\n.lists {\n  font-size: 0.13rem;\n  color: #666;\n  padding: 0 0.15rem; }\n\n.tp {\n  line-height: 0.44rem; }\n\n.daka {\n  position: relative;\n  padding: 0 0.15rem 0.2rem; }\n  .daka:before, .daka:after {\n    content: "";\n    position: absolute;\n    top: 0.05rem;\n    z-index: 9;\n    background: #ccc; }\n  .daka:before {\n    width: 0.1rem;\n    height: 0.1rem;\n    left: 0;\n    border-radius: 0.1rem; }\n  .daka:after {\n    left: 0.04rem;\n    width: 0.01rem;\n    height: 100%; }\n  .daka .t1 {\n    color: #000;\n    margin: 0 0 0.1rem; }\n  .daka .t2 {\n    font-size: 0.18rem;\n    color: #000;\n    font-weight: bold; }\n    .daka .t2 .t20 {\n      line-height: 0.24rem;\n      padding-bottom: 0.05rem; }\n    .daka .t2 .t4 {\n      color: #f00;\n      font-size: 0.12rem;\n      display: inline-block;\n      padding: 0.03rem;\n      border: 1px solid #f00;\n      border-radius: 0.03rem; }\n  .daka .t3 {\n    color: #999;\n    margin: 0.1rem 0;\n    line-height: 0.22rem; }\n  .daka .dakaup {\n    color: #108ee9; }\n\n.lastdaka {\n  position: relative;\n  padding: 0 0.15rem 0.2rem; }\n  .lastdaka:before {\n    content: "";\n    position: absolute;\n    top: 0.05rem;\n    z-index: 9;\n    background: #ccc;\n    width: 0.1rem;\n    height: 0.1rem;\n    left: 0;\n    border-radius: 0.1rem; }\n'],sourceRoot:""}]),t.locals={userinfo:"AttendanceIndex_userinfo_1lJaa",username:"AttendanceIndex_username_FZSV_",lists:"AttendanceIndex_lists__4HXm",tp:"AttendanceIndex_tp_zSfVK",daka:"AttendanceIndex_daka_12kSa",t1:"AttendanceIndex_t1_vzx-p",t2:"AttendanceIndex_t2_2O9Lc",t20:"AttendanceIndex_t20_3U3oW",t4:"AttendanceIndex_t4_2arD_",t3:"AttendanceIndex_t3_UWmhp",dakaup:"AttendanceIndex_dakaup_1RrmJ",lastdaka:"AttendanceIndex_lastdaka_1716_"}},DwGg:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=m(n("G+8T")),l=m(n("p02J")),i=m(n("cLmd")),d=m(n("dAt5")),o=m(n("Fo7F")),u=n("cDcd"),c=m(u),s=m(n("QCQQ")),f=m(n("a36i"));function m(e){return e&&e.__esModule?e:{default:e}}var h=(0,n("rRcN").contextConsumers)(function(e){return{query:e.query}})(a=(0,f.default)(a=function(e){function t(){return(0,l.default)(this,t),(0,d.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){return c.default.createElement(s.default,this.props)}}]),t}(u.Component))||a)||a;t.default=h},Dx7U:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=v(n("pRfh")),r=v(n("clYf")),l=v(n("G+8T")),i=v(n("p02J")),d=v(n("cLmd")),o=v(n("dAt5")),u=v(n("Fo7F")),c=n("cDcd"),s=v(c),f=v(n("faye")),m=n("Lrpq"),h=(v(n("NbhV")),v(n("7l6G"))),p=v(n("gJnY")),A=v(n("JKjD")),g=v(n("jeeJ"));function v(e){return e&&e.__esModule?e:{default:e}}m.List.Item,m.Radio.RadioItem;var E=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],C=[].concat(E,["24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"]),_=E.map(function(e){return{label:e,value:e}}),B=C.map(function(e){return{label:e,value:e}}),k=[[{shiftOrder:1,onDutyTime:"09:30:00",onDutyClockStart:30,offDutyTime:"18:00:00",offDutyClockEnd:30}],[{shiftOrder:1,onDutyTime:"08:30:00",onDutyClockStart:30,offDutyTime:"12:00:00",offDutyClockEnd:30},{shiftOrder:2,onDutyTime:"14:30:00",onDutyClockStart:30,offDutyTime:"17:30:00",offDutyClockEnd:30}],[{shiftOrder:1,onDutyTime:"08:30:00",onDutyClockStart:30,offDutyTime:"12:00:00",offDutyClockEnd:30},{shiftOrder:2,onDutyTime:"14:00:00",onDutyClockStart:30,offDutyTime:"17:00:00",offDutyClockEnd:30},{shiftOrder:3,onDutyTime:"19:00:00",onDutyClockStart:30,offDutyTime:"21:00:00",offDutyClockEnd:30}]],y=function(e){function t(){var e,n,d,u,c,s=this;(0,i.default)(this,t);for(var f=arguments.length,h=Array(f),p=0;p<f;p++)h[p]=arguments[p];return n=d=(0,o.default)(this,(e=t.__proto__||(0,l.default)(t)).call.apply(e,[this].concat(h))),d.state={orgId:localStorage.organizationId,shiftDetalsBeanList:[],onOffNum:1,isCheckTime:0,isUncheckOff:0,admitLateTimes:30,seriousLateTimes:60,neglectLateTimes:180,lateLateFlag:0,shiftLateRuleBeanList:[{ruleName:"222",leaveHours:1.5,comeHours:2.5}]},d.reqBcData=(c=(0,r.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Request("shift/getOneShift",{params:{shiftId:t}});case 2:(n=e.sent).success&&d.setState(n.data[0]);case 4:case"end":return e.stop()}},e,s)})),function(e){return c.apply(this,arguments)}),d.handleChangeTitle=function(e){d.setState({shiftName:e})},d.handleChangeBcNum=function(e){var t=k[1*e-1]||[];d.setState({shiftDetalsBeanList:t,onOffNum:e})},d.handleChangeBctime=function(e,t,n){var a=d.state.shiftDetalsBeanList;n=n.join(":")+":00",a[e][t]=n,d.setState({shiftDetalsBeanList:a})},d.handleSave=function(){d.props.shiftId?d.handleUpdateData():d.handleAddData()},d.handleAddData=(0,r.default)(a.default.mark(function e(){var t,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.Toast.info("数据提交中",0),t=d.state,e.next=4,Request("shift/addShift",{method:"post",data:t});case 4:(n=e.sent).success?(m.Toast.info("新增班次成功"),d.handleGetNewData()):m.Toast.info(n.message);case 6:case"end":return e.stop()}},e,s)})),d.handleUpdateData=(0,r.default)(a.default.mark(function e(){var t,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.Toast.info("数据保存中",0),t=d.state,e.next=4,Request("shift/updateShift",{method:"post",data:t});case 4:(n=e.sent).success?(m.Toast.info("班次保存成功"),store.dispatch("Attendance/updateIn",[[localStorage.organizationId],function(e){return e.map(function(e){return e.get("id")!=t.id?e:fromJS(t)})}]),window.history.back()):m.Toast.info(n.message);case 6:case"end":return e.stop()}},e,s)})),d.handleDeleteTime=function(){var e=d.props.onDelete,t=d.state;e&&e(t)},d.handleGetNewData=(0,r.default)(a.default.mark(function e(){var t,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.organizationId,e.next=3,Request("shift/getShiftList",{params:{orgId:t}});case 3:(n=e.sent).success&&store.dispatch("Attendance/setIn",[[t],n.data.list]),window.history.back();case 6:case"end":return e.stop()}},e,s)})),u=n,(0,o.default)(d,u)}return(0,u.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.setState({shiftDetalsBeanList:k[0]});var e=this.props.shiftId;e&&this.reqBcData(e)}},{key:"render",value:function(){var e=this,t=this.props.shiftId,n=this.state,a=n.shiftDetalsBeanList,r=n.onOffNum,l=n.shiftName;return f.default.createPortal(s.default.createElement(h.default,null,s.default.createElement(m.NavBar,{mode:"light",icon:s.default.createElement(m.Icon,{type:"left",size:"lg"}),onLeftClick:function(){return window.history.back()}},t?"编辑班次":"新增班次"),s.default.createElement(p.default,null,s.default.createElement(m.WhiteSpace,null),s.default.createElement(m.InputItem,{placeholder:"班次名称",value:l,onChange:this.handleChangeTitle},"班次名称"),s.default.createElement(g.default,{onChange:this.handleChangeBcNum,bcnum:r}),a.map(function(t,n){var r="00:00:00",l="24:59:00";return 0!=n&&(r=a[n-1].offDutyTime),n!=a.length-1&&(l=a[n+1].onDutyTime),s.default.createElement(m.List,{key:n,renderHeader:function(){return"第"+(n+1)+"次上下班时间"}},s.default.createElement(b,{title:"上班",value:t.onDutyTime,prev:r,next:t.offDutyTime,onChange:e.handleChangeBctime.bind(null,n,"onDutyTime")}),s.default.createElement(b,{title:"下班",value:t.offDutyTime,prev:t.onDutyTime,next:l,onChange:e.handleChangeBctime.bind(null,n,"offDutyTime")}))}),s.default.createElement(m.WhiteSpace,null)),s.default.createElement(A.default,{onClick:this.handleSave})),document.getElementById("app"))}}]),t}(c.Component);t.default=y;var b=function(e){var t=e.title,n=e.onChange,a=e.value,r=e.prev,l=e.next;a=a.split(":",2),r=r.split(":",2),l=l.split(":",2);var i=[_.slice(1*r[0]+1,1*l[0]),B];return s.default.createElement(m.Picker,{data:i,title:"选择时间",cascade:!1,extra:"请选择(可选)",value:a,format:function(e){return e.join(":")},onChange:function(e){return n(e)}},s.default.createElement(m.List.Item,{arrow:"horizontal"},t))}},E7Wo:function(e,t,n){(t=e.exports=n("3G5m")(!0)).push([e.i,".Department_add_3CMvH {\n  background: #1BCC14;\n  width: 0.2rem;\n  height: 0.2rem;\n  line-height: 0.18rem;\n  border-radius: 0.2rem;\n  font-size: 0.18rem;\n  text-align: center;\n  color: #fff;\n  display: inline-block;\n  margin-right: 0.05rem; }\n","",{version:3,sources:["E:/www/webpack4/src/Libs/Components/Department/Department.scss"],names:[],mappings:"AAAA;EACE,oBAAoB;EACpB,cAAc;EACd,eAAe;EACf,qBAAqB;EACrB,sBAAsB;EACtB,mBAAmB;EACnB,mBAAmB;EACnB,YAAY;EACZ,sBAAsB;EACtB,sBAAsB,EAAE",file:"Department.scss",sourcesContent:[".add {\n  background: #1BCC14;\n  width: 0.2rem;\n  height: 0.2rem;\n  line-height: 0.18rem;\n  border-radius: 0.2rem;\n  font-size: 0.18rem;\n  text-align: center;\n  color: #fff;\n  display: inline-block;\n  margin-right: 0.05rem; }\n"],sourceRoot:""}]),t.locals={add:"Department_add_3CMvH"}},EUn7:function(e,t,n){var a=n("6A+B");"string"==typeof a&&(a=[[e.i,a,""]]);n("DkTI")(a,{hmr:!0,transform:void 0,insertInto:void 0}),a.locals&&(e.exports=a.locals)},F2Ox:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=(a=n("cDcd"))&&a.__esModule?a:{default:a};t.default=function(e){var t=e.onClick,n=e.checked,a=e.value,l=void 0===a?0:a,i=e.children,d=n?"am-checkbox am-checkbox-checked":"am-checkbox";return r.default.createElement("div",{className:"am-list-item am-checkbox-item am-list-item-middle",onClick:function(){return t(l)}},r.default.createElement("div",{className:"am-list-thumb"},r.default.createElement("label",{className:"am-checkbox-wrapper"},r.default.createElement("span",{className:d},r.default.createElement("span",{className:"am-checkbox-inner"})))),r.default.createElement("div",{className:"am-list-line"},r.default.createElement("div",{className:"am-list-content"},i)))}},FwLA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=f(n("G+8T")),r=f(n("p02J")),l=f(n("cLmd")),i=f(n("dAt5")),d=f(n("Fo7F")),o=n("cDcd"),u=f(o),c=n("8LOv"),s=f(n("uiDc"));function f(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(){return(0,r.default)(this,t),(0,i.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,d.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props.curlink;return u.default.createElement("div",{className:s.default.footer},"attendance"==e?u.default.createElement("div",{className:s.default.action},"打卡"):u.default.createElement(c.Link,{className:s.default.action,replace:!0,style:{color:"#666"},to:"/attendance"},"打卡"),"setting"==e?u.default.createElement("div",{className:s.default.action},"设置"):u.default.createElement(c.Link,{className:s.default.action,replace:!0,style:{color:"#666"},to:"/attendance/setting"},"设置"))}}]),t}(o.Component);t.default=m},"HuV/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,l=E(n("pRfh")),i=E(n("clYf")),d=E(n("uB8n")),o=E(n("G+8T")),u=E(n("p02J")),c=E(n("cLmd")),s=E(n("dAt5")),f=E(n("Fo7F")),m=n("cDcd"),h=E(m),p=E(n("faye")),A=E(n("NbhV")),g=n("Lrpq"),v=E(n("7l6G"));function E(e){return e&&e.__esModule?e:{default:e}}var C=g.Radio.RadioItem,_=A.default.div.withConfig({displayName:"Amap__ContainerView"})(["width:100%;height:100%;overflow-x:hidden;overflow-y:auto;display:flex;flex-direction:column;flex:1;"]),B=A.default.div.withConfig({displayName:"Amap__AmapView"})(["width:100%;height:200px;min-height:200px;"]),k=A.default.div.withConfig({displayName:"Amap__ListView"})(["width:100%;flex:1;overflow-y:auto;"]),y=(r=a=function(e){function t(){var e=this;(0,u.default)(this,t);var n,a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this));return a.global_InitAmap=function(e){a.handleReqLocData(e.longitude+","+e.latitude),a.map=new AMap.Map("amap",{resizeEnable:!0,zoom:16,center:[e.longitude,e.latitude]}),a.marker1=new AMap.Marker({map:a.map,offset:new AMap.Pixel(-3,-3),content:"<div style='background:#f00;width:6px;height:6px;border-radius:6px;z-index:300;'></div>"}),a.marker2=new AMap.Marker({map:a.map}),a.map.on("moveend",a.handleMoveEnd),a.map.plugin("AMap.Geolocation",function(){var e=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0,buttonPosition:"RB"});a.map.addControl(e)})},a.handleMoveEnd=function(e){var t=a.map.getCenter();a.marker2.moveTo(t,2500)},a.handleComplete=function(e){console.log("data",e),alert((0,d.default)(e.position))},a.handleError=function(e){console.log(e),alert((0,d.default)(e))},a.handleReqLocData=(n=(0,i.default)(l.default.mark(function t(n){var r,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios("http://restapi.amap.com/v3/geocode/regeo",{params:{key:"db710fd09062025649756820d9e1769e",location:n,extensions:"all",radius:200}});case 2:200==(r=e.sent).status&&1e4==r.data.infocode&&(i=a.state.addressList,a.setState({addressList:i||r.data.regeocode.aois[0]||{},pois:r.data.regeocode.pois}));case 4:case"end":return e.stop()}},t,e)})),function(e){return n.apply(this,arguments)}),a.handleChange=function(e){var t=e.location.split(","),n=new AMap.LngLat(t[0],t[1]);a.map.setCenter(n),a.marker2.moveTo(n,2500),a.setState({addressList:e}),a.handleReqLocData(e.location)},a.handleRightClick=function(){var e=a.state.addressList,t=a.props.onRightClick;t&&t(e)},a.state={data:{}},window.global_InitAmap=a.global_InitAmap,a}return(0,f.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){YSSJ.getMapNew({callback:"global_InitAmap"})}},{key:"render",value:function(){var e=this,t=this.state,n=t.pois,a=t.addressList,r=a?a.id:"";return p.default.createPortal(h.default.createElement(v.default,null,h.default.createElement(g.NavBar,{mode:"light",icon:h.default.createElement(g.Icon,{type:"left",size:"lg"}),onLeftClick:function(){return window.history.back()},rightContent:h.default.createElement("div",{onClick:this.handleRightClick},"完成")},"选择地点"),h.default.createElement(_,null,h.default.createElement(B,{style:this.props.amapstyle,id:"amap"}),n&&h.default.createElement(k,null,h.default.createElement(g.List,{renderHeader:function(){return"位置"}},n.map(function(t,n){return h.default.createElement(C,{key:n,checked:r==t.id,onClick:function(){return e.handleChange(t)}},t.name)}))))),document.getElementById("app"))}}]),t}(m.Component),a.defaultProps={center:[109.485746,30.269809]},r);t.default=y},IqAT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=_(n("pRfh")),r=_(n("clYf")),l=_(n("G+8T")),i=_(n("p02J")),d=_(n("cLmd")),o=_(n("dAt5")),u=_(n("Fo7F")),c=n("cDcd"),s=_(c),f=n("Lrpq"),m=_(n("7l6G")),h=_(n("gJnY")),p=_(n("APrv")),A=_(n("FwLA")),g=_(n("misx")),v=_(n("M5yo")),E=_(n("VaTa")),C=(n("ZmKr"),_(n("r7n4")));function _(e){return e&&e.__esModule?e:{default:e}}var B=function(e){function t(e){var n=this;(0,i.default)(this,t);var d,u=(0,o.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return u.handleUpdateTime=function(){var e=(0,E.default)();u.setState({dates:e})},u.handleGetData=(0,r.default)(a.default.mark(function e(){var t,r,l;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,E.default)(),e.next=3,Request("attendanceGroup/clockin/list",{params:{uid:localStorage.userId,clockinginDate:t.ymd}});case 3:if(!(r=e.sent).success){e.next=11;break}if(l=r.data.clockinRecord){e.next=8;break}return e.abrupt("return");case 8:u.setState({data:l.clockinRecordList,addressList:l.addressList,radius:l.radius}),e.next=12;break;case 11:f.Toast.info(r.message);case 12:case"end":return e.stop()}},e,n)})),u.handleUpdateData=function(e){if(u.state.dates.timestamp-Date.parse(e.prevClockTime)<0)return f.Toast.info("最早打卡时间为"+e.prevClockTime);u.setState({curitem:e}),f.Toast.info("定位中...",0),YSSJ.getMapNew({callback:"global_handleUpdateData"})},u.global_handleUpdateData=(d=(0,r.default)(a.default.mark(function e(t){var r,l,i,d,o,c,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===t.errorCode){e.next=2;break}return e.abrupt("return",f.Toast.info("定位失败，请重试"));case 2:if(r=u.state,l=r.addressList,i=r.radius,d=r.curitem,0!=(o=l.filter(function(e){var n=e.location.split(",");return(0,C.default)({longitude:t.longitude,latitude:t.latitude},{longitude:n[0],latitude:n[1]})<1*i})).length){e.next=7;break}return e.abrupt("return",f.Toast.info("对不起，你还不在打卡有效范围内"));case 7:return c={id:d.id,clockinginTime:d.clockinginTime,duty:d.duty,orgId:localStorage.organizationId,uid:localStorage.userId,clockinAddress:o[0].name,center:t.longitude+","+t.latitude},e.next=10,Request("attendanceGroup/clockin",{method:"post",data:c});case 10:(s=e.sent).success?(f.Toast.info("打卡成功"),u.handleGetData()):f.Toast.info(s.message);case 12:case"end":return e.stop()}},e,n)})),function(e){return d.apply(this,arguments)}),window.global_handleUpdateData=u.global_handleUpdateData,u.state={dates:{},data:[],addressList:[],radius:"160"},u}return(0,u.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.handleGetData(),this.handleUpdateTime(),this.delay=setInterval(function(){e.handleUpdateTime()},1e3)}},{key:"componentWillUnmount",value:function(){f.Toast.hide(),clearInterval(this.delay)}},{key:"render",value:function(){var e=this.state,t=e.dates,n=e.data,a=n.filter(function(e){return""==e.clockinTime&&t.timestamp-Date.parse(e.lastClockTime)<0})[0];return s.default.createElement(m.default,null,s.default.createElement(f.NavBar,{mode:"light",icon:s.default.createElement(p.default,null)},"考勤打卡"),s.default.createElement(h.default,{style:{background:"#fff"}},s.default.createElement("div",{className:v.default.userinfo},s.default.createElement("div",{className:v.default.username},localStorage.userName),s.default.createElement("div",null,t.ymd)),s.default.createElement("div",{className:v.default.lists},s.default.createElement("div",{className:v.default.tp},"打卡记录时间和位置"),n.map(function(e,n){var a="on"==e.duty?"上班时间":"下班时间",r=t.timestamp-Date.parse(e.lastClockTime)>0;return""==e.clockinTime&&r?s.default.createElement("div",{className:v.default.daka,key:e.id},s.default.createElement("div",{className:v.default.t1},a,"：",e.clockinginTime),s.default.createElement("div",{className:v.default.t2},s.default.createElement("span",{className:v.default.t4},e.clockinResultValue))):""!=e.clockinTime?s.default.createElement("div",{className:v.default.daka,key:e.id},s.default.createElement("div",{className:v.default.t1},a,"：",e.clockinginTime),s.default.createElement("div",{className:v.default.t2},s.default.createElement("div",{className:v.default.t20},"打卡时间 "+e.clockinTime),s.default.createElement("span",{className:v.default.t4},e.clockinResultValue)),s.default.createElement("div",{className:v.default.t3},s.default.createElement("i",{className:"iconfont icon-weizhi2"}),e.clockinAddress)):null}),a?s.default.createElement(g.default,{onClick:this.handleUpdateData,dates:t,data:a}):0==n.length?s.default.createElement("div",{className:v.default.lastdaka},"今日没有打卡排班"):s.default.createElement("div",{className:v.default.lastdaka},"今日打卡结束"))),s.default.createElement(A.default,{curlink:"attendance"}))}}]),t}(c.Component);t.default=B},JKjD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(n("cDcd")),r=l(n("NbhV"));function l(e){return e&&e.__esModule?e:{default:e}}var i=r.default.div.withConfig({displayName:"FooterBtn__FooterView"})(["height:0.56rem;min-height:0.56rem;padding:0.1rem 0.15rem;"]),d=r.default.div.withConfig({displayName:"FooterBtn__BtnView"})(["height:0.36rem;min-height:0.36rem;line-height:0.36rem;text-align:center;color:#fff;font-size:0.16rem;background:#108ee9;border-radius:0.02rem;"]);t.default=function(e){var t=e.onClick,n=e.title,r=void 0===n?"保存":n;return a.default.createElement(i,null,a.default.createElement(d,{onClick:t},r))}},"KB7+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=(a=n("uB8n"))&&a.__esModule?a:{default:a};t.default=function(e){var t=(e=JSON.parse((0,r.default)(e))).deptList.map(function(e){return{id:e}});e.deptList=t;var n=e.userList.map(function(e){return{userId:e}});return e.userList=n,e.userId=e.userId[0]||"",e}},M5yo:function(e,t,n){var a=n("DWxq");"string"==typeof a&&(a=[[e.i,a,""]]);n("DkTI")(a,{hmr:!0,transform:void 0,insertInto:void 0}),a.locals&&(e.exports=a.locals)},NFNw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,l,i=C(n("pRfh")),d=C(n("clYf")),o=C(n("KN1l")),u=C(n("G+8T")),c=C(n("p02J")),s=C(n("cLmd")),f=C(n("dAt5")),m=C(n("Fo7F")),h=n("cDcd"),p=C(h),A=C(n("/Csj")),g=C(n("PfKs")),v=C(n("KB7+")),E=n("Lrpq");function C(e){return e&&e.__esModule?e:{default:e}}var _=(0,n("rRcN").contextConsumers)(function(e){return{query:e.query}})((r=function(e){function t(e){(0,c.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));l.call(n);var a=(0,g.default)(e.history.location.state);return n.state=a,n}return(0,m.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e={data:this.state,onChange:this.handleChange,bartitle:"编辑考勤组"};return p.default.createElement(A.default,(0,o.default)({},e,{onSave:this.handleSave}))}}]),t}(h.Component),l=function(){var e=this;this.handleChange=function(t,n){var a=e.state;a[t]=n,e.setState(a)},this.handleSave=(0,d.default)(i.default.mark(function t(){var n,a;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,v.default)(e.state),t.next=3,Request("attendanceGroup/updateMember",{method:"post",data:n});case 3:(a=t.sent).success?(E.Toast.info("保存成功"),window.history.back()):E.Toast.info(a.message);case 5:case"end":return t.stop()}},t,e)}))},a=r))||a;t.default=_},PfKs:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=(a=n("uB8n"))&&a.__esModule?a:{default:a};t.default=function(e){var t=(e=JSON.parse((0,r.default)(e))).deptList.map(function(e){return e.id});e.deptList=t;var n=e.userList.map(function(e){return e.userId});e.userList=n;var a=e.userId;return e.userId=a?[a]:[],e}},QCQQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=_(n("G+8T")),l=_(n("p02J")),i=_(n("cLmd")),d=_(n("dAt5")),o=_(n("Fo7F")),u=n("cDcd"),c=_(u),s=_(n("faye")),f=n("Lrpq"),m=_(n("NbhV")),h=_(n("7l6G")),p=_(n("gJnY")),A=_(n("JKjD")),g=_(n("Wm6o")),v=_(n("F2Ox")),E=_(n("RfQ1")),C=n("rRcN");function _(e){return e&&e.__esModule?e:{default:e}}var B=f.List.Item,k=(0,C.contextConsumers)(function(e){return{query:e.query,bcs:e.getIn(["schedules",localStorage.organizationId])}})(a=function(e){function t(e){(0,l.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.handleCheck=function(e){n.setState({selectKey:e})},n.handleSave=function(){var e=n.props.onSave,t=n.state.selectKey;e&&e(t)},n.state={selectKey:e.selectKey},n}return(0,o.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){this.props.dispatch.callBack(E.default)}},{key:"render",value:function(){var e=this,t=this.props,n=t.history,a=t.bcs,r=this.state.selectKey;return s.default.createPortal(c.default.createElement(h.default,null,c.default.createElement(f.NavBar,{mode:"light",icon:c.default.createElement(f.Icon,{type:"left",size:"lg"}),onLeftClick:function(){return window.history.back()}},"班次设置"),c.default.createElement(p.default,null,c.default.createElement(f.List,{renderHeader:function(){return"从全局班次中选择你想用的班次"}},c.default.createElement(B,null,c.default.createElement(g.default,{id:"addtime",history:n},c.default.createElement("i",{style:{color:"#8ac007"},className:"iconfont icon-wuuiconxiangjifangda"})," ",c.default.createElement("span",{style:{color:"#108ee9"}},"新增班次"))),a&&a.map(function(t){return c.default.createElement(v.default,{onClick:e.handleCheck,value:t.id,key:t.id,checked:r==t.id},c.default.createElement(y,null,c.default.createElement(b,null,t.shiftName),c.default.createElement(x,{history:n,id:"editTime"+t.id,shiftId:t.id},c.default.createElement("i",{className:"iconfont icon-bianji"}))))}))),c.default.createElement(A.default,{onClick:this.handleSave})),document.getElementById(rootDom))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{selectKey:e.selectKey}}}]),t}(u.Component))||a;t.default=k;var y=m.default.div.withConfig({displayName:"AttendanceTime__CheckView"})(["display:flex;"]),b=m.default.div.withConfig({displayName:"AttendanceTime__CheckNameView"})(["flex:1;overflow:hidden;"]),x=(0,m.default)(g.default).withConfig({displayName:"AttendanceTime__CheckEditView"})(["min-width:0.3rem;text-align:right;"])},RG7W:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(n("cDcd")),r=n("Lrpq"),l=i(n("ZdWX"));function i(e){return e&&e.__esModule?e:{default:e}}var d=r.List.Item;t.default=function(e){var t=e.deptlist,n=void 0===t?$arr:t,i=e.multiple,u=e.selectedKeys,c=e.onClick,s=e.onChangeLists;return n.length>0?a.default.createElement(r.List,{style:{marginTop:"6px"}},i?n.map(function(e,t){var n=l.default.checkbox;return-1!=u.indexOf(e.id)&&(n=l.default.checked),a.default.createElement(d,{key:e.id,extra:a.default.createElement(o,{list:e,onClick:s})},a.default.createElement("div",{onClick:function(){return c(e)}},a.default.createElement("span",{className:n}),e.name))}):n.map(function(e,t){return a.default.createElement(d,{key:e.id,extra:a.default.createElement(o,{list:e,onClick:s})},a.default.createElement("div",{onClick:function(){return c(e)}},e.name))})):a.default.createElement(r.List,{style:{marginTop:"6px"}},a.default.createElement(d,null,"没有子部门"))};var o=function(e){var t=e.list,n=e.onClick;return a.default.createElement("span",{className:l.default.extra,onClick:function(){return n(t)}},a.default.createElement("i",{className:"iconfont icon-wodexiaji"}),"下级")}},RfQ1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(n("pRfh")),r=l(n("clYf"));function l(e){return e&&e.__esModule?e:{default:e}}var i,d=(i=(0,r.default)(a.default.mark(function e(t,n){var r,l;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.organizationId,e.next=3,Request("shift/getShiftList",{params:{orgId:r}});case 3:(l=e.sent).success&&n.setIn(["schedules",r],l.data.list);case 5:case"end":return e.stop()}},e,void 0)})),function(e,t){return i.apply(this,arguments)});t.default=d},UVyK:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=m(n("G+8T")),l=m(n("p02J")),i=m(n("cLmd")),d=m(n("dAt5")),o=m(n("Fo7F")),u=n("cDcd"),c=m(u),s=m(n("VjHY")),f=m(n("a36i"));function m(e){return e&&e.__esModule?e:{default:e}}var h=(0,n("rRcN").contextConsumers)(function(e){return{query:e.query}})(a=(0,f.default)(a=function(e){function t(){return(0,l.default)(this,t),(0,d.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){return c.default.createElement(s.default,this.props)}}]),t}(u.Component))||a)||a;t.default=h},V3YV:function(e,t,n){var a=n("om/R");"string"==typeof a&&(a=[[e.i,a,""]]);n("DkTI")(a,{hmr:!0,transform:void 0,insertInto:void 0}),a.locals&&(e.exports=a.locals)},VaTa:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=(a=n("KN1l"))&&a.__esModule?a:{default:a};t.default=function(e){var t=["00","01","02","03","04","05","06","07","08","09"],n=new Date;e&&(10==e.length&&(e=1*e*1e3),n=new Date(e));var a=n.getFullYear(),l=n.getMonth()+1,i=n.getDate(),d=n.getHours(),o=n.getMinutes(),u=n.getSeconds(),c={year:a.toString(),month:t[l]||l.toString(),day:t[i]||i.toString(),hour:t[d]||d.toString(),minute:t[o]||o.toString(),second:t[u]||u.toString()},s=c.year+"-"+c.month+"-"+c.day,f=s+" "+c.hour+":"+c.minute+":"+c.second;return(0,r.default)({},c,{ymd:s,fulldate:f,timestamp:n.getTime()})}},VjHY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,l=_(n("KN1l")),i=_(n("G+8T")),d=_(n("p02J")),o=_(n("cLmd")),u=_(n("dAt5")),c=_(n("Fo7F")),s=n("cDcd"),f=_(s),m=_(n("faye")),h=n("Lrpq"),p=_(n("NbhV")),A=_(n("7l6G")),g=_(n("gJnY")),v=_(n("JKjD")),E=_(n("DwGg")),C=_(n("F2Ox"));function _(e){return e&&e.__esModule?e:{default:e}}h.List.Item;var B=(r=a=function(e){function t(e){(0,d.default)(this,t);var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));n.handleCheck=function(e){var t=n.state.cbcs,a=[].concat(t),r=a.findIndex(function(t){return t.id==e}),i=(0,l.default)({},a[r]);i.bc&&"0"!=i.bc?i.bc="0":i.bc=n.props.defaultbc,a[r]=i,n.setState({cbcs:a})},n.handleSelectTime=function(e,t){console.log(t);var a=n.state.cbcs,r=[].concat(a),i=r.findIndex(function(t){return t.id==e}),d=(0,l.default)({},r[i]);d.bc=t,r[i]=d,n.setState({cbcs:r}),window.history.back()},n.handleSave=function(){var e=n.props.onSave,t={};n.state.cbcs.map(function(e){return t[e.id]=e.bc}),e&&e(t)};var a=e.data,r=a.monShiftId,o=a.uesShiftId,c=a.wedShiftId,s=a.thurShiftId,f=a.friShiftId,m=a.satShiftId,h=a.sunShiftId,p=[{id:"monShiftId",title:"每周一",bc:r||0},{id:"uesShiftId",title:"每周二",bc:o||0},{id:"wedShiftId",title:"每周三",bc:c||0},{id:"thurShiftId",title:"每周四",bc:s||0},{id:"friShiftId",title:"每周五",bc:f||0},{id:"satShiftId",title:"每周六",bc:m||0},{id:"sunShiftId",title:"每周日",bc:h||0}];return n.state={cbcs:p},n}return(0,c.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.history,a=t.schedules,r=(t.data,this.state.cbcs);return m.default.createPortal(f.default.createElement(A.default,null,f.default.createElement(h.NavBar,{mode:"light",icon:f.default.createElement(h.Icon,{type:"left",size:"lg"}),onLeftClick:function(){return window.history.back()}},"考勤日期"),f.default.createElement(g.default,null,f.default.createElement(h.List,{renderHeader:function(){return"你可以点击编辑图标对某一天进行单独修改"}},r.map(function(t){var r=$obj;return a&&(r=(r=a.find(function(e){return e.id==t.bc}))||$obj),f.default.createElement(C.default,{onClick:e.handleCheck,value:t.id,key:t.id,checked:t.bc&&0!=t.bc},f.default.createElement(k,null,f.default.createElement(y,null,t.title),f.default.createElement(b,null,r.shiftName||"休息"),f.default.createElement("div",{onClick:function(e){return e.stopPropagation()}},f.default.createElement(x,{history:n,id:"xzbc"+t.id,selectKey:t.bc,onSave:e.handleSelectTime.bind(e,t.id)},f.default.createElement("i",{className:"iconfont icon-bianji"})))))}))),f.default.createElement(v.default,{onClick:this.handleSave})),document.getElementById(rootDom))}}]),t}(s.Component),a.defaultProps={defaultbc:0},r);t.default=B;var k=p.default.div.withConfig({displayName:"AttendanceDate__CheckView"})(["display:flex;"]),y=p.default.div.withConfig({displayName:"AttendanceDate__CheckNameView"})(["min-width:0.6rem;width:0.6rem;overflow:hidden;"]),b=p.default.div.withConfig({displayName:"AttendanceDate__CheckInfoView"})(["flex:1;overflow:hidden;text-align:right;color:#666;font-size:0.14rem;line-height:0.28rem;"]),x=(0,p.default)(E.default).withConfig({displayName:"AttendanceDate__CheckEditView"})(["min-width:0.3rem;text-align:right;"])},Wm6o:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=m(n("G+8T")),l=m(n("p02J")),i=m(n("cLmd")),d=m(n("dAt5")),o=m(n("Fo7F")),u=n("cDcd"),c=m(u),s=m(n("Dx7U")),f=m(n("a36i"));function m(e){return e&&e.__esModule?e:{default:e}}var h=(0,n("rRcN").contextConsumers)(function(e){return{query:e.query}})(a=(0,f.default)(a=function(e){function t(){return(0,l.default)(this,t),(0,d.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){return c.default.createElement(s.default,this.props)}}]),t}(u.Component))||a)||a;t.default=h},ZdWX:function(e,t,n){var a=n("ngOo");"string"==typeof a&&(a=[[e.i,a,""]]);n("DkTI")(a,{hmr:!0,transform:void 0,insertInto:void 0}),a.locals&&(e.exports=a.locals)},ZmKr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthComponent=t.AuthHoc=void 0;var a=s(n("6F6v")),r=s(n("heMk")),l=s(n("G+8T")),i=s(n("p02J")),d=s(n("cLmd")),o=s(n("dAt5")),u=s(n("Fo7F")),c=s(n("cDcd"));function s(e){return e&&e.__esModule?e:{default:e}}n("rRcN");var f=function(e){var t=e.tip;return c.default.createElement("div",null,t||"对不起，你无权访问该模块")},m=t.AuthHoc=function(e,t){return function(n){return function(a){function s(){return(0,i.default)(this,s),(0,o.default)(this,(s.__proto__||(0,l.default)(s)).apply(this,arguments))}return(0,u.default)(s,a),(0,d.default)(s,[{key:"render",value:function(){return auto&&-1==auths.indexOf(e)?"object"==(void 0===t?"undefined":(0,r.default)(t))?t:c.default.createElement(f,{tip:t}):c.default.createElement(n,this.props)}}]),s}(n)}},h=function(e){var t=e.children,n=e.auth,r=e.show,l=void 0!==r&&r,i=(0,a.default)(e,["children","auth","show"]);return n&&-1==auths.indexOf(n)?l?c.default.createElement(f,i):null:t};t.AuthComponent=h,t.default={AuthHoc:m,AuthComponent:h}},a36i:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(n("6F6v")),r=s(n("G+8T")),l=s(n("p02J")),i=s(n("cLmd")),d=s(n("dAt5")),o=s(n("Fo7F")),u=s(n("cDcd")),c=s(n("+0q/"));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return function(t){function n(){var e,t,a,i;(0,l.default)(this,n);for(var o=arguments.length,u=Array(o),s=0;s<o;s++)u[s]=arguments[s];return t=a=(0,d.default)(this,(e=n.__proto__||(0,r.default)(n)).call.apply(e,[this].concat(u))),a.handleShowModal=function(){var e=a.props,t=e.id,n=e.query;n=n.set(t+"_visible",!0);var r=a.props.history;r.push(r.location.pathname+"?"+c.default.stringify(n))},i=t,(0,d.default)(a,i)}return(0,o.default)(n,t),(0,i.default)(n,[{key:"render",value:function(){var t=this.props,n=t.children,r=t.style,l=t.className,i=t.id,d=t.query,o=(0,a.default)(t,["children","style","className","id","query"]),c=d[i+"_visible"];return u.default.createElement("div",{onClick:this.handleShowModal,style:r,className:l||""},n,c&&u.default.createElement(e,o))}}]),n}(u.default.Component)}},b03M:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=B(n("G+8T")),l=B(n("p02J")),i=B(n("cLmd")),d=B(n("dAt5")),o=B(n("Fo7F")),u=n("cDcd"),c=B(u),s=n("Lrpq"),f=B(n("7l6G")),m=B(n("gJnY")),h=B(n("APrv")),p=B(n("mDtR")),A=B(n("DwGg")),g=B(n("UVyK")),v=B(n("JKjD")),E=B(n("NbhV")),C=B(n("RfQ1")),_=n("rRcN");function B(e){return e&&e.__esModule?e:{default:e}}var k=s.List.Item,y=E.default.div.withConfig({displayName:"GroupRule__CloseView"})(["width:0.2rem;height:0.2rem;position:absolute;right:0.15rem;top:50%;transform:translateY(-50%);text-align:center;line-height:0.2rem;font-size:0.12rem;background:rgba(0,0,0,0.25);color:#fff;border-radius:1rem;"]),b=(0,_.contextConsumers)(function(e){return{query:e.query,schedules:e.getIn(["schedules",localStorage.organizationId])}})(a=function(e){function t(){var e,n,a,i;(0,l.default)(this,t);for(var o=arguments.length,u=Array(o),c=0;c<o;c++)u[c]=arguments[c];return n=a=(0,d.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(u))),a.state={},a.handleChangeTime=function(e){var t=a.props.onChange;t&&t("shiftId",e),window.history.back()},a.handleRightClick=function(e){var t=a.props,n=t.data,r=t.onChange,l=n.addressList;-1===l.findIndex(function(t){return t.id==e.id})?(l=l.concat(e),r&&r("addressList",l),window.history.back()):s.Toast.info("该地点已存在")},a.handleDelAois=function(e){var t=a.props,n=t.data,r=t.onChange;console.log(n);var l=n.addressList.filter(function(t){return t.id!=e.target.dataset.id});r&&r("addressList",l)},a.handleChangeRadius=function(e){var t=a.props.onChange;t&&t("radius",e.target.value)},i=n,(0,d.default)(a,i)}return(0,o.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){this.props.dispatch.callBack(C.default)}},{key:"render",value:function(){var e=this,t=this.props,n=t.history,a=t.data,r=t.schedules,l=t.onChangeDate,i=t.onSave,d=a.addressList,o=a.radius,u=a.shiftId,E=a.monShiftId,C=a.uesShiftId,_=a.wedShiftId,B=a.thurShiftId,b=a.friShiftId,x=a.satShiftId,w=a.sunShiftId,I=$obj;r&&(I=(I=r.find(function(e){return e.id==u}))||r[0]||$obj);var S=[E,C,_,B,b,x,w],L=S?S.filter(function(e){return e&&0!=e}):[];return c.default.createElement(f.default,null,c.default.createElement(s.NavBar,{mode:"light",icon:c.default.createElement(h.default,null)},"考勤规则"),c.default.createElement(m.default,null,c.default.createElement(s.List,{renderHeader:function(){return"设置考勤时间和日期"}},c.default.createElement(A.default,{id:"kqsj",history:n,selectKey:u,onSave:this.handleChangeTime},c.default.createElement(k,{arrow:"horizontal",extra:I.shiftName},"考勤时间")),c.default.createElement(g.default,{id:"kqrq",history:n,schedules:r,bcs:S,defaultbc:u,data:a,onSave:l},c.default.createElement(k,{arrow:"horizontal",extra:"每周"+L.length+"天"},"考勤日期"))),c.default.createElement(s.List,{renderHeader:function(){return"设置办公考勤地点"}},c.default.createElement(k,{arrow:"horizontal",extra:c.default.createElement("select",{value:o,onChange:this.handleChangeRadius},c.default.createElement("option",{value:100},"100米"),c.default.createElement("option",{value:150},"150米"),c.default.createElement("option",{value:200},"200米"),c.default.createElement("option",{value:250},"250米"),c.default.createElement("option",{value:300},"300米"),c.default.createElement("option",{value:500},"500米"))},"打卡有效范围"),d.map(function(t){return c.default.createElement(k,{key:t.id,multipleLine:!0},c.default.createElement("div",null,t.name),c.default.createElement(y,{"data-id":t.id,onClick:e.handleDelAois},"×"))}),c.default.createElement(k,{onClick:this.handleRed},c.default.createElement(p.default,{id:"dkdd",history:n,onRightClick:this.handleRightClick},c.default.createElement("i",{style:{color:"#8ac007"},className:"iconfont icon-wuuiconxiangjifangda"})," ",c.default.createElement("span",{style:{color:"#108ee9"}},"添加办公地点")))),c.default.createElement(s.WhiteSpace,null)),c.default.createElement(v.default,{onClick:i}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.data,a=e.schedules,r=e.onChange;return!n.shiftId&&a&&a.getIn([0,"id"])&&r&&r("shiftId",a.getIn([0,"id"])),null}}]),t}(u.Component))||a;t.default=b},"i2Z+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=E(n("pRfh")),l=E(n("clYf")),i=E(n("KN1l")),d=E(n("G+8T")),o=E(n("p02J")),u=E(n("cLmd")),c=E(n("dAt5")),s=E(n("Fo7F")),f=n("cDcd"),m=E(f),h=n("Lrpq"),p=E(n("/Csj")),A=E(n("b03M")),g=E(n("KB7+")),v=E(n("RfQ1"));function E(e){return e&&e.__esModule?e:{default:e}}var C=(0,n("rRcN").contextConsumers)(function(e){return{query:e.query,schedules:e.getIn(["schedules",localStorage.organizationId])}})(a=function(e){function t(){var e,n,a,u,s=this;(0,o.default)(this,t);for(var f=arguments.length,m=Array(f),p=0;p<f;p++)m[p]=arguments[p];return n=a=(0,c.default)(this,(e=t.__proto__||(0,d.default)(t)).call.apply(e,[this].concat(m))),a.state={shiftId:0,deptList:[],userList:[],addressList:[],userId:[],radius:"100",workDayList:null,attendanceName:"1111111",monShiftId:null,uesShiftId:null,wedShiftId:null,thurShiftId:null,friShiftId:null,satShiftId:null,sunShiftId:null,orgId:localStorage.organizationId},a.handleInitData=function(e){var t=e.schedules,n=e.match.params.id;if(t&&n&&!a.state.shiftId){var r=t.getIn([0,"id"]);a.setState({shiftId:r})}},a.handleChange=function(e,t){var n=a.state;n[e]=t,a.setState(n)},a.handleChangeDate=function(e){var t=a.state;a.setState((0,i.default)({},t,e)),window.history.back()},a.handleNextStep=function(){if(a.state.attendanceName){var e=a.props,t=e.match;e.history.push(t.url+"?step=1")}else h.Toast.info("考勤组名称不能为空")},a.handleSave=(0,l.default)(r.default.mark(function e(){var t,n;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,g.default)(a.state),e.next=3,Request("attendanceGroup/add",{method:"post",data:t});case 3:(n=e.sent).success?(window.history.go(-2),h.Toast.info("新增考勤组成功")):h.Toast.info(n.message);case 5:case"end":return e.stop()}},e,s)})),u=n,(0,c.default)(a,u)}return(0,s.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.handleInitData(this.props),this.props.dispatch.callBack(v.default)}},{key:"componentDidUpdate",value:function(){this.handleInitData(this.props)}},{key:"render",value:function(){var e=this.props.query.step,t={data:this.state,onChange:this.handleChange,onChangeDate:this.handleChangeDate,history:this.props.history};return 1==e?m.default.createElement(A.default,(0,i.default)({},t,{onSave:this.handleSave})):m.default.createElement(p.default,(0,i.default)({},t,{onSave:this.handleNextStep,title:"下一步"}))}}]),t}(f.Component))||a;t.default=C},jeeJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=(a=n("cDcd"))&&a.__esModule?a:{default:a},l=n("Lrpq"),i=l.Radio.RadioItem,d=[{value:1,title:"1天1次上下班"},{value:2,title:"1天2次上下班"},{value:3,title:"1天3次上下班"}];t.default=function(e){var t=e.onChange,n=e.bcnum;return r.default.createElement(l.List,{renderHeader:function(){return"设置该班次一天内上下班次数"}},d.map(function(e){return r.default.createElement(i,{key:e.value,checked:n===e.value,onChange:function(){return t(e.value)}},e.title)}))}},l8sP:function(e,t,n){(t=e.exports=n("3G5m")(!0)).push([e.i,".SelectUserCpt_steps_3WiGr {\n  padding: 0.1rem;\n  background: #fff; }\n\n.SelectUserCpt_addBtn_1aRGR,\n.SelectUserCpt_avatar_3-xDo {\n  display: inline-block;\n  width: 0.54rem;\n  height: 0.54rem;\n  font-size: 0.4rem;\n  border-radius: 0.54rem;\n  line-height: 0.54rem;\n  overflow: hidden;\n  background: #f2f2f2;\n  color: #ccc;\n  text-align: center;\n  margin: 0.04rem; }\n\n.SelectUserCpt_avatar_3-xDo {\n  background: #108ee9;\n  font-size: 0.16rem;\n  color: #fff; }\n\n.SelectUserCpt_iconfont_1j6Yu {\n  line-height: 0.54rem;\n  font-size: 0.2rem;\n  width: 0.2rem;\n  color: #ccc;\n  display: inline-block;\n  height: 0.54rem;\n  overflow: hidden;\n  text-align: center;\n  margin: 0.05rem 0; }\n","",{version:3,sources:["E:/www/webpack4/src/Libs/Components/FormTable/SelectUserCpt.scss"],names:[],mappings:"AAAA;EACE,gBAAgB;EAChB,iBAAiB,EAAE;;AAErB;;EAEE,sBAAsB;EACtB,eAAe;EACf,gBAAgB;EAChB,kBAAkB;EAClB,uBAAuB;EACvB,qBAAqB;EACrB,iBAAiB;EACjB,oBAAoB;EACpB,YAAY;EACZ,mBAAmB;EACnB,gBAAgB,EAAE;;AAEpB;EACE,oBAAoB;EACpB,mBAAmB;EACnB,YAAY,EAAE;;AAEhB;EACE,qBAAqB;EACrB,kBAAkB;EAClB,cAAc;EACd,YAAY;EACZ,sBAAsB;EACtB,gBAAgB;EAChB,iBAAiB;EACjB,mBAAmB;EACnB,kBAAkB,EAAE",file:"SelectUserCpt.scss",sourcesContent:[".steps {\n  padding: 0.1rem;\n  background: #fff; }\n\n.addBtn,\n.avatar {\n  display: inline-block;\n  width: 0.54rem;\n  height: 0.54rem;\n  font-size: 0.4rem;\n  border-radius: 0.54rem;\n  line-height: 0.54rem;\n  overflow: hidden;\n  background: #f2f2f2;\n  color: #ccc;\n  text-align: center;\n  margin: 0.04rem; }\n\n.avatar {\n  background: #108ee9;\n  font-size: 0.16rem;\n  color: #fff; }\n\n.iconfont {\n  line-height: 0.54rem;\n  font-size: 0.2rem;\n  width: 0.2rem;\n  color: #ccc;\n  display: inline-block;\n  height: 0.54rem;\n  overflow: hidden;\n  text-align: center;\n  margin: 0.05rem 0; }\n"],sourceRoot:""}]),t.locals={steps:"SelectUserCpt_steps_3WiGr",addBtn:"SelectUserCpt_addBtn_1aRGR",avatar:"SelectUserCpt_avatar_3-xDo",iconfont:"SelectUserCpt_iconfont_1j6Yu"}},mDtR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=m(n("G+8T")),l=m(n("p02J")),i=m(n("cLmd")),d=m(n("dAt5")),o=m(n("Fo7F")),u=n("cDcd"),c=m(u),s=m(n("HuV/")),f=m(n("a36i"));function m(e){return e&&e.__esModule?e:{default:e}}var h=(0,n("rRcN").contextConsumers)(function(e){return{query:e.query}})(a=(0,f.default)(a=function(e){function t(){return(0,l.default)(this,t),(0,d.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){return c.default.createElement(s.default,this.props)}}]),t}(u.Component))||a)||a;t.default=h},mM6c:function(e,t,n){(t=e.exports=n("3G5m")(!0)).push([e.i,".Footer_footer_2ewDc {\n  display: flex;\n  line-height: 0.46rem;\n  height: 0.46rem;\n  border-top: 1px solid #ccc; }\n\n.Footer_action_1__m3 {\n  flex: 1;\n  text-align: center;\n  color: #108ee9;\n  font-size: 0.18rem; }\n","",{version:3,sources:["E:/www/webpack4/src/pages/Attendance/Components/Footer.scss"],names:[],mappings:"AAAA;EACE,cAAc;EACd,qBAAqB;EACrB,gBAAgB;EAChB,2BAA2B,EAAE;;AAE/B;EACE,QAAQ;EACR,mBAAmB;EACnB,eAAe;EACf,mBAAmB,EAAE",file:"Footer.scss",sourcesContent:[".footer {\n  display: flex;\n  line-height: 0.46rem;\n  height: 0.46rem;\n  border-top: 1px solid #ccc; }\n\n.action {\n  flex: 1;\n  text-align: center;\n  color: #108ee9;\n  font-size: 0.18rem; }\n"],sourceRoot:""}]),t.locals={footer:"Footer_footer_2ewDc",action:"Footer_action_1__m3"}},misx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(n("cDcd")),r=l(n("NbhV"));function l(e){return e&&e.__esModule?e:{default:e}}var i=r.default.div.withConfig({displayName:"Punch__PunchView"})(['position:relative;padding:0 0.15rem 0.2rem;line-height:0.24rem;&:before{content:"";position:absolute;top:0.05rem;z-index:9;background:#108ee9;width:0.1rem;height:0.1rem;left:0;border-radius:0.1rem;}']),d=r.default.div.withConfig({displayName:"Punch__ButtonView"})(["width:1.2rem;height:1.2rem;margin:0.1rem auto 0;text-align:center;background:#108ee9;border-radius:1.2rem;padding:0.35rem 0;"]),o=r.default.div.withConfig({displayName:"Punch__TitleView"})(["font-size:0.2rem;color:#fff;line-height:0.32rem;"]),u=r.default.div.withConfig({displayName:"Punch__TimeView"})(["font-size:0.14rem;color:#eee;line-height:0.18rem;"]);t.default=function(e){var t=e.dates,n=e.data,r=e.onClick,l="on"==n.duty?"上班时间":"下班时间";return a.default.createElement(i,null,a.default.createElement("div",null,l,"：",n.clockinginTime),a.default.createElement(d,{onClick:function(){return r(n)}},a.default.createElement(o,null,l),t.hour&&a.default.createElement(u,null,t.hour+":"+t.minute+":"+t.second)))}},ngOo:function(e,t,n){(t=e.exports=n("3G5m")(!0)).push([e.i,'.DeptList_disabled_1ES2y {\n  background: #f2f2f2; }\n\n.DeptList_checkbox_Hc9G7,\n.DeptList_checked_f5RrI {\n  display: inline-block;\n  position: relative;\n  top: 0.03rem;\n  margin-right: 0.08rem;\n  width: 0.21rem;\n  height: 0.21rem;\n  border: 1px solid #ccc;\n  border-radius: 50%;\n  -webkit-transform: rotate(0deg);\n  transform: rotate(0deg);\n  box-sizing: border-box; }\n\n.DeptList_checked_f5RrI {\n  border-color: #3692fa;\n  background: #3692fa; }\n  .DeptList_checked_f5RrI:after {\n    position: absolute;\n    display: none;\n    top: 0.03rem;\n    right: 0.06rem;\n    z-index: 999;\n    width: 0.05rem;\n    height: 0.11rem;\n    content: " ";\n    -webkit-transform: rotate(45deg);\n            transform: rotate(45deg);\n    border-style: solid;\n    border-width: 0px 1px 1px 0px;\n    display: block;\n    border-color: white; }\n\n.DeptList_extra_2g7fv {\n  font-size: 0.16rem;\n  border-left: 1px solid #ddd;\n  padding-left: 0.08rem;\n  color: #108ee9; }\n  .DeptList_extra_2g7fv .iconfont {\n    font-size: 0.16rem; }\n',"",{version:3,sources:["E:/www/webpack4/src/Libs/Components/Department/DeptList.scss"],names:[],mappings:"AAAA;EACE,oBAAoB,EAAE;;AAExB;;EAEE,sBAAsB;EACtB,mBAAmB;EACnB,aAAa;EACb,sBAAsB;EACtB,eAAe;EACf,gBAAgB;EAChB,uBAAuB;EACvB,mBAAmB;EACnB,gCAAgC;EAChC,wBAAwB;EACxB,uBAAuB,EAAE;;AAE3B;EACE,sBAAsB;EACtB,oBAAoB,EAAE;EACtB;IACE,mBAAmB;IACnB,cAAc;IACd,aAAa;IACb,eAAe;IACf,aAAa;IACb,eAAe;IACf,gBAAgB;IAChB,aAAa;IACb,iCAAiC;YACzB,yBAAyB;IACjC,oBAAoB;IACpB,8BAA8B;IAC9B,eAAe;IACf,oBAAoB,EAAE;;AAE1B;EACE,mBAAmB;EACnB,4BAA4B;EAC5B,sBAAsB;EACtB,eAAe,EAAE;EACjB;IACE,mBAAmB,EAAE",file:"DeptList.scss",sourcesContent:['.disabled {\n  background: #f2f2f2; }\n\n.checkbox,\n.checked {\n  display: inline-block;\n  position: relative;\n  top: 0.03rem;\n  margin-right: 0.08rem;\n  width: 0.21rem;\n  height: 0.21rem;\n  border: 1px solid #ccc;\n  border-radius: 50%;\n  -webkit-transform: rotate(0deg);\n  transform: rotate(0deg);\n  box-sizing: border-box; }\n\n.checked {\n  border-color: #3692fa;\n  background: #3692fa; }\n  .checked:after {\n    position: absolute;\n    display: none;\n    top: 0.03rem;\n    right: 0.06rem;\n    z-index: 999;\n    width: 0.05rem;\n    height: 0.11rem;\n    content: " ";\n    -webkit-transform: rotate(45deg);\n            transform: rotate(45deg);\n    border-style: solid;\n    border-width: 0px 1px 1px 0px;\n    display: block;\n    border-color: white; }\n\n.extra {\n  font-size: 0.16rem;\n  border-left: 1px solid #ddd;\n  padding-left: 0.08rem;\n  color: #108ee9; }\n  .extra :global(.iconfont) {\n    font-size: 0.16rem; }\n'],sourceRoot:""}]),t.locals={disabled:"DeptList_disabled_1ES2y",checkbox:"DeptList_checkbox_Hc9G7",checked:"DeptList_checked_f5RrI",extra:"DeptList_extra_2g7fv"}},nsRB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=C(n("KN1l")),r=C(n("pRfh")),l=C(n("clYf")),i=C(n("G+8T")),d=C(n("p02J")),o=C(n("cLmd")),u=C(n("dAt5")),c=C(n("Fo7F")),s=n("cDcd"),f=C(s),m=n("Lrpq"),h=n("8LOv"),p=C(n("7l6G")),A=C(n("gJnY")),g=C(n("APrv")),v=C(n("FwLA")),E=C(n("EUn7"));function C(e){return e&&e.__esModule?e:{default:e}}var _=m.List.Item,B=function(e){function t(){(0,d.default)(this,t);var e=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return e.handleRed=function(){e.props.history.push("/attendance/addgroup")},e.state={attendanceGroupList:[]},e}return(0,c.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){var e=(0,l.default)(r.default.mark(function e(){var t;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Request("attendanceGroup/list");case 2:(t=e.sent).success?this.setState({attendanceGroupList:t.data.attendanceGroupList}):m.Toast.info(t.message);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.match,t=(e.url,e.params,this.state.attendanceGroupList);return f.default.createElement(p.default,null,f.default.createElement(m.NavBar,{mode:"light",icon:f.default.createElement(g.default,null)},"考勤设置"),f.default.createElement(A.default,null,f.default.createElement(m.WhiteSpace,null),f.default.createElement(m.List,null,f.default.createElement(_,{onClick:this.handleRed},f.default.createElement("div",{style:{color:"#108ee9"}},f.default.createElement("i",{className:"iconfont icon-wuuiconxiangjifangda"})," ",f.default.createElement("span",null,"新增考勤组")))),t.map(function(e){return f.default.createElement("div",{className:E.default.attendance,key:e.id},f.default.createElement("div",{className:E.default.detail},f.default.createElement("div",{className:E.default.attendanceName},e.attendanceName),f.default.createElement("div",{className:E.default.shiftList},e.shiftList),f.default.createElement("div",{className:E.default.attendanceAdd},e.addressList.map(function(e,t){return f.default.createElement("div",{key:t},f.default.createElement("i",{className:"iconfont icon-kaoqinqiandao"}),e.name)}))),f.default.createElement("div",{className:E.default.act},f.default.createElement(h.Link,{to:{pathname:"/attendance/grouprule/"+e.id,state:(0,a.default)({},e)},className:E.default.a},"修改规则"),f.default.createElement(h.Link,{to:{pathname:"/attendance/groupinfo/"+e.id,state:(0,a.default)({},e)},className:E.default.a},"修改成员及负责人")))})),f.default.createElement(v.default,{curlink:"setting"}))}}]),t}(s.Component);t.default=B},"om/R":function(e,t,n){(t=e.exports=n("3G5m")(!0)).push([e.i,".SelectedItems_checkedmenu_12NlT {\n  margin-right: 0.06rem; }\n","",{version:3,sources:["E:/www/webpack4/src/Libs/Components/Department/SelectedItems.scss"],names:[],mappings:"AAAA;EACE,sBAAsB,EAAE",file:"SelectedItems.scss",sourcesContent:[".checkedmenu {\n  margin-right: 0.06rem; }\n"],sourceRoot:""}]),t.locals={checkedmenu:"SelectedItems_checkedmenu_12NlT"}},r7n4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=.01745329251994329,a=e.longitude,r=e.latitude,l=t.longitude,i=t.latitude;a*=n,r*=n,l*=n,i*=n;var d=Math.sin(a),o=Math.sin(r),u=Math.cos(a),c=Math.cos(r),s=Math.sin(l),f=Math.sin(i),m=Math.cos(l),h=Math.cos(i),p=[],A=[];p.push(c*u),p.push(c*d),p.push(o),A.push(h*m),A.push(h*s),A.push(f);var g=Math.sqrt((p[0]-A[0])*(p[0]-A[0])+(p[1]-A[1])*(p[1]-A[1])+(p[2]-A[2])*(p[2]-A[2]));return 12742001.5798544*Math.asin(g/2)}},rPIf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,l,i=C(n("G+8T")),d=C(n("p02J")),o=C(n("cLmd")),u=C(n("dAt5")),c=C(n("Fo7F")),s=n("cDcd"),f=C(s),m=n("8LOv"),h=n("Lrpq"),p=C(n("APrv")),A=C(n("fqwA")),g=C(n("v3FK")),v=n("rRcN"),E=C(n("Tfgt"));function C(e){return e&&e.__esModule?e:{default:e}}h.List.Item;var _=(0,v.contextConsumers)(function(e){return{query:e.query,userlists:e.getIn(["userList",localStorage.organizationId])}})(a=(0,m.withRouter)((l=r=function(e){function t(){var e,n,a,r;(0,d.default)(this,t);for(var l=arguments.length,o=Array(l),c=0;c<l;c++)o[c]=arguments[c];return n=a=(0,u.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(o))),a.handleShowOrgCpt=function(){var e=a.props,t=e.match,n=e.history,r=e.name;n.push(t.url+"?"+r+"=true")},a.handleUserListClick=function(e){console.log(e);var t=a.props,n=t.name,r=t.value,l=t.onChange;if(t.single)return l(n,[e.userId]),void window.history.back();var i=r.length;if(i>0&&r[i-1]==e.userId)return h.Toast.info("该人员与前一人员是同一人");r.push(e.userId),l(n,r),window.history.back()},a.handleSelect=function(e){var t=a.props,n=t.name;(0,t.onChange)(n,e),window.history.back()},a.handleDelItem=function(e){var t=a.props,n=t.name,r=t.value,l=t.onChange,i=e.target.dataset.index;r.splice(i,1),l(n,r)},r=n,(0,u.default)(a,r)}return(0,c.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){this.props.userlists||this.props.dispatch.callBack(E.default)}},{key:"render",value:function(){var e=this,t=this.props,n=t.query,a=t.userlists,r=void 0===a?$arr:a,l=t.title,i=t.name,d=t.value,o=void 0===d?[]:d,u=t.single,c=t.multiple,s=t.step;c=!u&&c;var m=o.map(function(e){return r.find(function(t){return t.userId==e})});return f.default.createElement(h.List,{renderHeader:function(){return l}},f.default.createElement("div",{className:g.default.steps},m.map(function(t,n){return[f.default.createElement("div",{key:n,className:g.default.avatar,"data-index":n,onClick:e.handleDelItem},t.personname),s&&f.default.createElement(B,null)]}),f.default.createElement("div",{className:g.default.addBtn,onClick:this.handleShowOrgCpt},"+")),n[i]&&f.default.createElement(k,{selectedKeys:o,multiple:c,onClickUser:this.handleUserListClick,onSelect:this.handleSelect}))}}]),t}(s.Component),r.defaultProps={step:!1,single:!1,multiple:!0},a=l))||a)||a;t.default=_;var B=function(){return f.default.createElement("div",{className:g.default.iconfont},f.default.createElement("i",{className:"iconfont icon-iconfontjiantou "}))},k=function(e){var t=e.onClickUser,n=e.onSelect,a=e.multiple,r=e.selectedKeys;return f.default.createElement(A.default,{onClickUser:t,selectedKeys:r,multiple:a},function(e,t){return f.default.createElement(h.NavBar,{mode:"light",icon:f.default.createElement(p.default,null),rightContent:f.default.createElement("div",{onClick:function(){return n(e,t)}},"确定")},"选择人员")})}},rhuD:function(e,t,n){"use strict"},uB8n:function(e,t,n){e.exports={default:n("AEAa"),__esModule:!0}},uiDc:function(e,t,n){var a=n("mM6c");"string"==typeof a&&(a=[[e.i,a,""]]);n("DkTI")(a,{hmr:!0,transform:void 0,insertInto:void 0}),a.locals&&(e.exports=a.locals)},utdY:function(e,t,n){var a=n("E7Wo");"string"==typeof a&&(a=[[e.i,a,""]]);n("DkTI")(a,{hmr:!0,transform:void 0,insertInto:void 0}),a.locals&&(e.exports=a.locals)},v3FK:function(e,t,n){var a=n("l8sP");"string"==typeof a&&(a=[[e.i,a,""]]);n("DkTI")(a,{hmr:!0,transform:void 0,insertInto:void 0}),a.locals&&(e.exports=a.locals)}}]);