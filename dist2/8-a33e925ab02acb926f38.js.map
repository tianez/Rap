{"version":3,"sources":["webpack:///./src/Libs/Hoc/GetData.jsx","webpack:///./src/pages/Article/Detail.scss?2f05","webpack:///./src/pages/Article/Detail.jsx","webpack:///./src/pages/Layout/BaseLayout.jsx","webpack:///./src/pages/Article/Detail.scss"],"names":["__webpack_require__","f","m","e","__esModule","default","t","Component","_React$Component","_class2","_ref","_temp","_this","_ret","_ref2","_this2","this","_classCallCheck3","_len","arguments","length","args","Array","_key","_possibleConstructorReturn3","__proto__","_getPrototypeOf2","call","apply","concat","state","loadState","loading","error","errorMsg","getData","_asyncToGenerator3","_regenerator2","mark","_callee","url","options","res","delayend","delaytime","wrap","_context","prev","next","delayStart","Date","now","setState","Apicloud","sent","_delay2","success","data","message","stop","_x","_x2","_inherits3","_createClass3","key","value","_react2","createElement","_extends3","props","content","module","i","hmr","transform","insertInto","locals","exports","_react","v","A","p","h","E","g","Detail","n","a","r","u","d","c","s","isCache","id","dbData","match","params","db","news","where","equalsIgnoreCase","toArray","_state","_state$data","_BaseLayout2","title","_ContentView2","style","padding","background","_Loading2","loadingTitle","errorAction","onClick","className","_Detail2","info","_dayjs2","createdAt","format","dangerouslySetInnerHTML","__html","nextProps","prevState","l","o","_ref$border","border","children","_LayoutView2","_navBar2","mode","icon","_LeftIcon2","_Layout2","header","push","version","sources","names","mappings","file","sourcesContent","sourceRoot"],"mappings":"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","file":"8-a33e925ab02acb926f38.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport delay from \"Utils/delay\";\r\nconst GetData = Component =>\r\n    class extends React.Component {\r\n        state = {\r\n            // data: null,\r\n            loadState: {\r\n                loading: false,\r\n                error: false,\r\n                errorMsg: \"\"\r\n            }\r\n        };\r\n        getData = async (url, options, delaytime = 0) => {\r\n            this.delayStart = Date.now();\r\n            this.setState({\r\n                loadState: {\r\n                    loading: true,\r\n                    error: false,\r\n                    errorMsg: \"\"\r\n                }\r\n            });\r\n            let res = await Apicloud(url, options);\r\n            let delayend = this.delayStart + delaytime - Date.now();\r\n            if (delayend > 0) {\r\n                await delay(delayend);\r\n            }\r\n            if (res.success) {\r\n                this.setState({\r\n                    data: res.data,\r\n                    loadState: {\r\n                        loading: false,\r\n                        error: false,\r\n                        errorMsg: \"\"\r\n                    }\r\n                });\r\n            } else {\r\n                this.setState({\r\n                    loadState: {\r\n                        loading: false,\r\n                        error: true,\r\n                        errorMsg: res.message\r\n                    }\r\n                });\r\n            }\r\n        };\r\n        render() {\r\n            return <Component {...this.props} {...this.state} getData={this.getData} />;\r\n        }\r\n    };\r\n\r\nexport default GetData;\r\n","\nvar content = require(\"!!../../../node_modules/.0.28.11@css-loader/index.js??ref--5-1!../../../node_modules/.2.1.3@postcss-loader/lib/index.js!../../../node_modules/.6.0.7@sass-loader/lib/loader.js!./Detail.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/.0.20.3@style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/.0.28.11@css-loader/index.js??ref--5-1!../../../node_modules/.2.1.3@postcss-loader/lib/index.js!../../../node_modules/.6.0.7@sass-loader/lib/loader.js!./Detail.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/.0.28.11@css-loader/index.js??ref--5-1!../../../node_modules/.2.1.3@postcss-loader/lib/index.js!../../../node_modules/.6.0.7@sass-loader/lib/loader.js!./Detail.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import React, { Component } from \"react\";\r\nimport ContentView from \"Views/Layout/ContentView\";\r\nimport BaseLayout from \"../Layout/BaseLayout\";\r\n\r\nimport Loading from \"Components/Layout/Loading\";\r\nimport dayjs from \"dayjs\";\r\n\r\nimport styles from \"./Detail.scss\";\r\n\r\nimport GetData from \"Hoc/GetData\";\r\n@GetData\r\nexport default class Detail extends Component {\r\n    state = {\r\n        isCache: false,\r\n        loadState: {}\r\n    };\r\n    static getDerivedStateFromProps(nextProps, prevState) {\r\n        // let data = Object.keys(nextProps.data).length > 0 ? nextProps.data : prevState.data;\r\n        return {\r\n            // data: data,\r\n            data: nextProps.data,\r\n            loadState: nextProps.loadState\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        this.props.getData(`article/${this.props.match.params.id}`);\r\n        // this.getData();\r\n    }\r\n    getData = async () => {\r\n        let { id } = this.props.match.params;\r\n        let dbData = await db.news\r\n            .where(\"id\")\r\n            .equalsIgnoreCase(id)\r\n            .toArray();\r\n        if (dbData[0]) {\r\n            this.setState({\r\n                data: dbData[0],\r\n                isCache: true\r\n            });\r\n        }\r\n        this.props.getData(`article/${id}`);\r\n    };\r\n    render() {\r\n        let { data = {}, loadState, isCache } = this.state;\r\n        return (\r\n            <BaseLayout title={\"文章详情\"}>\r\n                <ContentView style={{ padding: \"15px\", background: \"#fff\" }}>\r\n                    <Loading\r\n                        {...loadState}\r\n                        loadingTitle={isCache ? \"刷新中...\" : \"获取数据中...\"}\r\n                        errorAction={<div onClick={this.props.getData}>出错了，点击重试！</div>}\r\n                    />\r\n                    <div className={styles.title}>{data.title}</div>\r\n                    <div className={styles.info}>{dayjs(data.createdAt).format(\"YYYY-MM-DD HH:mm:ss\")}</div>\r\n                    <div className={styles.content} dangerouslySetInnerHTML={{ __html: data.content }} />\r\n                </ContentView>\r\n            </BaseLayout>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { NavBar } from \"antd-mobile\";\r\nimport LayoutView from \"Views/Layout/LayoutView\";\r\nimport LeftIcon from \"Components/Layout/LeftIcon\";\r\nimport ContentView from \"Views/Layout/ContentView\";\r\nimport Footer from \"./Footer\";\r\nimport styles from \"./Layout.scss\";\r\nconst BaseLayout = ({ border = true, title, children }) => {\r\n    return (\r\n        <LayoutView>\r\n            <NavBar mode=\"light\" icon={<LeftIcon />} className={border && styles.header}>\r\n                {title}\r\n            </NavBar>\r\n            {children}\r\n        </LayoutView>\r\n    );\r\n};\r\nexport default BaseLayout;\r\n","exports = module.exports = require(\"../../../node_modules/.0.28.11@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".Detail_title_3ZHPF {\\n  font-size: 0.24rem;\\n  line-height: 0.32rem; }\\n\\n.Detail_info_UYEsM {\\n  display: block;\\n  color: #999;\\n  font-size: 0.14rem;\\n  margin: 0.15rem 0 0.1rem; }\\n\\n.Detail_content_2M5vu {\\n  font-size: 0.16rem;\\n  line-height: 0.26rem; }\\n  .Detail_content_2M5vu p {\\n    padding: 0.05rem 0;\\n    text-indent: 2em; }\\n  .Detail_content_2M5vu img {\\n    display: block;\\n    max-width: 100%;\\n    margin: 0 auto; }\\n\", \"\", {\"version\":3,\"sources\":[\"E:/www/webpack4/src/pages/Article/Detail.scss\"],\"names\":[],\"mappings\":\"AAAA;EACE,mBAAmB;EACnB,qBAAqB,EAAE;;AAEzB;EACE,eAAe;EACf,YAAY;EACZ,mBAAmB;EACnB,yBAAyB,EAAE;;AAE7B;EACE,mBAAmB;EACnB,qBAAqB,EAAE;EACvB;IACE,mBAAmB;IACnB,iBAAiB,EAAE;EACrB;IACE,eAAe;IACf,gBAAgB;IAChB,eAAe,EAAE\",\"file\":\"Detail.scss\",\"sourcesContent\":[\".title {\\n  font-size: 0.24rem;\\n  line-height: 0.32rem; }\\n\\n.info {\\n  display: block;\\n  color: #999;\\n  font-size: 0.14rem;\\n  margin: 0.15rem 0 0.1rem; }\\n\\n.content {\\n  font-size: 0.16rem;\\n  line-height: 0.26rem; }\\n  .content p {\\n    padding: 0.05rem 0;\\n    text-indent: 2em; }\\n  .content img {\\n    display: block;\\n    max-width: 100%;\\n    margin: 0 auto; }\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"title\": \"Detail_title_3ZHPF\",\n\t\"info\": \"Detail_info_UYEsM\",\n\t\"content\": \"Detail_content_2M5vu\"\n};"],"sourceRoot":""}