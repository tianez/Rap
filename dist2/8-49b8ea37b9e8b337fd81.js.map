{"version":3,"sources":["webpack:///./src/pages/Friend/FriendAdd.jsx"],"names":["_react","__webpack_require__","v","C","m","w","g","b","_ContextRudex","e","__esModule","default","Item","_list2","FriendAdd","contextConsumers","state","friends","username","a","handleChange","value","_this","setState","handleAdd","_callee","res","_this$props$friends","_regenerator2","wrap","_context","prev","next","Apicloud","post","userid","localStorage","userId","sent","success","props","$arr","concat","data","dispatch","set","window","history","back","console","log","stop","_this2","_react2","createElement","_LayoutView2","_navBar2","mode","icon","_LeftIcon2","_ContentView2","renderHeader","_inputItem2","onChange","this","placeholder","_button2","type","size","inline","onClick","t","Component"],"mappings":"kXAAA,IAAAA,EAAAC,EAAA,QAAAC,EAAAC,EAAAC,GAAAC,EAAAF,EAIAF,EAAA,SAAAK,EAAAH,EACAF,EAAA,SAAAM,EAAAJ,EACAF,EAAA,SAEAO,EAAAP,EAAA,iBAAAE,EAAAM,GAAA,OAAAA,KAAAC,WAAAD,GAAAE,QAAAF,GANA,IAAMG,EAAOC,EAAAF,QAAKC,KAUGE,KAHpBN,EAAAO,kBAAiB,SAAAC,GAAA,OACdC,QAASD,EAAMC,UAEEH,CAFFG,0OAGfD,OACIE,SAAU,IAAAC,EAEdC,aAAe,SAAAC,GACXC,EAAKC,UACDL,SAAUG,OAGlBG,uCAAY,SAAAC,IAAA,IAAAP,EAAAQ,EAAAC,EAAAV,EAAA,OAAAW,EAAAjB,QAAAkB,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACFd,EAAaI,EAAKN,MAAlBE,SADEY,EAAAE,KAAA,EAEQC,SAASC,KAAK,UAAYhB,WAAUiB,OAAQC,aAAaC,SAFjE,QAEJX,EAFII,EAAAQ,MAGAC,UAASZ,EACYL,EAAKkB,MAAxBvB,QACNA,GADMA,WADOU,EACGc,KADHd,GAEKe,OAAOhB,EAAIiB,MAC7BrB,EAAKkB,MAAMI,SAASC,KAChB5B,YAEJ6B,OAAOC,QAAQC,QASnBC,QAAQC,IAAIxB,GAlBJ,wBAAAI,EAAAqB,SAAA1B,EAAA2B,sGAqBR,OACIC,EAAA1C,QAAA2C,cAAAC,EAAA5C,QAAA,KACI0C,EAAA1C,QAAA2C,cAAAE,EAAA7C,SAAQ8C,KAAK,QAAQC,KAAML,EAAA1C,QAAA2C,cAAAK,EAAAhD,QAAA,OAA3B,QAGA0C,EAAA1C,QAAA2C,cAAAM,EAAAjD,QAAA,KACI0C,EAAA1C,QAAA2C,cAAAzC,EAAAF,SAAMkD,aAAc,iBAAM,gBACtBR,EAAA1C,QAAA2C,cAAAQ,EAAAnD,SAAWoD,SAAUC,KAAK5C,aAAc6C,YAAY,SAApD,OAGAZ,EAAA1C,QAAA2C,cAAC1C,EAAD,KACIyC,EAAA1C,QAAA2C,cAAAY,EAAAvD,SAAQwD,KAAK,UAAUC,KAAK,QAAQC,UAAOC,QAASN,KAAKxC,WAAzD,cAAA+C,EA3CTtD,CA2CSb,EAAAoE,aAAArD,EAAAoD,EAAA5D,QAzCPG","file":"8-49b8ea37b9e8b337fd81.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { List, InputItem, NavBar, Button, WhiteSpace } from \"antd-mobile\";\r\nconst Item = List.Item;\r\n\r\nimport LayoutView from \"Views/Layout/LayoutView\";\r\nimport ContentView from \"Views/Layout/ContentView\";\r\nimport LeftIcon from \"Components/Layout/LeftIcon\";\r\n\r\nimport { contextConsumers } from \"Libs/ContextRudex\";\r\n@contextConsumers(state => ({\r\n    friends: state.friends\r\n}))\r\nexport default class FriendAdd extends Component {\r\n    state = {\r\n        username: \"\"\r\n    };\r\n    handleChange = value => {\r\n        this.setState({\r\n            username: value\r\n        });\r\n    };\r\n    handleAdd = async () => {\r\n        let { username } = this.state;\r\n        let res = await Apicloud.post(\"Friend\", { username, userid: localStorage.userId });\r\n        if (res.success) {\r\n            let { friends = $arr } = this.props;\r\n            friends = friends.concat(res.data);\r\n            this.props.dispatch.set({\r\n                friends\r\n            });\r\n            window.history.back();\r\n        }\r\n        // let res = await db.friends.add({\r\n        //     name: username,\r\n        //     age: 25\r\n        // });\r\n        // if (res) {\r\n        //     window.history.back();\r\n        // }\r\n        console.log(res);\r\n    };\r\n    render() {\r\n        return (\r\n            <LayoutView>\r\n                <NavBar mode=\"light\" icon={<LeftIcon />}>\r\n                    新增好友\r\n                </NavBar>\r\n                <ContentView>\r\n                    <List renderHeader={() => \"请输入要添加的好友姓名\"}>\r\n                        <InputItem onChange={this.handleChange} placeholder=\"请输入姓名\">\r\n                            用户名\r\n                        </InputItem>\r\n                        <Item>\r\n                            <Button type=\"primary\" size=\"small\" inline onClick={this.handleAdd}>\r\n                                提交\r\n                            </Button>\r\n                        </Item>\r\n                    </List>\r\n                </ContentView>\r\n            </LayoutView>\r\n        );\r\n    }\r\n}\r\n"],"sourceRoot":""}