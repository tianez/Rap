(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{FLGI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=g(n("pRfh")),r=g(n("KN1l")),i=g(n("6F6v")),o=g(n("clYf")),s=g(n("G+8T")),l=g(n("p02J")),u=g(n("cLmd")),d=g(n("dAt5")),c=g(n("Fo7F")),f=g(n("cDcd")),A=g(n("VNe4")),m=g(n("3V/B"));function g(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return function(t){function n(){var e,t,u,c,f,g=this;(0,l.default)(this,n);for(var E=arguments.length,p=Array(E),h=0;h<E;h++)p[h]=arguments[h];return t=u=(0,d.default)(this,(e=n.__proto__||(0,s.default)(n)).call.apply(e,[this].concat(p))),u.state={loadState:{loading:!1,error:!1,errorMsg:"",isOk:!1}},u.getData=(f=(0,o.default)(a.default.mark(function e(){var t,n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments[1],l=o.url,d=(0,i.default)(o,["url"]),c=o.delaytime,f=void 0===c?0:c;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.loading){e.next=2;break}return e.abrupt("return");case 2:return u.loading=!0,u.delayStart=Date.now(),u.setState({loadState:{loading:!0,error:!1,errorMsg:"",isOk:!1}}),e.next=7,(0,A.default)((0,r.default)({url:l},d));case 7:if(t=e.sent,!((n=u.delayStart+f-Date.now())>0)){e.next=12;break}return e.next=12,(0,m.default)(n);case 12:if(!t.success){e.next=19;break}if(!s){e.next=16;break}return e.next=16,s(t.data);case 16:u.setState({loadState:{loading:!1,error:!1,errorMsg:"",isOk:!0}}),e.next=20;break;case 19:u.setState({loadState:{loading:!1,error:!0,errorMsg:t.message,isOk:!1}});case 20:u.loading=!1;case 21:case"end":return e.stop()}},e,g)})),function(){return f.apply(this,arguments)}),c=t,(0,d.default)(u,c)}return(0,c.default)(n,t),(0,u.default)(n,[{key:"render",value:function(){return f.default.createElement(e,(0,r.default)({},this.props,this.state,{getData:this.getData}))}}]),n}(f.default.Component)}},GZ4P:function(e,t,n){var a=n("Xf7A");"string"==typeof a&&(a=[[e.i,a,""]]);n("DkTI")(a,{hmr:!0,transform:void 0,insertInto:void 0}),a.locals&&(e.exports=a.locals)},VNe4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(n("heMk")),r=i(n("KN1l"));function i(e){return e&&e.__esModule?e:{default:e}}var o=i(n("zr5I")).default.create({baseURL:AppConfig.doubanUrl,timeout:5e3,dataType:"json"});o.interceptors.response.use(function(e){return{success:!0,data:e.data}},function(e){var t,n={};if(e.response){var i=e.response,o="object"!=(void 0===(t=i.data)?"undefined":(0,a.default)(t))||"[object object]"!=Object.prototype.toString.call(t).toLowerCase()||t.length?{}:i.data;n=(0,r.default)({message:o.message||o.msg||i.statusText,status:i.status},o)}else e.request?n.message="网络错误，请检查你的网络状态":console.log("Error",e.message);return 401==n.status&&(localStorage.removeItem("authorization"),store.dispatch("user/init",{})),n.success=!1,console.log(n),n}),t.default=o},Xf7A:function(e,t,n){(t=e.exports=n("3G5m")(!0)).push([e.i,".List_list_3GVuX {\n  height: 100%;\n  overflow-y: auto;\n  background: #fff;\n  line-height: 0.28rem;\n  font-size: 0.16rem;\n  color: #3a3a3a; }\n\n.List_item_fIYEC {\n  display: flex;\n  margin: 0;\n  padding: 0.08rem 0.15rem;\n  background: #fff;\n  color: #000;\n  border-bottom: 1px solid #f4f4f4; }\n\n.List_img_1qW7B {\n  width: 0.8rem;\n  height: 0.6rem;\n  background-size: cover;\n  background-position: center;\n  margin: 0 0.1rem 0 0; }\n\n.List_detail_1ts-7 {\n  flex: 1; }\n\n.List_title_3RhHk {\n  font-size: 0.17rem;\n  line-height: 0.22rem;\n  height: auto; }\n\n.List_detail_1ts-7 {\n  margin: 0.05rem 0; }\n\n.List_info_20Nl0 {\n  display: block;\n  color: #999;\n  font-size: 0.13rem;\n  line-height: 0.16rem;\n  margin: 0.05rem 0 0; }\n\n.List_img_1qW7B + .List_detail_1ts-7 {\n  margin: 0; }\n  .List_img_1qW7B + .List_detail_1ts-7 .List_title_3RhHk {\n    height: 0.44rem; }\n  .List_img_1qW7B + .List_detail_1ts-7 .List_info_20Nl0 {\n    margin: 0; }\n\n.List_nodata_1zLS_ {\n  padding: 0.2rem;\n  text-align: center;\n  background: #fff;\n  color: #666;\n  font-size: 0.17rem; }\n","",{version:3,sources:["E:/www/webpack4/src/pages/Movies/Components/List.scss"],names:[],mappings:"AAAA;EACE,aAAa;EACb,iBAAiB;EACjB,iBAAiB;EACjB,qBAAqB;EACrB,mBAAmB;EACnB,eAAe,EAAE;;AAEnB;EACE,cAAc;EACd,UAAU;EACV,yBAAyB;EACzB,iBAAiB;EACjB,YAAY;EACZ,iCAAiC,EAAE;;AAErC;EACE,cAAc;EACd,eAAe;EACf,uBAAuB;EACvB,4BAA4B;EAC5B,qBAAqB,EAAE;;AAEzB;EACE,QAAQ,EAAE;;AAEZ;EACE,mBAAmB;EACnB,qBAAqB;EACrB,aAAa,EAAE;;AAEjB;EACE,kBAAkB,EAAE;;AAEtB;EACE,eAAe;EACf,YAAY;EACZ,mBAAmB;EACnB,qBAAqB;EACrB,oBAAoB,EAAE;;AAExB;EACE,UAAU,EAAE;EACZ;IACE,gBAAgB,EAAE;EACpB;IACE,UAAU,EAAE;;AAEhB;EACE,gBAAgB;EAChB,mBAAmB;EACnB,iBAAiB;EACjB,YAAY;EACZ,mBAAmB,EAAE",file:"List.scss",sourcesContent:[".list {\n  height: 100%;\n  overflow-y: auto;\n  background: #fff;\n  line-height: 0.28rem;\n  font-size: 0.16rem;\n  color: #3a3a3a; }\n\n.item {\n  display: flex;\n  margin: 0;\n  padding: 0.08rem 0.15rem;\n  background: #fff;\n  color: #000;\n  border-bottom: 1px solid #f4f4f4; }\n\n.img {\n  width: 0.8rem;\n  height: 0.6rem;\n  background-size: cover;\n  background-position: center;\n  margin: 0 0.1rem 0 0; }\n\n.detail {\n  flex: 1; }\n\n.title {\n  font-size: 0.17rem;\n  line-height: 0.22rem;\n  height: auto; }\n\n.detail {\n  margin: 0.05rem 0; }\n\n.info {\n  display: block;\n  color: #999;\n  font-size: 0.13rem;\n  line-height: 0.16rem;\n  margin: 0.05rem 0 0; }\n\n.img + .detail {\n  margin: 0; }\n  .img + .detail .title {\n    height: 0.44rem; }\n  .img + .detail .info {\n    margin: 0; }\n\n.nodata {\n  padding: 0.2rem;\n  text-align: center;\n  background: #fff;\n  color: #666;\n  font-size: 0.17rem; }\n"],sourceRoot:""}]),t.locals={list:"List_list_3GVuX",item:"List_item_fIYEC",img:"List_img_1qW7B",detail:"List_detail_1ts-7",title:"List_title_3RhHk",info:"List_info_20Nl0",nodata:"List_nodata_1zLS_"}},m1eu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=A(n("2V83")),r=A(n("KN1l")),i=A(n("G+8T")),o=A(n("p02J")),s=A(n("cLmd")),l=A(n("dAt5")),u=A(n("Fo7F"));n("cmGT");var d=n("cDcd"),c=A(d),f=A(n("vLOP"));function A(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(){var e,n,a,r;(0,o.default)(this,t);for(var s=arguments.length,u=Array(s),d=0;d<s;d++)u[d]=arguments[d];return n=a=(0,l.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(u))),a.renderContent=function(e){var t=a.props.match;return c.default.createElement(f.default,{tab:e,match:t})},r=n,(0,l.default)(a,r)}return(0,u.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){return c.default.createElement(a.default,{tabs:[{title:"正在上映",key:"movie/in_theaters"},{title:"即将上映",key:"movie/coming_soon"},{title:"Top250",key:"movie/top250"},{title:"北美票房榜",key:"movie/us_box"}],className:"ds",renderTabBar:function(e){return c.default.createElement(a.default.DefaultTabBar,(0,r.default)({},e,{page:4}))}},this.renderContent)}}]),t}(d.Component);t.default=m},vLOP:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=h(n("KN1l")),i=h(n("pRfh")),o=h(n("clYf")),s=h(n("G+8T")),l=h(n("p02J")),u=h(n("cLmd")),d=h(n("dAt5")),c=h(n("Fo7F")),f=n("cDcd"),A=h(f),m=n("8LOv"),g=h(n("ntpP")),E=h(n("sgKC")),p=h(n("kqMm"));function h(e){return e&&e.__esModule?e:{default:e}}h(n("GZ4P"));var _=(0,h(n("FLGI")).default)(a=function(e){function t(){var e,n,a,r,u=this;(0,l.default)(this,t);for(var c=arguments.length,f=Array(c),A=0;A<c;A++)f[A]=arguments[A];return n=a=(0,d.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(f))),a.state={data:[],total:0,start:0,count:20,more:!0,isInit:!0},a.getData=(0,o.default)(i.default.mark(function e(){var t,n,r,s,l,d;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=a.props,n=t.tab,t.dispatch,r=a.state,s=r.data,l=r.start,d=r.count,a.props.getData({url:n.key,params:{start:l,count:d,city:"恩施"}},function(){var e=(0,o.default)(i.default.mark(function e(t){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({total:t.total,more:!(t.subjects.length<d),start:l+d,data:s.concat(t.subjects),isInit:!1});case 1:case"end":return e.stop()}},e,u)}));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}},e,u)})),a.handleScroll=function(e){a.state.more&&(a.props.loadState.error||a.load.getBoundingClientRect().top<window.screen.height+100&&a.getData())},r=n,(0,d.default)(a,r)}return(0,c.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=this.props,n=(t.match,t.loadState),a=this.state,i=a.data,o=(a.isInit,a.more);return A.default.createElement(E.default,{onScroll:this.handleScroll},i.map(function(e){return A.default.createElement(m.Link,{to:"/movies/"+e.id,key:e.id,className:"listitem"},e.images&&A.default.createElement("div",{className:"img",style:{backgroundImage:"url("+e.images.small+")"}}),A.default.createElement("div",{className:"detail"},A.default.createElement("div",{className:"title"},e.title),A.default.createElement("div",{className:"info"},(0,g.default)(e.createdAt).format("YYYY-MM-DD HH:mm:ss"))))}),A.default.createElement("div",{ref:function(t){return e.load=t}}),A.default.createElement(p.default,(0,r.default)({},n,{loadingTitle:"数据加载中",errorAction:A.default.createElement("div",{onClick:this.getData},n.errorMsg,"，点击重试！")}),!o&&A.default.createElement("div",{className:"nodata"},"没有更多数据了")))}}]),t}(f.Component))||a;t.default=_}}]);
//# sourceMappingURL=20-912ac8dcbda93c501582.js.map