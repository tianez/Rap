{"version":3,"sources":["webpack:///./node_modules/.1.1.3@fetch-jsonp/build/fetch-jsonp.js","webpack:///./src/Libs/Hoc/GetDataDouBan.jsx","webpack:///./src/pages/Movies/Components/List.scss?f976","webpack:///./src/pages/Movies/Components/List.scss","webpack:///./src/Libs/Utils/fetchJsonp.js","webpack:///./src/pages/Movies/Components/MoviesTabs.jsx","webpack:///./src/pages/Movies/Components/List.jsx"],"names":["__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_RESULT__","module","exports","defaultOptions","clearFunction","functionName","window","e","removeScript","scriptId","script","document","getElementById","getElementsByTagName","removeChild","_url","options","arguments","length","url","timeout","jsonpCallback","timeoutId","Promise","resolve","reject","callbackFunction","jsonpCallbackFunction","Date","now","Math","ceil","random","response","ok","json","clearTimeout","indexOf","jsonpScript","createElement","setAttribute","charset","id","appendChild","setTimeout","Error","onerror","apply","__webpack_require__","m","h","p","A","__esModule","default","t","Component","_React$Component","_class2","_ref","_temp","_this","_ret","_ref4","_ref2","_this2","this","_classCallCheck3","_len","args","Array","_key","_possibleConstructorReturn3","__proto__","_getPrototypeOf2","call","concat","state","loadState","loading","error","errorMsg","isOk","getData","_asyncToGenerator3","_regenerator2","mark","_callee","reqkey","res","dbData","update_time","delayend","_ref3","callback","_ref3$delaytime","delaytime","_ref3$cachetime","cachetime","_objectWithoutProperties3","wrap","_context","prev","next","abrupt","delayStart","_qs2","stringify","params","db","req","where","equalsIgnoreCase","last","sent","time","success","fetchData","_delay2","data","setState","message","stop","_callee2","_context2","_fetchJsonp2","put","_x2","_inherits3","_createClass3","key","value","_react2","_extends3","props","content","i","hmr","transform","insertInto","locals","push","version","sources","names","mappings","file","sourcesContent","sourceRoot","listitem","img","detail","title","info","nodata","dlyW","n","Object","defineProperty","a","l","r","o","fetchJsonp","_promise2","then","catch","ex","_x","_react","f","d","MoviesTabs","contextConsumers","movieSelectKey","movies","renderContent","tab","match","_List2","handleChange","dispatch","set","_props","_tabs2","tabs","page","onChange","renderTabBar","DefaultTabBar","y","_reactRouterDom","g","v","_","_ContextRudex","C","List","movie","getIn","_this$props","_movie","start","count","more","city","merge","total","subjects","isInit","setIn","handleScroll","viewport","setScrollTop","load","getBoundingClientRect","top","screen","height","delay","scrollTop","scrollTopChangeBack","_this$props2","scrollTopChange","_this3","_LazyWarper2","onScroll","map","Link","to","className","style","backgroundImage","images","small","directors","name","genres","rating","average","ref","ele","_Loading2","loadingTitle","errorAction","onClick","defaultProps","Immutable"],"mappings":"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","file":"23-71bd343b5c93ee627490.js","sourcesContent":["(function (global, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(['exports', 'module'], factory);\n  } else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {\n    factory(exports, module);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, mod);\n    global.fetchJsonp = mod.exports;\n  }\n})(this, function (exports, module) {\n  'use strict';\n\n  var defaultOptions = {\n    timeout: 5000,\n    jsonpCallback: 'callback',\n    jsonpCallbackFunction: null\n  };\n\n  function generateCallbackFunction() {\n    return 'jsonp_' + Date.now() + '_' + Math.ceil(Math.random() * 100000);\n  }\n\n  function clearFunction(functionName) {\n    // IE8 throws an exception when you try to delete a property on window\n    // http://stackoverflow.com/a/1824228/751089\n    try {\n      delete window[functionName];\n    } catch (e) {\n      window[functionName] = undefined;\n    }\n  }\n\n  function removeScript(scriptId) {\n    var script = document.getElementById(scriptId);\n    if (script) {\n      document.getElementsByTagName('head')[0].removeChild(script);\n    }\n  }\n\n  function fetchJsonp(_url) {\n    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n    // to avoid param reassign\n    var url = _url;\n    var timeout = options.timeout || defaultOptions.timeout;\n    var jsonpCallback = options.jsonpCallback || defaultOptions.jsonpCallback;\n\n    var timeoutId = undefined;\n\n    return new Promise(function (resolve, reject) {\n      var callbackFunction = options.jsonpCallbackFunction || generateCallbackFunction();\n      var scriptId = jsonpCallback + '_' + callbackFunction;\n\n      window[callbackFunction] = function (response) {\n        resolve({\n          ok: true,\n          // keep consistent with fetch API\n          json: function json() {\n            return Promise.resolve(response);\n          }\n        });\n\n        if (timeoutId) clearTimeout(timeoutId);\n\n        removeScript(scriptId);\n\n        clearFunction(callbackFunction);\n      };\n\n      // Check if the user set their own params, and if not add a ? to start a list of params\n      url += url.indexOf('?') === -1 ? '?' : '&';\n\n      var jsonpScript = document.createElement('script');\n      jsonpScript.setAttribute('src', '' + url + jsonpCallback + '=' + callbackFunction);\n      if (options.charset) {\n        jsonpScript.setAttribute('charset', options.charset);\n      }\n      jsonpScript.id = scriptId;\n      document.getElementsByTagName('head')[0].appendChild(jsonpScript);\n\n      timeoutId = setTimeout(function () {\n        reject(new Error('JSONP request to ' + _url + ' timed out'));\n\n        clearFunction(callbackFunction);\n        removeScript(scriptId);\n        window[callbackFunction] = function () {\n          clearFunction(callbackFunction);\n        };\n      }, timeout);\n\n      // Caught if got 404/500\n      jsonpScript.onerror = function () {\n        reject(new Error('JSONP request to ' + _url + ' failed'));\n\n        clearFunction(callbackFunction);\n        removeScript(scriptId);\n        if (timeoutId) clearTimeout(timeoutId);\n      };\n    });\n  }\n\n  // export as global function\n  /*\n  let local;\n  if (typeof global !== 'undefined') {\n    local = global;\n  } else if (typeof self !== 'undefined') {\n    local = self;\n  } else {\n    try {\n      local = Function('return this')();\n    } catch (e) {\n      throw new Error('polyfill failed because global object is unavailable in this environment');\n    }\n  }\n  local.fetchJsonp = fetchJsonp;\n  */\n\n  module.exports = fetchJsonp;\n});","import React, { Component } from \"react\";\r\nimport qs from \"qs\";\r\nimport delay from \"Utils/delay\";\r\nimport fetchJsonp from \"Utils/fetchJsonp\";\r\n\r\nconst cachetime = 1000 * 60 * 60;\r\nconst GetDataDouBan = Component =>\r\n    class extends React.Component {\r\n        state = {\r\n            loadState: {\r\n                loading: false,\r\n                error: false,\r\n                errorMsg: \"\",\r\n                isOk: false\r\n            }\r\n        };\r\n        getData = async ({ url, delaytime = 0, cachetime = cachetime, ...options } = {}, callback) => {\r\n            if (this.loading) {\r\n                return;\r\n            }\r\n            this.loading = true;\r\n            this.delayStart = Date.now();\r\n            let reqkey = \"https://api.douban.com/v2/\" + url + \"?\" + qs.stringify(options.params);\r\n            let res;\r\n            let dbData = await db.req\r\n                .where(\"req\")\r\n                .equalsIgnoreCase(reqkey)\r\n                .last();\r\n            if (dbData) {\r\n                res = dbData.res;\r\n                let update_time = dbData.time;\r\n                if (update_time && (Date.now() - update_time > cachetime || !res.success)) {\r\n                    res = await this.fetchData(reqkey);\r\n                }\r\n            } else {\r\n                res = await this.fetchData(reqkey);\r\n            }\r\n            let delayend = this.delayStart + delaytime - Date.now();\r\n            if (delayend > 0) {\r\n                await delay(delayend);\r\n            }\r\n            if (res.success) {\r\n                if (callback) {\r\n                    await callback(res.data);\r\n                }\r\n                this.setState({\r\n                    loadState: {\r\n                        loading: false,\r\n                        error: false,\r\n                        errorMsg: \"\",\r\n                        isOk: true\r\n                    }\r\n                });\r\n            } else {\r\n                this.setState({\r\n                    loadState: {\r\n                        loading: false,\r\n                        error: true,\r\n                        errorMsg: res.message,\r\n                        isOk: false\r\n                    }\r\n                });\r\n            }\r\n            this.loading = false;\r\n        };\r\n        fetchData = async reqkey => {\r\n            this.setState({\r\n                loadState: {\r\n                    loading: true,\r\n                    error: false,\r\n                    errorMsg: \"\",\r\n                    isOk: false\r\n                }\r\n            });\r\n            let res = await fetchJsonp(reqkey);\r\n            db.req.put({ req: reqkey, res, time: Date.now() });\r\n            return res;\r\n        };\r\n        render() {\r\n            return <Component {...this.props} {...this.state} getData={this.getData} />;\r\n        }\r\n    };\r\n\r\nexport default GetDataDouBan;\r\n","\nvar content = require(\"!!../../../../node_modules/.0.28.11@css-loader/index.js??ref--5-1!../../../../node_modules/.2.1.3@postcss-loader/lib/index.js!../../../../node_modules/.6.0.7@sass-loader/lib/loader.js!./List.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/.0.20.3@style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/.0.28.11@css-loader/index.js??ref--5-1!../../../../node_modules/.2.1.3@postcss-loader/lib/index.js!../../../../node_modules/.6.0.7@sass-loader/lib/loader.js!./List.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/.0.28.11@css-loader/index.js??ref--5-1!../../../../node_modules/.2.1.3@postcss-loader/lib/index.js!../../../../node_modules/.6.0.7@sass-loader/lib/loader.js!./List.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/.0.28.11@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".List_listitem_q_SyT {\\n  display: flex;\\n  margin: 0;\\n  padding: 0.08rem 0.15rem;\\n  background: #fff;\\n  color: #000;\\n  border-bottom: 1px solid #f4f4f4; }\\n  .List_listitem_q_SyT .List_img_1qW7B {\\n    width: 0.8rem;\\n    height: 1.1rem;\\n    background-size: cover;\\n    background-position: center;\\n    margin: 0 0.1rem 0 0; }\\n  .List_listitem_q_SyT .List_detail_1ts-7 {\\n    flex: 1; }\\n  .List_listitem_q_SyT .List_title_3RhHk {\\n    font-size: 0.17rem;\\n    line-height: 0.22rem;\\n    height: auto; }\\n  .List_listitem_q_SyT .List_detail_1ts-7 {\\n    margin: 0.05rem 0; }\\n  .List_listitem_q_SyT .List_info_20Nl0 {\\n    display: block;\\n    color: #999;\\n    font-size: 0.13rem;\\n    line-height: 0.22rem;\\n    margin: 0.05rem 0 0; }\\n  .List_listitem_q_SyT .List_img_1qW7B + .List_detail_1ts-7 {\\n    margin: 0; }\\n    .List_listitem_q_SyT .List_img_1qW7B + .List_detail_1ts-7 .List_title_3RhHk {\\n      max-height: 0.44rem;\\n      overflow: hidden; }\\n    .List_listitem_q_SyT .List_img_1qW7B + .List_detail_1ts-7 .List_info_20Nl0 {\\n      margin: 0; }\\n\\n.List_nodata_1zLS_ {\\n  padding: 0.15rem 0;\\n  text-align: center;\\n  color: #666;\\n  font-size: 0.15rem; }\\n\", \"\", {\"version\":3,\"sources\":[\"E:/www/webpack4/src/pages/Movies/Components/List.scss\"],\"names\":[],\"mappings\":\"AAAA;EACE,cAAc;EACd,UAAU;EACV,yBAAyB;EACzB,iBAAiB;EACjB,YAAY;EACZ,iCAAiC,EAAE;EACnC;IACE,cAAc;IACd,eAAe;IACf,uBAAuB;IACvB,4BAA4B;IAC5B,qBAAqB,EAAE;EACzB;IACE,QAAQ,EAAE;EACZ;IACE,mBAAmB;IACnB,qBAAqB;IACrB,aAAa,EAAE;EACjB;IACE,kBAAkB,EAAE;EACtB;IACE,eAAe;IACf,YAAY;IACZ,mBAAmB;IACnB,qBAAqB;IACrB,oBAAoB,EAAE;EACxB;IACE,UAAU,EAAE;IACZ;MACE,oBAAoB;MACpB,iBAAiB,EAAE;IACrB;MACE,UAAU,EAAE;;AAElB;EACE,mBAAmB;EACnB,mBAAmB;EACnB,YAAY;EACZ,mBAAmB,EAAE\",\"file\":\"List.scss\",\"sourcesContent\":[\".listitem {\\n  display: flex;\\n  margin: 0;\\n  padding: 0.08rem 0.15rem;\\n  background: #fff;\\n  color: #000;\\n  border-bottom: 1px solid #f4f4f4; }\\n  .listitem .img {\\n    width: 0.8rem;\\n    height: 1.1rem;\\n    background-size: cover;\\n    background-position: center;\\n    margin: 0 0.1rem 0 0; }\\n  .listitem .detail {\\n    flex: 1; }\\n  .listitem .title {\\n    font-size: 0.17rem;\\n    line-height: 0.22rem;\\n    height: auto; }\\n  .listitem .detail {\\n    margin: 0.05rem 0; }\\n  .listitem .info {\\n    display: block;\\n    color: #999;\\n    font-size: 0.13rem;\\n    line-height: 0.22rem;\\n    margin: 0.05rem 0 0; }\\n  .listitem .img + .detail {\\n    margin: 0; }\\n    .listitem .img + .detail .title {\\n      max-height: 0.44rem;\\n      overflow: hidden; }\\n    .listitem .img + .detail .info {\\n      margin: 0; }\\n\\n.nodata {\\n  padding: 0.15rem 0;\\n  text-align: center;\\n  color: #666;\\n  font-size: 0.15rem; }\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"listitem\": \"List_listitem_q_SyT\",\n\t\"img\": \"List_img_1qW7B\",\n\t\"detail\": \"List_detail_1ts-7\",\n\t\"title\": \"List_title_3RhHk\",\n\t\"info\": \"List_info_20Nl0\",\n\t\"nodata\": \"List_nodata_1zLS_\"\n};","import fetchjsonp from \"fetch-jsonp\";\r\n\r\nconst fetchJsonp = async url =>\r\n    new Promise((resolve, reject) => {\r\n        fetchjsonp(url)\r\n            .then(function(response) {\r\n                return response.json();\r\n            })\r\n            .then(function(response) {\r\n                let data = {\r\n                    success: true,\r\n                    data: response\r\n                };\r\n                resolve(data);\r\n            })\r\n            .catch(function(ex) {\r\n                resolve({\r\n                    success: false,\r\n                    message: ex.message\r\n                });\r\n            });\r\n    });\r\n\r\nexport default fetchJsonp;\r\n","import React, { Component } from \"react\";\r\nimport { Tabs, WhiteSpace } from \"antd-mobile\";\r\nimport List from \"./List\";\r\n\r\nimport { contextConsumers } from \"Libs/ContextRudex\";\r\n@contextConsumers(state => ({\r\n    movieSelectKey: state.movieSelectKey,\r\n    movies: state.movies\r\n}))\r\nexport default class MoviesTabs extends Component {\r\n    renderContent = tab => {\r\n        let { match } = this.props;\r\n        return <List tab={tab} match={match} />;\r\n    };\r\n    handleChange = tab => {\r\n        this.props.dispatch.set({\r\n            movieSelectKey: tab.key\r\n        });\r\n    };\r\n    // handleTabClick = tab => {\r\n    //     let { movies, movieSelectKey } = this.props;\r\n    //     console.log(\"tab\", tab);\r\n    //     if (movieSelectKey == tab.key) {\r\n    //         let movie = movies[tab.key];\r\n    //         movie = movie.merge({\r\n    //             scrollTop: 0,\r\n    //             scrollTopChange: true\r\n    //         });\r\n    //         this.props.dispatch.setIn([\"movies\", tab.key], movie);\r\n    //     } else {\r\n    //         this.props.dispatch.set({\r\n    //             movieSelectKey: tab.key\r\n    //         });\r\n    //     }\r\n    // };\r\n    render() {\r\n        let { movieSelectKey, movies } = this.props;\r\n        const tabs = [\r\n            { title: \"正在上映\", key: \"movie/in_theaters\" },\r\n            // { title: \"新片榜\", key: \"movie/new_movies\" },\r\n            { title: \"即将上映\", key: \"movie/coming_soon\" },\r\n            { title: \"Top250\", key: \"movie/top250\" },\r\n            { title: \"北美票房榜\", key: \"movie/us_box\" }\r\n            // { title: \"口碑榜\", key: \"movie/weekly\" }\r\n        ];\r\n        return (\r\n            <Tabs\r\n                tabs={tabs}\r\n                page={movieSelectKey}\r\n                onChange={this.handleChange}\r\n                // onTabClick={this.handleTabClick}\r\n                renderTabBar={props => <Tabs.DefaultTabBar {...props} page={4} />}\r\n            >\r\n                {this.renderContent}\r\n            </Tabs>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport dayjs from \"dayjs\";\r\nimport LazyWarper from \"Components/Layout/LazyWarper\";\r\nimport Loading from \"Components/Layout/Loading\";\r\nimport styles from \"./List.scss\";\r\n\r\nimport { contextConsumers } from \"Libs/ContextRudex\";\r\nimport GetData from \"Hoc/GetDataDouBan\";\r\n@contextConsumers((state, props) => ({\r\n    movie: state.getIn([\"movies\", props.tab.key])\r\n}))\r\n@GetData\r\nexport default class List extends Component {\r\n    static defaultProps = {\r\n        movie: Immutable({\r\n            data: [],\r\n            total: 0,\r\n            start: 0,\r\n            count: 20,\r\n            more: true,\r\n            isInit: true,\r\n            scrollTop: 0,\r\n            scrollTopChange: false\r\n        })\r\n    };\r\n    componentDidMount() {\r\n        let { isInit } = this.props.movie;\r\n        if (isInit) {\r\n            this.getData();\r\n        }\r\n    }\r\n    getData = async () => {\r\n        let { tab, dispatch, movie } = this.props;\r\n        let { data, start, count, more } = movie;\r\n        if (!more) {\r\n            return;\r\n        }\r\n        this.props.getData(\r\n            {\r\n                url: tab.key,\r\n                params: {\r\n                    start,\r\n                    count,\r\n                    city: \"恩施\"\r\n                }\r\n            },\r\n            async res => {\r\n                movie = movie.merge({\r\n                    total: res.total,\r\n                    more: res.subjects.length < count ? false : true,\r\n                    start: start + count,\r\n                    isInit: false,\r\n                    data: movie.data.concat(res.subjects)\r\n                });\r\n                dispatch.setIn([\"movies\", tab.key], movie);\r\n                // this.setState({\r\n                //     total: res.total,\r\n                //     more: res.subjects.length < count ? false : true,\r\n                //     start: start + count,\r\n                //     data: data.concat(res.subjects),\r\n                //     isInit: false\r\n                // });\r\n            }\r\n        );\r\n    };\r\n    handleScroll = viewport => {\r\n        this.setScrollTop(viewport);\r\n        let { more } = this.props.movie;\r\n        if (!more) {\r\n            return;\r\n        }\r\n        let { error } = this.props.loadState;\r\n        if (error) {\r\n            return;\r\n        }\r\n        let { top } = this.load.getBoundingClientRect();\r\n        let height = window.screen.height;\r\n        if (top < height + 100) {\r\n            this.getData();\r\n        }\r\n    };\r\n    setScrollTop = viewport => {\r\n        let { tab } = this.props;\r\n        clearTimeout(this.delay);\r\n        this.delay = setTimeout(() => {\r\n            this.props.dispatch.setIn([\"movies\", tab.key, \"scrollTop\"], viewport.scrollTop);\r\n        }, 300);\r\n    };\r\n    scrollTopChangeBack = () => {\r\n        let { dispatch, tab, movie } = this.props;\r\n        movie = movie.merge({\r\n            scrollTopChange: false\r\n        });\r\n        dispatch.setIn([\"movies\", tab.key], movie);\r\n    };\r\n    render() {\r\n        let { match, loadState, movie } = this.props;\r\n        let { data, isInit, more, scrollTop, scrollTopChange } = movie;\r\n        return (\r\n            <LazyWarper\r\n                onScroll={this.handleScroll}\r\n                scrollTop={scrollTop}\r\n                scrollTopChange={scrollTopChange}\r\n                scrollTopChangeBack={this.scrollTopChangeBack}\r\n            >\r\n                {data.map(d => {\r\n                    return (\r\n                        <Link to={`/movies/${d.id}`} key={d.id} className={styles.listitem}>\r\n                            <div className={styles.img} style={{ backgroundImage: `url(${d.images.small})` }} />\r\n                            <div className={styles.detail}>\r\n                                <div className={styles.title}>{d.title}</div>\r\n                                <div className={styles.info}>\r\n                                    <div>\r\n                                        导演：{d.directors.map(d => {\r\n                                            return d.name + \"，\";\r\n                                        })}\r\n                                    </div>\r\n                                    <div>\r\n                                        类型：{d.genres.map(d => {\r\n                                            return d + \"，\";\r\n                                        })}\r\n                                    </div>\r\n                                    <div>评分：{d.rating.average}</div>\r\n                                </div>\r\n                            </div>\r\n                        </Link>\r\n                    );\r\n                })}\r\n                <div ref={ele => (this.load = ele)} />\r\n                <Loading\r\n                    {...loadState}\r\n                    loadingTitle={\"数据加载中\"}\r\n                    errorAction={<div onClick={this.getData}>{loadState.errorMsg}，点击重试！</div>}\r\n                >\r\n                    {!more && <div className={styles.nodata}>没有更多数据了</div>}\r\n                </Loading>\r\n            </LazyWarper>\r\n        );\r\n    }\r\n}\r\n"],"sourceRoot":""}