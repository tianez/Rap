{"version":3,"sources":["webpack:///./src/pages/Movies/Detail.scss?5ffb","webpack:///./src/pages/Movies/Detail.jsx","webpack:///./src/Libs/Hoc/GetDataDouBan.jsx","webpack:///./src/Libs/Utils/doubanApi.js","webpack:///./src/pages/Movies/Detail.scss","webpack:///./src/pages/Layout/BaseLayout.jsx"],"names":["content","__webpack_require__","module","i","hmr","transform","insertInto","locals","exports","_react","p","_","m","A","g","v","h","E","e","__esModule","default","Detail","contextConsumers","state","onLine","data","isCache","a","getData","_callee2","_this$props","match","id","_regenerator2","wrap","_context2","prev","next","_this","props","params","url","_ref3","_asyncToGenerator3","mark","_callee","_context","setState","stop","_this2","_x","apply","this","arguments","loadState","_state","console","log","_react2","createElement","_BaseLayout2","title","_ContentView2","style","padding","background","_Loading2","_extends3","reflush","errorAction","onClick","className","_Detail2","original_title","year","info","directors","map","d","name","writers","casts","genres","countries","aka","rating","average","ratings_count","wish_count","collect_count","images","src","large","alt","dangerouslySetInnerHTML","__html","summary","t","Component","_React$Component","_class2","_ref","_temp","_ret","_ref2","_classCallCheck3","_len","length","args","Array","_key","_possibleConstructorReturn3","__proto__","_getPrototypeOf2","call","concat","loading","error","errorMsg","isOk","reqkey","res","dbData","update_time","delayend","callback","_ref3$delaytime","delaytime","_ref3$cachetime","cachetime","options","_objectWithoutProperties3","abrupt","delayStart","Date","now","_qs2","stringify","db","req","where","equalsIgnoreCase","last","sent","time","success","_doubanApi2","put","_delay2","message","_inherits3","_createClass3","key","value","doubanApi","create","baseURL","AppConfig","doubanUrl","timeout","dataType","interceptors","response","use","obj","err","_typeof3","Object","prototype","toString","toLowerCase","msg","statusText","status","request","localStorage","removeItem","store","dispatch","push","version","sources","names","mappings","file","sourcesContent","sourceRoot","p/zi","n","defineProperty","s","r","l","u","_ref$border","border","children","_LayoutView2","_navBar2","mode","icon","_LeftIcon2","_Layout2","header"],"mappings":"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","file":"9-62d8d50cab2e625b69c4.js","sourcesContent":["\nvar content = require(\"!!../../../node_modules/.0.28.11@css-loader/index.js??ref--5-1!../../../node_modules/.2.1.3@postcss-loader/lib/index.js!../../../node_modules/.6.0.7@sass-loader/lib/loader.js!./Detail.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/.0.20.3@style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/.0.28.11@css-loader/index.js??ref--5-1!../../../node_modules/.2.1.3@postcss-loader/lib/index.js!../../../node_modules/.6.0.7@sass-loader/lib/loader.js!./Detail.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/.0.28.11@css-loader/index.js??ref--5-1!../../../node_modules/.2.1.3@postcss-loader/lib/index.js!../../../node_modules/.6.0.7@sass-loader/lib/loader.js!./Detail.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import React, { Component } from \"react\";\r\nimport dayjs from \"dayjs\";\r\n\r\nimport ContentView from \"Views/Layout/ContentView\";\r\nimport BaseLayout from \"../Layout/BaseLayout\";\r\n\r\nimport Loading from \"Components/Layout/Loading\";\r\nimport styles from \"./Detail.scss\";\r\n\r\nimport GetData from \"Hoc/GetDataDouBan\";\r\nimport { contextConsumers } from \"Libs/ContextRudex\";\r\n@GetData\r\n@contextConsumers(state => ({\r\n    onLine: state.onLine\r\n}))\r\nexport default class Detail extends Component {\r\n    state = {\r\n        data: null,\r\n        isCache: false\r\n    };\r\n    componentDidMount() {\r\n        this.getData();\r\n    }\r\n    getData = async () => {\r\n        let { onLine, match } = this.props;\r\n        let { id } = match.params;\r\n        // let dbData = await db.movies\r\n        //     .where(\"id\")\r\n        //     .equalsIgnoreCase(id)\r\n        //     .toArray();\r\n        // if (dbData[0]) {\r\n        //     this.setState({\r\n        //         data: dbData[0],\r\n        //         isCache: true\r\n        //     });\r\n        //     let update_time = dbData[0].update_time;\r\n        //     if (update_time && Date.now() - update_time < 1000 * 60 * 60) {\r\n        //         return;\r\n        //     }\r\n        // }\r\n        // if (onLine) {\r\n        this.props.getData({ url: `movie/subject/${id}` }, async data => {\r\n            this.setState({ data });\r\n            // db.movies.put({ ...data, update_time: Date.now() });\r\n        });\r\n        // }\r\n    };\r\n    render() {\r\n        let { loadState } = this.props;\r\n        let { data, isCache } = this.state;\r\n        console.log(data);\r\n        return (\r\n            <BaseLayout title=\"详情\">\r\n                <ContentView style={{ padding: \"15px\", background: \"#fff\" }}>\r\n                    <Loading\r\n                        {...loadState}\r\n                        reflush={isCache}\r\n                        errorAction={<div onClick={this.getData}>出错了，点击重试！</div>}\r\n                    >\r\n                        {data && (\r\n                            <div>\r\n                                <div className={styles.title}>\r\n                                    {data.title + \" \" + data.original_title}（{data.year}）\r\n                                </div>\r\n                                <div className={styles.info}>\r\n                                    {/* <div>更新时间：{dayjs(data.update_time).format(\"YYYY-MM-DD HH:mm:ss\")}</div> */}\r\n\r\n                                    <div>\r\n                                        导演：{data.directors.map(d => {\r\n                                            return d.name + \"，\";\r\n                                        })}\r\n                                    </div>\r\n                                    {data.writers && (\r\n                                        <div>\r\n                                            编剧：{data.writers.map(d => {\r\n                                                return d.name + \"，\";\r\n                                            })}\r\n                                        </div>\r\n                                    )}\r\n                                    <div>\r\n                                        主演：{data.casts.map(d => {\r\n                                            return d.name + \"，\";\r\n                                        })}\r\n                                    </div>\r\n                                    <div>\r\n                                        类型：{data.genres.map(d => {\r\n                                            return d + \"，\";\r\n                                        })}\r\n                                    </div>\r\n                                    <div>\r\n                                        制片国家/地区：{data.countries.map(d => {\r\n                                            return d + \"，\";\r\n                                        })}\r\n                                    </div>\r\n                                    <div>\r\n                                        别名：{data.aka.map(d => {\r\n                                            return d + \"，\";\r\n                                        })}\r\n                                    </div>\r\n                                    <div>评分：{data.rating.average}</div>\r\n                                    <div>评分人数：{data.ratings_count}</div>\r\n                                    <div>想看人数：{data.wish_count}</div>\r\n                                    <div>看过人数：{data.collect_count}</div>\r\n                                </div>\r\n                                <div className={styles.content}>\r\n                                    <div>{data.images && <img src={data.images.large} alt=\"\" />}</div>\r\n                                    <div dangerouslySetInnerHTML={{ __html: data.summary }} />\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </Loading>\r\n                </ContentView>\r\n            </BaseLayout>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport qs from \"qs\";\r\nimport doubanApi from \"Utils/doubanApi\";\r\nimport delay from \"Utils/delay\";\r\n\r\nconst cachetime = 1000 * 60 * 60;\r\nconst GetDataDouBan = Component =>\r\n    class extends React.Component {\r\n        state = {\r\n            loadState: {\r\n                loading: false,\r\n                error: false,\r\n                errorMsg: \"\",\r\n                isOk: false\r\n            }\r\n        };\r\n        getData = async ({ url, delaytime = 0, cachetime = cachetime, ...options } = {}, callback) => {\r\n            if (this.loading) {\r\n                return;\r\n            }\r\n            this.loading = true;\r\n            this.delayStart = Date.now();\r\n            this.setState({\r\n                loadState: {\r\n                    loading: true,\r\n                    error: false,\r\n                    errorMsg: \"\",\r\n                    isOk: false\r\n                }\r\n            });\r\n            let reqkey = url + qs.stringify(options.params);\r\n            let res;\r\n            let dbData = await db.req\r\n                .where(\"req\")\r\n                .equalsIgnoreCase(reqkey)\r\n                .last();\r\n            if (dbData) {\r\n                res = dbData.res;\r\n                let update_time = dbData.time;\r\n                if (update_time && (Date.now() - update_time > cachetime || !res.success)) {\r\n                    res = await doubanApi({ url, ...options });\r\n                    db.req.put({ req: reqkey, res, time: Date.now() });\r\n                }\r\n            } else {\r\n                res = await doubanApi({ url, ...options });\r\n                db.req.put({ req: reqkey, res, time: Date.now() });\r\n            }\r\n            let delayend = this.delayStart + delaytime - Date.now();\r\n            if (delayend > 0) {\r\n                await delay(delayend);\r\n            }\r\n            if (res.success) {\r\n                if (callback) {\r\n                    await callback(res.data);\r\n                }\r\n                this.setState({\r\n                    loadState: {\r\n                        loading: false,\r\n                        error: false,\r\n                        errorMsg: \"\",\r\n                        isOk: true\r\n                    }\r\n                });\r\n            } else {\r\n                this.setState({\r\n                    loadState: {\r\n                        loading: false,\r\n                        error: true,\r\n                        errorMsg: res.message,\r\n                        isOk: false\r\n                    }\r\n                });\r\n            }\r\n            this.loading = false;\r\n        };\r\n        render() {\r\n            return <Component {...this.props} {...this.state} getData={this.getData} />;\r\n        }\r\n    };\r\n\r\nexport default GetDataDouBan;\r\n","/**\r\n * Requests a URL, returning a promise.\r\n *\r\n * @param  {string} url       The URL we want to request\r\n * @param  {object} [options] The options we want to pass to \"fetch\"\r\n * @return {object}           An object containing either \"data\" or \"err\"\r\n */\r\nimport axios from \"axios\";\r\n/**\r\n * 请求拦截器\r\n *\r\n */\r\nlet doubanApi = axios.create({\r\n    baseURL: AppConfig.doubanUrl,\r\n    timeout: 5000,\r\n    dataType: \"json\"\r\n});\r\n\r\n/**\r\n * 响应拦截器\r\n */\r\ndoubanApi.interceptors.response.use(\r\n    response => {\r\n        // 对响应数据做点什么\r\n        let data = {\r\n            success: true,\r\n            data: response.data\r\n        };\r\n        return data;\r\n    },\r\n    error => {\r\n        // 对响应错误做点什么\r\n        let res = {};\r\n        if (error.response) {\r\n            let err = error.response;\r\n            let data = isJson(err.data) ? err.data : {};\r\n            res = {\r\n                message: data.message || data.msg || err.statusText,\r\n                status: err.status,\r\n                ...data\r\n            };\r\n        } else if (error.request) {\r\n            res.message = \"网络错误，请检查你的网络状态\";\r\n        } else {\r\n            console.log(\"Error\", error.message);\r\n        }\r\n        if (res.status == 401) {\r\n            localStorage.removeItem(\"authorization\");\r\n            store.dispatch(\"user/init\", {});\r\n        }\r\n        res.success = false;\r\n        console.log(res);\r\n        return res;\r\n    }\r\n);\r\n\r\nexport default doubanApi;\r\n\r\n//判断obj是否为json对象\r\nfunction isJson(obj) {\r\n    var isjson =\r\n        typeof obj == \"object\" && Object.prototype.toString.call(obj).toLowerCase() == \"[object object]\" && !obj.length;\r\n    return isjson;\r\n}\r\n","exports = module.exports = require(\"../../../node_modules/.0.28.11@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".Detail_title_2z_sV {\\n  font-size: 0.22rem;\\n  line-height: 0.32rem; }\\n\\n.Detail_info_3sf1M {\\n  display: block;\\n  color: #999;\\n  font-size: 0.14rem;\\n  margin: 0.1rem 0;\\n  line-height: 0.24rem; }\\n\\n.Detail_content_3sWxZ {\\n  font-size: 0.16rem;\\n  line-height: 0.26rem;\\n  text-indent: 2em; }\\n  .Detail_content_3sWxZ p,\\n  .Detail_content_3sWxZ div {\\n    padding: 0.05rem 0;\\n    text-indent: 2em; }\\n  .Detail_content_3sWxZ img {\\n    display: block;\\n    max-width: 100%;\\n    margin: 0 auto; }\\n\", \"\", {\"version\":3,\"sources\":[\"E:/www/webpack4/src/pages/Movies/Detail.scss\"],\"names\":[],\"mappings\":\"AAAA;EACE,mBAAmB;EACnB,qBAAqB,EAAE;;AAEzB;EACE,eAAe;EACf,YAAY;EACZ,mBAAmB;EACnB,iBAAiB;EACjB,qBAAqB,EAAE;;AAEzB;EACE,mBAAmB;EACnB,qBAAqB;EACrB,iBAAiB,EAAE;EACnB;;IAEE,mBAAmB;IACnB,iBAAiB,EAAE;EACrB;IACE,eAAe;IACf,gBAAgB;IAChB,eAAe,EAAE\",\"file\":\"Detail.scss\",\"sourcesContent\":[\".title {\\n  font-size: 0.22rem;\\n  line-height: 0.32rem; }\\n\\n.info {\\n  display: block;\\n  color: #999;\\n  font-size: 0.14rem;\\n  margin: 0.1rem 0;\\n  line-height: 0.24rem; }\\n\\n.content {\\n  font-size: 0.16rem;\\n  line-height: 0.26rem;\\n  text-indent: 2em; }\\n  .content p,\\n  .content div {\\n    padding: 0.05rem 0;\\n    text-indent: 2em; }\\n  .content img {\\n    display: block;\\n    max-width: 100%;\\n    margin: 0 auto; }\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"title\": \"Detail_title_2z_sV\",\n\t\"info\": \"Detail_info_3sf1M\",\n\t\"content\": \"Detail_content_3sWxZ\"\n};","import React, { Component } from \"react\";\r\nimport { NavBar } from \"antd-mobile\";\r\nimport LayoutView from \"Views/Layout/LayoutView\";\r\nimport LeftIcon from \"Components/Layout/LeftIcon\";\r\nimport ContentView from \"Views/Layout/ContentView\";\r\nimport Footer from \"./Footer\";\r\nimport styles from \"./Layout.scss\";\r\nconst BaseLayout = ({ border = true, title, children }) => {\r\n    return (\r\n        <LayoutView>\r\n            <NavBar mode=\"dark\" icon={<LeftIcon />} className={border && styles.header}>\r\n                {title}\r\n            </NavBar>\r\n            {children}\r\n        </LayoutView>\r\n    );\r\n};\r\nexport default BaseLayout;\r\n"],"sourceRoot":""}