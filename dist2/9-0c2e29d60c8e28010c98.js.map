{"version":3,"sources":["webpack:///./src/pages/Friend/FriendAdd.jsx"],"names":["_react","__webpack_require__","g","C","m","v","w","b","_ContextRudex","e","__esModule","default","Item","_list2","FriendAdd","contextConsumers","state","friends","username","n","handleChange","value","_this","setState","loading","handleAdd","_callee","res","_this$props$friends","_regenerator2","wrap","_context","prev","next","Apicloud","post","userid","localStorage","userId","userinfo","id","sex","sent","success","props","$arr","concat","data","dispatch","set","window","history","back","console","log","stop","_this2","this","_react2","createElement","_LayoutView2","_navBar2","mode","icon","_LeftIcon2","_ContentView2","renderHeader","_inputItem2","onChange","placeholder","_button2","type","onClick","t","Component"],"mappings":"kXAAA,IAAAA,EAAAC,EAAA,QAAAC,EAAAC,EAAAC,GAAAC,EAAAF,EAIAF,EAAA,SAAAK,EAAAH,EACAF,EAAA,SAAAM,EAAAJ,EACAF,EAAA,SAEAO,EAAAP,EAAA,iBAAAE,EAAAM,GAAA,OAAAA,KAAAC,WAAAD,GAAAE,QAAAF,GANA,IAAMG,EAAOC,EAAAF,QAAKC,KAUGE,KAHpBN,EAAAO,kBAAiB,SAAAC,GAAA,OACdC,QAASD,EAAMC,UAEEH,CAFFG,0OAGfD,OACIE,SAAU,IAAAC,EAEdC,aAAe,SAAAC,GACXC,EAAKC,UACDL,SAAUG,EACVG,cAASL,EAGjBM,uCAAY,SAAAC,IAAA,IAAAR,EAAAS,EAAAC,EAAAX,EAAA,OAAAY,EAAAlB,QAAAmB,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACFf,EAAaI,EAAKN,MAAlBE,SACNI,EAAKC,UACDC,aAHIO,EAAAE,KAAA,EAKQC,SAASC,KAAK,UAC1BjB,WACAkB,OAAQC,aAAaC,OACrBC,UACIC,GAAI,IACJC,IAAK,WAVL,QAKJd,EALII,EAAAW,MAaAC,UAASf,EACYN,EAAKsB,MAAxB3B,QACNA,GADMA,WADOW,EACGiB,KADHjB,GAEKkB,OAAOnB,EAAIoB,MAC7BzB,EAAKsB,MAAMI,SAASC,KAChBhC,YAEJiC,OAAOC,QAAQC,QAEnB9B,EAAKC,UACDC,aASJ6B,QAAQC,IAAI3B,GA/BJ,wBAAAI,EAAAwB,SAAA7B,EAAA8B,sGAiCH,IACChC,EAAYiC,KAAKzC,MAAjBQ,QACN,OACIkC,EAAA/C,QAAAgD,cAAAC,EAAAjD,QAAA,KACI+C,EAAA/C,QAAAgD,cAAAE,EAAAlD,SAAQmD,KAAK,QAAQC,KAAML,EAAA/C,QAAAgD,cAAAK,EAAArD,QAAA,OAA3B,QAGA+C,EAAA/C,QAAAgD,cAAAM,EAAAtD,QAAA,KACI+C,EAAA/C,QAAAgD,cAAA9C,EAAAF,SAAMuD,aAAc,iBAAM,gBACtBR,EAAA/C,QAAAgD,cAAAQ,EAAAxD,SAAWyD,SAAUX,KAAKrC,aAAciD,YAAY,SAApD,OAGAX,EAAA/C,QAAAgD,cAAC/C,EAAD,KACI8C,EAAA/C,QAAAgD,cAAAW,EAAA3D,SAAQ4D,KAAK,UAAU/C,QAASA,EAASgD,QAASf,KAAKhC,WAAvD,cAAAgD,EA1DTxD,CA0DSb,EAAAsE,aAAAvD,EAAAsD,EAAA9D,QAxDPG","file":"9-0c2e29d60c8e28010c98.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { List, InputItem, NavBar, Button, WhiteSpace } from \"antd-mobile\";\r\nconst Item = List.Item;\r\n\r\nimport LayoutView from \"Views/Layout/LayoutView\";\r\nimport ContentView from \"Views/Layout/ContentView\";\r\nimport LeftIcon from \"Components/Layout/LeftIcon\";\r\n\r\nimport { contextConsumers } from \"Libs/ContextRudex\";\r\n@contextConsumers(state => ({\r\n    friends: state.friends\r\n}))\r\nexport default class FriendAdd extends Component {\r\n    state = {\r\n        username: \"\"\r\n    };\r\n    handleChange = value => {\r\n        this.setState({\r\n            username: value,\r\n            loading: false\r\n        });\r\n    };\r\n    handleAdd = async () => {\r\n        let { username } = this.state;\r\n        this.setState({\r\n            loading: true\r\n        });\r\n        let res = await Apicloud.post(\"Friend\", {\r\n            username,\r\n            userid: localStorage.userId,\r\n            userinfo: {\r\n                id: 123,\r\n                sex: \"woman\"\r\n            }\r\n        });\r\n        if (res.success) {\r\n            let { friends = $arr } = this.props;\r\n            friends = friends.concat(res.data);\r\n            this.props.dispatch.set({\r\n                friends\r\n            });\r\n            window.history.back();\r\n        }\r\n        this.setState({\r\n            loading: false\r\n        });\r\n        // let res = await db.friends.add({\r\n        //     name: username,\r\n        //     age: 25\r\n        // });\r\n        // if (res) {\r\n        //     window.history.back();\r\n        // }\r\n        console.log(res);\r\n    };\r\n    render() {\r\n        let { loading } = this.state;\r\n        return (\r\n            <LayoutView>\r\n                <NavBar mode=\"light\" icon={<LeftIcon />}>\r\n                    新增好友\r\n                </NavBar>\r\n                <ContentView>\r\n                    <List renderHeader={() => \"请输入要添加的好友姓名\"}>\r\n                        <InputItem onChange={this.handleChange} placeholder=\"请输入姓名\">\r\n                            用户名\r\n                        </InputItem>\r\n                        <Item>\r\n                            <Button type=\"primary\" loading={loading} onClick={this.handleAdd}>\r\n                                提交\r\n                            </Button>\r\n                        </Item>\r\n                    </List>\r\n                </ContentView>\r\n            </LayoutView>\r\n        );\r\n    }\r\n}\r\n"],"sourceRoot":""}