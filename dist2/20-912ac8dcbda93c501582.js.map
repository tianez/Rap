{"version":3,"sources":["webpack:///./src/Libs/Hoc/GetDataDouBan.jsx","webpack:///./src/pages/Movies/Components/List.scss?f976","webpack:///./src/Libs/Utils/doubanApi.js","webpack:///./src/pages/Movies/Components/List.scss","webpack:///./src/pages/Movies/Components/MoviesTabs.jsx","webpack:///./src/pages/Movies/Components/List.jsx"],"names":["__webpack_require__","A","g","m","e","__esModule","default","t","Component","_React$Component","_class2","_ref","_temp","_this","_ret","_ref2","_this2","this","_classCallCheck3","_len","arguments","length","args","Array","_key","_possibleConstructorReturn3","__proto__","_getPrototypeOf2","call","apply","concat","state","loadState","loading","error","errorMsg","isOk","getData","_asyncToGenerator3","_regenerator2","mark","_callee","res","delayend","_ref3","callback","url","options","_objectWithoutProperties3","_ref3$delaytime","delaytime","wrap","_context","prev","next","abrupt","delayStart","Date","now","setState","_doubanApi2","_extends3","sent","_delay2","success","data","message","stop","_inherits3","_createClass3","key","value","_react2","createElement","props","content","module","i","hmr","transform","insertInto","locals","exports","doubanApi","create","baseURL","AppConfig","doubanUrl","timeout","dataType","interceptors","response","use","obj","err","_typeof3","Object","prototype","toString","toLowerCase","msg","statusText","status","request","console","log","localStorage","removeItem","store","dispatch","push","version","sources","names","mappings","file","sourcesContent","sourceRoot","list","item","img","detail","title","info","nodata","m1eu","n","defineProperty","a","r","o","s","l","u","_react","c","d","f","MoviesTabs","renderContent","tab","match","_List2","_tabs2","tabs","className","renderTabBar","DefaultTabBar","page","h","_reactRouterDom","E","p","List","total","start","count","more","isInit","_callee2","_this$props","_this$state","_context2","params","city","subjects","_x","handleScroll","viewport","load","getBoundingClientRect","top","window","screen","height","_this3","_props","_state","_LazyWarper2","onScroll","map","Link","to","id","images","style","backgroundImage","small","_dayjs2","createdAt","format","ref","ele","_Loading2","loadingTitle","errorAction","onClick"],"mappings":"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","file":"20-912ac8dcbda93c501582.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport doubanApi from \"Utils/doubanApi\";\r\nimport delay from \"Utils/delay\";\r\nconst GetDataDouBan = Component =>\r\n    class extends React.Component {\r\n        state = {\r\n            loadState: {\r\n                loading: false,\r\n                error: false,\r\n                errorMsg: \"\",\r\n                isOk:false\r\n            }\r\n        };\r\n        getData = async ({ url, ...options, delaytime = 0 } = {}, callback) => {\r\n            if (this.loading) {\r\n                return;\r\n            }\r\n            this.loading = true;\r\n            this.delayStart = Date.now();\r\n            this.setState({\r\n                loadState: {\r\n                    loading: true,\r\n                    error: false,\r\n                    errorMsg: \"\",\r\n                    isOk:false\r\n                }\r\n            });\r\n            let res = await doubanApi({ url, ...options });\r\n            let delayend = this.delayStart + delaytime - Date.now();\r\n            if (delayend > 0) {\r\n                await delay(delayend);\r\n            }\r\n            if (res.success) {\r\n                if (callback) {\r\n                    await callback(res.data);\r\n                }\r\n                this.setState({\r\n                    loadState: {\r\n                        loading: false,\r\n                        error: false,\r\n                        errorMsg: \"\",\r\n                        isOk:true\r\n                    }\r\n                });\r\n            } else {\r\n                this.setState({\r\n                    loadState: {\r\n                        loading: false,\r\n                        error: true,\r\n                        errorMsg: res.message,\r\n                        isOk:false\r\n                    }\r\n                });\r\n            }\r\n            this.loading = false;\r\n        };\r\n        render() {\r\n            return <Component {...this.props} {...this.state} getData={this.getData} />;\r\n        }\r\n    };\r\n\r\nexport default GetDataDouBan;\r\n","\nvar content = require(\"!!../../../../node_modules/.0.28.11@css-loader/index.js??ref--5-1!../../../../node_modules/.2.1.3@postcss-loader/lib/index.js!../../../../node_modules/.6.0.7@sass-loader/lib/loader.js!./List.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/.0.20.3@style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/.0.28.11@css-loader/index.js??ref--5-1!../../../../node_modules/.2.1.3@postcss-loader/lib/index.js!../../../../node_modules/.6.0.7@sass-loader/lib/loader.js!./List.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/.0.28.11@css-loader/index.js??ref--5-1!../../../../node_modules/.2.1.3@postcss-loader/lib/index.js!../../../../node_modules/.6.0.7@sass-loader/lib/loader.js!./List.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/**\r\n * Requests a URL, returning a promise.\r\n *\r\n * @param  {string} url       The URL we want to request\r\n * @param  {object} [options] The options we want to pass to \"fetch\"\r\n * @return {object}           An object containing either \"data\" or \"err\"\r\n */\r\nimport axios from \"axios\";\r\n/**\r\n * 请求拦截器\r\n *\r\n */\r\nlet doubanApi = axios.create({\r\n    // baseURL: \"http://192.168.60.109:3001/v2/\",\r\n    baseURL: AppConfig.doubanUrl,\r\n    timeout: 5000,\r\n    dataType: \"json\"\r\n});\r\n\r\n/**\r\n * 响应拦截器\r\n */\r\ndoubanApi.interceptors.response.use(\r\n    response => {\r\n        // 对响应数据做点什么\r\n        let data = {\r\n            success: true,\r\n            data: response.data\r\n        };\r\n        return data;\r\n    },\r\n    error => {\r\n        // 对响应错误做点什么\r\n        let res = {};\r\n        if (error.response) {\r\n            let err = error.response;\r\n            let data = isJson(err.data) ? err.data : {};\r\n            res = {\r\n                message: data.message || data.msg || err.statusText,\r\n                status: err.status,\r\n                ...data\r\n            };\r\n        } else if (error.request) {\r\n            res.message = \"网络错误，请检查你的网络状态\";\r\n        } else {\r\n            console.log(\"Error\", error.message);\r\n        }\r\n        if (res.status == 401) {\r\n            localStorage.removeItem(\"authorization\");\r\n            store.dispatch(\"user/init\", {});\r\n        }\r\n        res.success = false;\r\n        console.log(res);\r\n        return res;\r\n    }\r\n);\r\n\r\nexport default doubanApi;\r\n\r\n//判断obj是否为json对象\r\nfunction isJson(obj) {\r\n    var isjson =\r\n        typeof obj == \"object\" && Object.prototype.toString.call(obj).toLowerCase() == \"[object object]\" && !obj.length;\r\n    return isjson;\r\n}\r\n","exports = module.exports = require(\"../../../../node_modules/.0.28.11@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".List_list_3GVuX {\\n  height: 100%;\\n  overflow-y: auto;\\n  background: #fff;\\n  line-height: 0.28rem;\\n  font-size: 0.16rem;\\n  color: #3a3a3a; }\\n\\n.List_item_fIYEC {\\n  display: flex;\\n  margin: 0;\\n  padding: 0.08rem 0.15rem;\\n  background: #fff;\\n  color: #000;\\n  border-bottom: 1px solid #f4f4f4; }\\n\\n.List_img_1qW7B {\\n  width: 0.8rem;\\n  height: 0.6rem;\\n  background-size: cover;\\n  background-position: center;\\n  margin: 0 0.1rem 0 0; }\\n\\n.List_detail_1ts-7 {\\n  flex: 1; }\\n\\n.List_title_3RhHk {\\n  font-size: 0.17rem;\\n  line-height: 0.22rem;\\n  height: auto; }\\n\\n.List_detail_1ts-7 {\\n  margin: 0.05rem 0; }\\n\\n.List_info_20Nl0 {\\n  display: block;\\n  color: #999;\\n  font-size: 0.13rem;\\n  line-height: 0.16rem;\\n  margin: 0.05rem 0 0; }\\n\\n.List_img_1qW7B + .List_detail_1ts-7 {\\n  margin: 0; }\\n  .List_img_1qW7B + .List_detail_1ts-7 .List_title_3RhHk {\\n    height: 0.44rem; }\\n  .List_img_1qW7B + .List_detail_1ts-7 .List_info_20Nl0 {\\n    margin: 0; }\\n\\n.List_nodata_1zLS_ {\\n  padding: 0.2rem;\\n  text-align: center;\\n  background: #fff;\\n  color: #666;\\n  font-size: 0.17rem; }\\n\", \"\", {\"version\":3,\"sources\":[\"E:/www/webpack4/src/pages/Movies/Components/List.scss\"],\"names\":[],\"mappings\":\"AAAA;EACE,aAAa;EACb,iBAAiB;EACjB,iBAAiB;EACjB,qBAAqB;EACrB,mBAAmB;EACnB,eAAe,EAAE;;AAEnB;EACE,cAAc;EACd,UAAU;EACV,yBAAyB;EACzB,iBAAiB;EACjB,YAAY;EACZ,iCAAiC,EAAE;;AAErC;EACE,cAAc;EACd,eAAe;EACf,uBAAuB;EACvB,4BAA4B;EAC5B,qBAAqB,EAAE;;AAEzB;EACE,QAAQ,EAAE;;AAEZ;EACE,mBAAmB;EACnB,qBAAqB;EACrB,aAAa,EAAE;;AAEjB;EACE,kBAAkB,EAAE;;AAEtB;EACE,eAAe;EACf,YAAY;EACZ,mBAAmB;EACnB,qBAAqB;EACrB,oBAAoB,EAAE;;AAExB;EACE,UAAU,EAAE;EACZ;IACE,gBAAgB,EAAE;EACpB;IACE,UAAU,EAAE;;AAEhB;EACE,gBAAgB;EAChB,mBAAmB;EACnB,iBAAiB;EACjB,YAAY;EACZ,mBAAmB,EAAE\",\"file\":\"List.scss\",\"sourcesContent\":[\".list {\\n  height: 100%;\\n  overflow-y: auto;\\n  background: #fff;\\n  line-height: 0.28rem;\\n  font-size: 0.16rem;\\n  color: #3a3a3a; }\\n\\n.item {\\n  display: flex;\\n  margin: 0;\\n  padding: 0.08rem 0.15rem;\\n  background: #fff;\\n  color: #000;\\n  border-bottom: 1px solid #f4f4f4; }\\n\\n.img {\\n  width: 0.8rem;\\n  height: 0.6rem;\\n  background-size: cover;\\n  background-position: center;\\n  margin: 0 0.1rem 0 0; }\\n\\n.detail {\\n  flex: 1; }\\n\\n.title {\\n  font-size: 0.17rem;\\n  line-height: 0.22rem;\\n  height: auto; }\\n\\n.detail {\\n  margin: 0.05rem 0; }\\n\\n.info {\\n  display: block;\\n  color: #999;\\n  font-size: 0.13rem;\\n  line-height: 0.16rem;\\n  margin: 0.05rem 0 0; }\\n\\n.img + .detail {\\n  margin: 0; }\\n  .img + .detail .title {\\n    height: 0.44rem; }\\n  .img + .detail .info {\\n    margin: 0; }\\n\\n.nodata {\\n  padding: 0.2rem;\\n  text-align: center;\\n  background: #fff;\\n  color: #666;\\n  font-size: 0.17rem; }\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"list\": \"List_list_3GVuX\",\n\t\"item\": \"List_item_fIYEC\",\n\t\"img\": \"List_img_1qW7B\",\n\t\"detail\": \"List_detail_1ts-7\",\n\t\"title\": \"List_title_3RhHk\",\n\t\"info\": \"List_info_20Nl0\",\n\t\"nodata\": \"List_nodata_1zLS_\"\n};","import React, { Component } from \"react\";\r\nimport { Tabs, WhiteSpace } from \"antd-mobile\";\r\nimport List from \"./List\";\r\nexport default class MoviesTabs extends Component {\r\n    renderContent = tab => {\r\n        let { match } = this.props;\r\n        return <List tab={tab} match={match} />;\r\n    };\r\n    render() {\r\n        const tabs = [\r\n            { title: \"正在上映\", key: \"movie/in_theaters\" },\r\n            // { title: \"新片榜\", key: \"movie/new_movies\" },\r\n            { title: \"即将上映\", key: \"movie/coming_soon\" },\r\n            { title: \"Top250\", key: \"movie/top250\" },\r\n            { title: \"北美票房榜\", key: \"movie/us_box\" }\r\n            // { title: \"口碑榜\", key: \"movie/weekly\" }\r\n        ];\r\n        return (\r\n            <Tabs tabs={tabs} className=\"ds\" renderTabBar={props => <Tabs.DefaultTabBar {...props} page={4} />}>\r\n                {this.renderContent}\r\n            </Tabs>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport dayjs from \"dayjs\";\r\nimport LazyWarper from \"Components/Layout/LazyWarper\";\r\nimport Loading from \"Components/Layout/Loading\";\r\nimport styles from \"./List.scss\";\r\n\r\nimport GetData from \"Hoc/GetDataDouBan\";\r\n@GetData\r\nexport default class List extends Component {\r\n    state = {\r\n        data: [],\r\n        total: 0,\r\n        start: 0,\r\n        count: 20,\r\n        more: true,\r\n        isInit: true\r\n    };\r\n    componentDidMount() {\r\n        this.getData();\r\n    }\r\n    getData = async () => {\r\n        let { tab, dispatch } = this.props;\r\n        let { data, start, count } = this.state;\r\n        this.props.getData(\r\n            {\r\n                url: tab.key,\r\n                params: {\r\n                    start,\r\n                    count,\r\n                    city: \"恩施\"\r\n                }\r\n            },\r\n            async res => {\r\n                this.setState({\r\n                    total: res.total,\r\n                    more: res.subjects.length < count ? false : true,\r\n                    start: start + count,\r\n                    data: data.concat(res.subjects),\r\n                    isInit: false\r\n                });\r\n            }\r\n        );\r\n    };\r\n    handleScroll = viewport => {\r\n        let { more } = this.state;\r\n        if (!more) {\r\n            return;\r\n        }\r\n        let { error } = this.props.loadState;\r\n        if (error) {\r\n            return;\r\n        }\r\n        let { top } = this.load.getBoundingClientRect();\r\n        let height = window.screen.height;\r\n        if (top < height + 100) {\r\n            this.getData();\r\n        }\r\n    };\r\n    render() {\r\n        let { match, loadState } = this.props;\r\n        let { data, isInit, more } = this.state;\r\n        return (\r\n            <LazyWarper onScroll={this.handleScroll}>\r\n                {data.map(d => {\r\n                    return (\r\n                        <Link to={`/movies/${d.id}`} key={d.id} className=\"listitem\">\r\n                            {d.images && <div className=\"img\" style={{ backgroundImage: `url(${d.images.small})` }} />}\r\n                            <div className=\"detail\">\r\n                                <div className=\"title\">{d.title}</div>\r\n                                <div className=\"info\">{dayjs(d.createdAt).format(\"YYYY-MM-DD HH:mm:ss\")}</div>\r\n                            </div>\r\n                        </Link>\r\n                    );\r\n                })}\r\n                <div ref={ele => (this.load = ele)} />\r\n                <Loading\r\n                    {...loadState}\r\n                    loadingTitle={\"数据加载中\"}\r\n                    errorAction={<div onClick={this.getData}>{loadState.errorMsg}，点击重试！</div>}\r\n                >\r\n                    {!more && <div className=\"nodata\">没有更多数据了</div>}\r\n                </Loading>\r\n            </LazyWarper>\r\n        );\r\n    }\r\n}\r\n"],"sourceRoot":""}