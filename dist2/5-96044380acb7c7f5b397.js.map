{"version":3,"sources":["webpack:///./src/pages/Friend/Friend.scss","webpack:///./src/pages/Friend/Friend.scss?f5d0","webpack:///./src/pages/Friend/FriendList.jsx"],"names":["exports","module","__webpack_require__","push","i","version","sources","names","mappings","file","sourcesContent","sourceRoot","locals","title","img","avatar","ewm","ufri","e","t","n","content","hmr","transform","insertInto","_react","p","B","A","h","E","_ContextRudex","__esModule","default","Item","_list2","FriendList","contextConsumers","state","friends","getFriends","_callee","filter","res","_regenerator2","wrap","_context","prev","next","where","userid","localStorage","userId","skip","limit","Apicloud","params","sent","success","_this","props","dispatch","set","data","stop","_this2","deleteFriend","_callee2","id","_context2","delete","d","_toast2","info","this","_props","history","match","_props$friends","$arr","_react2","createElement","_ContentView2","_whiteSpace2","onClick","url","className","_Friend2","map","key","src","username"],"mappings":"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","file":"5-96044380acb7c7f5b397.js","sourcesContent":["exports = module.exports = require(\"../../../node_modules/.0.28.11@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".Friend_title_2lAdP {\\n  padding: 0.1rem 0.15rem 0.02rem;\\n  font-size: 0.14rem;\\n  color: #888;\\n  width: 100%; }\\n\\n.Friend_img_M_Itt {\\n  width: 0.36rem !important;\\n  height: 0.36rem !important;\\n  margin: 0 0.1rem 0 0; }\\n\\n.Friend_avatar_1I4Q9 {\\n  width: 0.6rem !important;\\n  height: 0.6rem !important;\\n  margin: 0.1rem 0; }\\n\\n.Friend_ewm_28JgM {\\n  color: #888;\\n  width: 0.22rem;\\n  height: 0.22rem;\\n  font-size: 0.22rem;\\n  display: inline-block; }\\n\", \"\", {\"version\":3,\"sources\":[\"E:/www/webpack4/src/pages/Friend/Friend.scss\"],\"names\":[],\"mappings\":\"AAAA;EACE,gCAAgC;EAChC,mBAAmB;EACnB,YAAY;EACZ,YAAY,EAAE;;AAEhB;EACE,0BAA0B;EAC1B,2BAA2B;EAC3B,qBAAqB,EAAE;;AAEzB;EACE,yBAAyB;EACzB,0BAA0B;EAC1B,iBAAiB,EAAE;;AAErB;EACE,YAAY;EACZ,eAAe;EACf,gBAAgB;EAChB,mBAAmB;EACnB,sBAAsB,EAAE\",\"file\":\"Friend.scss\",\"sourcesContent\":[\".title {\\n  padding: 0.1rem 0.15rem 0.02rem;\\n  font-size: 0.14rem;\\n  color: #888;\\n  width: 100%; }\\n\\n.img {\\n  width: 0.36rem !important;\\n  height: 0.36rem !important;\\n  margin: 0 0.1rem 0 0; }\\n\\n.avatar {\\n  width: 0.6rem !important;\\n  height: 0.6rem !important;\\n  margin: 0.1rem 0; }\\n\\n.ewm {\\n  color: #888;\\n  width: 0.22rem;\\n  height: 0.22rem;\\n  font-size: 0.22rem;\\n  display: inline-block; }\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"title\": \"Friend_title_2lAdP\",\n\t\"img\": \"Friend_img_M_Itt\",\n\t\"avatar\": \"Friend_avatar_1I4Q9\",\n\t\"ewm\": \"Friend_ewm_28JgM\"\n};","\nvar content = require(\"!!../../../node_modules/.0.28.11@css-loader/index.js??ref--5-1!../../../node_modules/.2.1.3@postcss-loader/lib/index.js!../../../node_modules/.6.0.7@sass-loader/lib/loader.js!./Friend.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/.0.20.3@style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/.0.28.11@css-loader/index.js??ref--5-1!../../../node_modules/.2.1.3@postcss-loader/lib/index.js!../../../node_modules/.6.0.7@sass-loader/lib/loader.js!./Friend.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/.0.28.11@css-loader/index.js??ref--5-1!../../../node_modules/.2.1.3@postcss-loader/lib/index.js!../../../node_modules/.6.0.7@sass-loader/lib/loader.js!./Friend.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import React, { Component } from \"react\";\r\nimport { List, WhiteSpace, Toast } from \"antd-mobile\";\r\nconst Item = List.Item;\r\nimport ContentView from \"Views/Layout/ContentView\";\r\n\r\nimport styles from \"./Friend.scss\";\r\n\r\nimport { contextConsumers } from \"Libs/ContextRudex\";\r\n@contextConsumers(state => ({\r\n    friends: state.friends\r\n}))\r\nexport default class FriendList extends Component {\r\n    state = {\r\n        friends: []\r\n    };\r\n    componentDidMount() {\r\n        let { friends } = this.props;\r\n        if (!friends) {\r\n            this.getFriends();\r\n        }\r\n    }\r\n    getFriends = async () => {\r\n        let filter = {\r\n            where: {\r\n                userid: localStorage.userId || \"\"\r\n            },\r\n            skip: 0,\r\n            limit: 20\r\n        };\r\n        let res = await Apicloud(\"Friend\", {\r\n            params: {\r\n                filter\r\n            }\r\n        });\r\n        if (res.success) {\r\n            this.props.dispatch.set({\r\n                friends: res.data\r\n            });\r\n        }\r\n        // let friends = await db.friends.toArray();\r\n        // this.setState({\r\n        //     friends\r\n        // });\r\n    };\r\n    deleteFriend = async id => {\r\n        let res = await Apicloud.delete(\"Friend/\" + id);\r\n        if (res.success) {\r\n            let friends = this.props.friends.filter(d => {\r\n                return d.id !== id;\r\n            });\r\n            this.props.dispatch.set({\r\n                friends\r\n            });\r\n            Toast.info(\"好友删除成功！\");\r\n        }\r\n        // let res = await db.friends.delete(id);\r\n        // this.getFriends();\r\n    };\r\n    render() {\r\n        let { history, match, friends = $arr } = this.props;\r\n        return (\r\n            <ContentView>\r\n                <WhiteSpace />\r\n                <List>\r\n                    <Item onClick={() => history.push(`${match.url}/add`)}>新增好友</Item>\r\n                </List>\r\n                <div className={styles.title}>DB</div>\r\n                <List>\r\n                    {friends.map((d, i) => {\r\n                        return (\r\n                            <Item key={d.id} onClick={() => history.push(`${match.url}/${d.id}`)}>\r\n                                <img className={styles.img} src={`./public/images/avatar/${i % 6}.jpg`} />\r\n                                <span>{d.username}</span>\r\n                            </Item>\r\n                        );\r\n                    })}\r\n                </List>\r\n            </ContentView>\r\n        );\r\n    }\r\n}\r\n"],"sourceRoot":""}