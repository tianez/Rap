(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"33iH":function(e,t,n){(t=e.exports=n("3G5m")(!0)).push([e.i,".login_nologin_2K67E {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  background: #fff; }\n","",{version:3,sources:["E:/www/webpack4/src/pages/Login/login.scss"],names:[],mappings:"AAAA;EACE,mBAAmB;EACnB,YAAY;EACZ,aAAa;EACb,iBAAiB,EAAE",file:"login.scss",sourcesContent:[".nologin {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  background: #fff; }\n"],sourceRoot:""}]),t.locals={nologin:"login_nologin_2K67E"}},"3JB/":function(e,t,n){var a=n("33iH");"string"==typeof a&&(a=[[e.i,a,""]]);n("DkTI")(a,{hmr:!0,transform:void 0,insertInto:void 0}),a.locals&&(e.exports=a.locals)},"3Y27":function(e,t,n){"use strict";n("vUYC"),n("sdte")},O3NY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=b(n("v1Px")),l=b(n("1Zw9")),o=b(n("9NYg")),i=b(n("glBr")),u=b(n("gIbl")),s=b(n("pRfh")),d=b(n("KDvK")),c=b(n("clYf")),f=b(n("G+8T")),m=b(n("p02J")),g=b(n("cLmd")),p=b(n("dAt5")),h=b(n("Fo7F"));n("3Y27"),n("DIk0"),n("rj6/"),n("bCZg"),n("rSbJ"),n("dTC+");var A=b(n("cDcd")),v=n("8LOv"),w=b(n("l7WU")),C=b(n("p/zi"));function b(e){return e&&e.__esModule?e:{default:e}}b(n("3JB/")),b(n("J7H6"));var E=(0,n("rRcN").contextConsumers)(function(e){return{authorization:e.authorization}})(a=function(e){function t(e){var n=this;(0,m.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,f.default)(t)).call(this,e));return a.handleSubmit=(0,c.default)(s.default.mark(function e(){var t,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.data,a.setState({loading:!0}),e.next=4,Apicloud.post("user/login",t);case 4:(r=e.sent).success?(localStorage.authorization=r.data.id,localStorage.userId=r.data.userId,a.getUserInfo()):(a.setState({loading:!1}),d.default.info("登录失败"),localStorage.removeItem("authorization"),localStorage.removeItem("userId"));case 6:case"end":return e.stop()}},e,n)})),a.getUserInfo=(0,c.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.authorization&&localStorage.userId){e.next=3;break}return a.props.dispatch.set({authorization:null,user:null}),e.abrupt("return");case 3:return e.next=5,Apicloud.get("user/"+localStorage.userId);case 5:t=e.sent,a.setState({loading:!1}),t.success?a.props.dispatch.set({authorization:localStorage.authorization,user:t.data}):(a.props.dispatch.set({authorization:null,user:null}),localStorage.removeItem("authorization"),localStorage.removeItem("userId"));case 8:case"end":return e.stop()}},e,n)})),a.state={data:{username:"",password:""},loading:!1},a}return(0,h.default)(t,e),(0,g.default)(t,[{key:"componentDidMount",value:function(){this.props.authorization||this.getUserInfo()}},{key:"handleChange",value:function(e,t){var n=this.state.data;n[e]=t,this.setState({data:n})}},{key:"render",value:function(){var e=this,t=this.props,n=t.authorization,a=t.location;if(n&&localStorage.authorization&&localStorage.userId)return A.default.createElement(v.Redirect,{to:a.state||"/"});var s=this.state,d=s.data,c=s.loading;return A.default.createElement(C.default,{title:"登录"},A.default.createElement(w.default,null,A.default.createElement(i.default,{renderHeader:function(){return"用户登录"}},A.default.createElement(u.default,{placeholder:"请输入用户名",value:d.username,onChange:function(t){return e.handleChange("username",t)}}),A.default.createElement(u.default,{type:"password",placeholder:"请输入密码",value:d.password,onChange:function(t){return e.handleChange("password",t)}})),A.default.createElement(o.default,null),A.default.createElement(r.default,null,A.default.createElement(l.default,{type:"primary",onClick:this.handleSubmit,loading:c},"登录"))))}}]),t}(A.default.Component))||a;t.default=E},iOxc:function(e,t,n){(e.exports=n("3G5m")(!0)).push([e.i,".am-wingblank {\n  margin-left: 0.08rem;\n  margin-right: 0.08rem;\n}\n.am-wingblank.am-wingblank-sm {\n  margin-left: 0.05rem;\n  margin-right: 0.05rem;\n}\n.am-wingblank.am-wingblank-md {\n  margin-left: 0.08rem;\n  margin-right: 0.08rem;\n}\n.am-wingblank.am-wingblank-lg {\n  margin-left: 0.15rem;\n  margin-right: 0.15rem;\n}\n","",{version:3,sources:["E:/www/webpack4/node_modules/.2.1.8@antd-mobile/lib/wing-blank/style/index.less"],names:[],mappings:"AAAA;EACE,qBAAqB;EACrB,sBAAsB;CACvB;AACD;EACE,qBAAqB;EACrB,sBAAsB;CACvB;AACD;EACE,qBAAqB;EACrB,sBAAsB;CACvB;AACD;EACE,qBAAqB;EACrB,sBAAsB;CACvB",file:"index.less",sourcesContent:[".am-wingblank {\n  margin-left: 0.08rem;\n  margin-right: 0.08rem;\n}\n.am-wingblank.am-wingblank-sm {\n  margin-left: 0.05rem;\n  margin-right: 0.05rem;\n}\n.am-wingblank.am-wingblank-md {\n  margin-left: 0.08rem;\n  margin-right: 0.08rem;\n}\n.am-wingblank.am-wingblank-lg {\n  margin-left: 0.15rem;\n  margin-right: 0.15rem;\n}\n"],sourceRoot:""}])},"p/zi":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=u(n("nbCY"));n("ZsLX");var r=u(n("cDcd")),l=u(n("yhP6")),o=u(n("APrv")),i=(u(n("l7WU")),u(n("8RPl")),u(n("kcRE")));function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.border,n=void 0===t||t,u=e.title,s=e.children;return r.default.createElement(l.default,null,r.default.createElement(a.default,{mode:"dark",icon:r.default.createElement(o.default,null),className:n&&i.default.header},u),s)}},sdte:function(e,t,n){var a=n("iOxc");"string"==typeof a&&(a=[[e.i,a,""]]);n("DkTI")(a,{hmr:!0,transform:void 0,insertInto:void 0}),a.locals&&(e.exports=a.locals)},v1Px:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(n("p02J")),r=s(n("cLmd")),l=s(n("dAt5")),o=s(n("Fo7F")),i=s(n("0L45")),u=s(n("cDcd"));function s(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){return(0,a.default)(this,t),(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=e.size,a=e.className,r=e.children,l=e.style,o=(0,i.default)(t,t+"-"+n,a);return u.default.createElement("div",{className:o,style:l},r)}}]),t}(u.default.Component);t.default=d,d.defaultProps={prefixCls:"am-wingblank",size:"lg"},e.exports=t.default}}]);
//# sourceMappingURL=19-6e1e4f89ced2259fce73.js.map