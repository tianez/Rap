(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"47JL":function(e,t,n){var a=n("kIoh");"string"==typeof a&&(a=[[e.i,a,""]]);n("DkTI")(a,{hmr:!0,transform:void 0,insertInto:void 0}),a.locals&&(e.exports=a.locals)},"6G0w":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,l=_(n("pRfh")),i=_(n("KN1l")),u=_(n("clYf")),o=_(n("G+8T")),s=_(n("p02J")),d=_(n("cLmd")),c=_(n("dAt5")),f=_(n("Fo7F")),m=n("cDcd"),p=_(m),A=(_(n("ntpP")),_(n("l7WU"))),g=_(n("p/zi")),v=_(n("kqMm")),h=_(n("47JL")),E=_(n("FLGI"));function _(e){return e&&e.__esModule?e:{default:e}}var B=(a=(0,n("rRcN").contextConsumers)(function(e){return{onLine:e.onLine}}),(0,E.default)(r=a(r=function(e){function t(){var e,n,a,r,d=this;(0,s.default)(this,t);for(var f=arguments.length,m=Array(f),p=0;p<f;p++)m[p]=arguments[p];return n=a=(0,c.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(m))),a.state={data:null,isCache:!1},a.getData=(0,u.default)(l.default.mark(function e(){var t,n,r,o,s,c;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.onLine,r=t.match,o=r.params.id,e.next=4,db.movies.where("id").equalsIgnoreCase(o).toArray();case 4:if(!(s=e.sent)[0]){e.next=10;break}if(a.setState({data:s[0],isCache:!0}),!((c=s[0].update_time)&&Date.now()-c<36e5)){e.next=10;break}return e.abrupt("return");case 10:n&&a.props.getData({url:"movie/subject/"+o},function(){var e=(0,u.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({data:t}),db.movies.put((0,i.default)({},t,{update_time:Date.now()}));case 2:case"end":return e.stop()}},e,d)}));return function(t){return e.apply(this,arguments)}}());case 11:case"end":return e.stop()}},e,d)})),r=n,(0,c.default)(a,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.props.loadState,t=this.state,n=t.data,a=t.isCache;return console.log(n),p.default.createElement(g.default,{title:"详情"},p.default.createElement(A.default,{style:{padding:"15px",background:"#fff"}},p.default.createElement(v.default,(0,i.default)({},e,{reflush:a,errorAction:p.default.createElement("div",{onClick:this.getData},"出错了，点击重试！")}),n&&p.default.createElement("div",null,p.default.createElement("div",{className:h.default.title},n.title+" "+n.original_title,"（",n.year,"）"),p.default.createElement("div",{className:h.default.info},p.default.createElement("div",null,"导演：",n.directors.map(function(e){return e.name+"，"})),n.writers&&p.default.createElement("div",null,"编剧：",n.writers.map(function(e){return e.name+"，"})),p.default.createElement("div",null,"主演：",n.casts.map(function(e){return e.name+"，"})),p.default.createElement("div",null,"类型：",n.genres.map(function(e){return e+"，"})),p.default.createElement("div",null,"制片国家/地区：",n.countries.map(function(e){return e+"，"})),p.default.createElement("div",null,"别名：",n.aka.map(function(e){return e+"，"})),p.default.createElement("div",null,"评分：",n.rating.average),p.default.createElement("div",null,"评分人数：",n.ratings_count),p.default.createElement("div",null,"想看人数：",n.wish_count),p.default.createElement("div",null,"看过人数：",n.collect_count)),p.default.createElement("div",{className:h.default.content},p.default.createElement("div",null,n.images&&p.default.createElement("img",{src:n.images.large,alt:""})),p.default.createElement("div",{dangerouslySetInnerHTML:{__html:n.summary}}))))))}}]),t}(m.Component))||r)||r);t.default=B},FLGI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=A(n("pRfh")),r=A(n("KN1l")),l=A(n("6F6v")),i=A(n("clYf")),u=A(n("G+8T")),o=A(n("p02J")),s=A(n("cLmd")),d=A(n("dAt5")),c=A(n("Fo7F")),f=A(n("cDcd")),m=A(n("VNe4")),p=A(n("3V/B"));function A(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return function(t){function n(){var e,t,s,c,f,A=this;(0,o.default)(this,n);for(var g=arguments.length,v=Array(g),h=0;h<g;h++)v[h]=arguments[h];return t=s=(0,d.default)(this,(e=n.__proto__||(0,u.default)(n)).call.apply(e,[this].concat(v))),s.state={loadState:{loading:!1,error:!1,errorMsg:"",isOk:!1}},s.getData=(f=(0,i.default)(a.default.mark(function e(){var t,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=arguments[1],o=i.url,d=(0,l.default)(i,["url"]),c=i.delaytime,f=void 0===c?0:c;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.loading){e.next=2;break}return e.abrupt("return");case 2:return s.loading=!0,s.delayStart=Date.now(),s.setState({loadState:{loading:!0,error:!1,errorMsg:"",isOk:!1}}),e.next=7,(0,m.default)((0,r.default)({url:o},d));case 7:if(t=e.sent,!((n=s.delayStart+f-Date.now())>0)){e.next=12;break}return e.next=12,(0,p.default)(n);case 12:if(!t.success){e.next=19;break}if(!u){e.next=16;break}return e.next=16,u(t.data);case 16:s.setState({loadState:{loading:!1,error:!1,errorMsg:"",isOk:!0}}),e.next=20;break;case 19:s.setState({loadState:{loading:!1,error:!0,errorMsg:t.message,isOk:!1}});case 20:s.loading=!1;case 21:case"end":return e.stop()}},e,A)})),function(){return f.apply(this,arguments)}),c=t,(0,d.default)(s,c)}return(0,c.default)(n,t),(0,s.default)(n,[{key:"render",value:function(){return f.default.createElement(e,(0,r.default)({},this.props,this.state,{getData:this.getData}))}}]),n}(f.default.Component)}},VNe4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(n("heMk")),r=l(n("KN1l"));function l(e){return e&&e.__esModule?e:{default:e}}var i=l(n("zr5I")).default.create({baseURL:AppConfig.doubanUrl,timeout:5e3,dataType:"json"});i.interceptors.response.use(function(e){return{success:!0,data:e.data}},function(e){var t,n={};if(e.response){var l=e.response,i="object"!=(void 0===(t=l.data)?"undefined":(0,a.default)(t))||"[object object]"!=Object.prototype.toString.call(t).toLowerCase()||t.length?{}:l.data;n=(0,r.default)({message:i.message||i.msg||l.statusText,status:l.status},i)}else e.request?n.message="网络错误，请检查你的网络状态":console.log("Error",e.message);return 401==n.status&&(localStorage.removeItem("authorization"),store.dispatch("user/init",{})),n.success=!1,console.log(n),n}),t.default=i},kIoh:function(e,t,n){(t=e.exports=n("3G5m")(!0)).push([e.i,".Detail_title_2z_sV {\n  font-size: 0.22rem;\n  line-height: 0.32rem; }\n\n.Detail_info_3sf1M {\n  display: block;\n  color: #999;\n  font-size: 0.14rem;\n  margin: 0.1rem 0;\n  line-height: 0.24rem; }\n\n.Detail_content_3sWxZ {\n  font-size: 0.16rem;\n  line-height: 0.26rem;\n  text-indent: 2em; }\n  .Detail_content_3sWxZ p,\n  .Detail_content_3sWxZ div {\n    padding: 0.05rem 0;\n    text-indent: 2em; }\n  .Detail_content_3sWxZ img {\n    display: block;\n    max-width: 100%;\n    margin: 0 auto; }\n","",{version:3,sources:["E:/www/webpack4/src/pages/Movies/Detail.scss"],names:[],mappings:"AAAA;EACE,mBAAmB;EACnB,qBAAqB,EAAE;;AAEzB;EACE,eAAe;EACf,YAAY;EACZ,mBAAmB;EACnB,iBAAiB;EACjB,qBAAqB,EAAE;;AAEzB;EACE,mBAAmB;EACnB,qBAAqB;EACrB,iBAAiB,EAAE;EACnB;;IAEE,mBAAmB;IACnB,iBAAiB,EAAE;EACrB;IACE,eAAe;IACf,gBAAgB;IAChB,eAAe,EAAE",file:"Detail.scss",sourcesContent:[".title {\n  font-size: 0.22rem;\n  line-height: 0.32rem; }\n\n.info {\n  display: block;\n  color: #999;\n  font-size: 0.14rem;\n  margin: 0.1rem 0;\n  line-height: 0.24rem; }\n\n.content {\n  font-size: 0.16rem;\n  line-height: 0.26rem;\n  text-indent: 2em; }\n  .content p,\n  .content div {\n    padding: 0.05rem 0;\n    text-indent: 2em; }\n  .content img {\n    display: block;\n    max-width: 100%;\n    margin: 0 auto; }\n"],sourceRoot:""}]),t.locals={title:"Detail_title_2z_sV",info:"Detail_info_3sf1M",content:"Detail_content_3sWxZ"}},"p/zi":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(n("nbCY"));n("ZsLX");var r=o(n("cDcd")),l=o(n("yhP6")),i=o(n("APrv")),u=(o(n("l7WU")),o(n("8RPl")),o(n("kcRE")));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.border,n=void 0===t||t,o=e.title,s=e.children;return r.default.createElement(l.default,null,r.default.createElement(a.default,{mode:"light",icon:r.default.createElement(i.default,null),className:n&&u.default.header},o),s)}}}]);
//# sourceMappingURL=8-d38e230fc8fb1fccdb04.js.map