{"version":3,"sources":["webpack:///./src/pages/Service/Components/ServiceComponent.jsx"],"names":["_react","__webpack_require__","p","g","f","m","h","_ContextRudex","e","__esModule","default","GridView","_styledComponents2","div","withConfig","displayName","IconView","TitleView","ServiceComponent","contextConsumers","state","serviceList","getIn","n","props","_this2","this","_classCallCheck3","_this","_possibleConstructorReturn3","__proto__","_getPrototypeOf2","call","getData","_asyncToGenerator3","_regenerator2","mark","_callee","res","_serviceList","wrap","_context","prev","next","abrupt","setState","loading","error","Apicloud","params","filter","where","name","site_id","sent","success","data","dispatch","setIn","stop","handleClick","_ref2","url","indexOf","history","push","replace","_state","_react2","createElement","_Loading2","loadingTitle","errorAction","onClick","_grid2","columnNum","renderItem","dataItem","className","icon","title"],"mappings":"uSAAA,IAAAA,EAAAC,EAAA,QAAAC,EAAAC,EAAAC,GAAAC,EAAAF,EACAF,EAAA,SAAAK,EAAAH,EA8CAF,EAAA,SAEAM,EAAAN,EAAA,iBAAAE,EAAAK,GAAA,OAAAA,KAAAC,WAAAD,GAAAE,QAAAF,GA7CA,IAAMG,EAAWC,EAAAF,QAAOG,IAAlBC,YAAAC,YAAA,8BAAWH,EAAX,8FAQAI,EAAWJ,EAAAF,QAAOG,IAAlBC,YAAAC,YAAA,8BAAWH,EAAX,gIAWAK,EAAYL,EAAAF,QAAOG,IAAnBC,YAAAC,YAAA,+BAAYH,EAAZ,sDA8BeM,KAHpBX,EAAAY,kBAAiB,SAAAC,GAAA,OACdC,YAAaD,EAAME,OAAO,OAAQ,kBAEjBJ,CAFiBK,EAAA,SAAAf,GAGlC,SAAAU,EAAYM,GAAO,IAAAC,EAAAC,QAAAC,EAAAjB,SAAAgB,KAAAR,GAAA,IAAAU,KAAAC,EAAAnB,SAAAgB,MAAAR,EAAAY,cAAAC,EAAArB,SAAAQ,IAAAc,KAAAN,KACTF,IADS,OAAAI,EAUnBK,WAVmBC,EAAAxB,SAAAyB,EAAAzB,QAAA0B,KAUT,SAAAC,IAAA,IAAAC,EAAAC,EAAA,OAAAJ,EAAAzB,QAAA8B,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,WACgBf,EAAKJ,MAArBH,YADA,CAAAoB,EAAAE,KAAA,eAAAF,EAAAG,OAAA,wBAKNhB,EAAKiB,UACDC,WACAC,WAPEN,EAAAE,KAAA,EASUK,SAAS,UACrBC,QACIC,QACIC,OACIC,KAAM,cACNC,QAAS,OAdnB,QASFf,EATEG,EAAAa,MAmBEC,SACJ3B,EAAKiB,UACDC,cAEAzB,EAAciB,EAAIkB,KAAK,GAAGA,KAAKnC,cAE/BO,EAAKJ,MAAMiC,SAASC,OAAO,OAAQ,eAAgBrC,IAGvDO,EAAKiB,UACDC,WACAC,WA9BF,wBAAAN,EAAAkB,SAAAtB,EAAAZ,MAVSG,EA4CnBgC,YAAc,SAAAC,GAAa,IAAVC,EAAUD,EAAVC,IACb,GAA+B,GAA3BA,EAAIC,QAAQ,aAA8C,GAA1BD,EAAIC,QAAQ,WAC5C,OAAOnC,EAAKJ,MAAMwC,QAAQC,KAAnB,mBAA2CH,GAEtDlC,EAAKJ,MAAMwC,QAAQE,QAAnB,IAA+BJ,IA9C/BlC,EAAKR,OACD0B,WACAC,UAJWnB,sFAQfF,KAAKO,2CA0CA,IACCZ,EAAgBK,KAAKF,MAArBH,YADD8C,EAEoBzC,KAAKN,MAAxB2B,EAFDoB,EAECpB,MAAOD,EAFRqB,EAEQrB,QACb,OACIsB,EAAA1D,QAAA2D,cAAAC,EAAA5D,SACIoC,QAASA,EACTyB,aAAa,aACbxB,MAAOA,EACPyB,YAAaJ,EAAA1D,QAAA2D,cAAA,OAAKI,QAAS/C,KAAKO,SAAnB,kBAEbmC,EAAA1D,QAAA2D,cAAAK,EAAAhE,SACI8C,KAAMnC,EACNsD,UAAW,EAEXF,QAAS/C,KAAKkC,YACdgB,WAAY,SAAAC,GAAA,OACRT,EAAA1D,QAAA2D,cAAC1D,EAAD,KACIyD,EAAA1D,QAAA2D,cAACrD,GAAS8D,UAAWD,EAASE,OAC9BX,EAAA1D,QAAA2D,cAACpD,EAAD,KAAY4D,EAASG,kBAvEX,CAuEWA,2BArE5B9D","file":"7-61eb56d53a2b3a4bc41c.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Grid, WhiteSpace } from \"antd-mobile\";\r\n\r\nconst GridView = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    flex-direction: column;\r\n    height: 100%;\r\n`;\r\n\r\nconst IconView = styled.div`\r\n    width: 0.48rem;\r\n    height: 0.48rem;\r\n    line-height: 0.48rem;\r\n    font-size: 0.4rem;\r\n    text-align: center;\r\n    margin: 0 auto;\r\n    display: block;\r\n    color: #000;\r\n`;\r\n\r\nconst TitleView = styled.div`\r\n    font-size: 0.16rem;\r\n    color: #000;\r\n    line-height: 0.24rem;\r\n`;\r\n\r\nconst data = [\r\n    {\r\n        icon: \"iconfont icon-baidu1\",\r\n        title: \"百度\",\r\n        url: \"https://www.baidu.com/\"\r\n    },\r\n    {\r\n        icon: \"iconfont icon-logo-weibo\",\r\n        title: \"微博\",\r\n        url: \"https://weibo.com/\"\r\n    },\r\n    {\r\n        icon: \"iconfont icon-tongxun\",\r\n        title: \"电话归属地查询\",\r\n        url: \"https://weibo.com/\"\r\n    }\r\n];\r\n\r\nimport Loading from \"Components/Layout/Loading\";\r\n\r\nimport { contextConsumers } from \"Libs/ContextRudex\";\r\n@contextConsumers(state => ({\r\n    serviceList: state.getIn([\"init\", \"serviceList\"])\r\n}))\r\nexport default class ServiceComponent extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loading: false,\r\n            error: false\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        this.getData();\r\n    }\r\n    getData = async () => {\r\n        let { serviceList } = this.props;\r\n        if (serviceList) {\r\n            return;\r\n        }\r\n        this.setState({\r\n            loading: true,\r\n            error: false\r\n        });\r\n        let res = await Apicloud(\"config\", {\r\n            params: {\r\n                filter: {\r\n                    where: {\r\n                        name: \"serviceList\",\r\n                        site_id: 1\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        if (res.success) {\r\n            this.setState({\r\n                loading: false\r\n            });\r\n            let serviceList = res.data[0].data.serviceList;\r\n            if (serviceList) {\r\n                this.props.dispatch.setIn([\"init\", \"serviceList\"], serviceList);\r\n            }\r\n        } else {\r\n            this.setState({\r\n                loading: false,\r\n                error: true\r\n            });\r\n        }\r\n    };\r\n    handleClick = ({ url }) => {\r\n        if (url.indexOf(\"https://\") == 0 || url.indexOf(\"http://\") == 0) {\r\n            return this.props.history.push(`/iframe?outlink=${url}`);\r\n        }\r\n        this.props.history.replace(`/${url}`);\r\n    };\r\n    render() {\r\n        let { serviceList } = this.props;\r\n        let { error, loading } = this.state;\r\n        return (\r\n            <Loading\r\n                loading={loading}\r\n                loadingTitle=\"获取服务列表中...\"\r\n                error={error}\r\n                errorAction={<div onClick={this.getData}>获取服务列表失败，点击重试</div>}\r\n            >\r\n                <Grid\r\n                    data={serviceList}\r\n                    columnNum={3}\r\n                    // hasLine={false}\r\n                    onClick={this.handleClick}\r\n                    renderItem={dataItem => (\r\n                        <GridView>\r\n                            <IconView className={dataItem.icon} />\r\n                            <TitleView>{dataItem.title}</TitleView>\r\n                        </GridView>\r\n                    )}\r\n                />\r\n            </Loading>\r\n        );\r\n    }\r\n}\r\n"],"sourceRoot":""}