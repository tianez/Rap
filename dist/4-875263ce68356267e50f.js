webpackJsonp([4],{223:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(10),A=i(r),n=a(19),s=i(n),l=a(20),o=i(l),u=a(14),d=i(u),c=a(15),f=i(c),p=a(16),m=i(p),h=a(17),g=i(h),y=a(18),v=i(y),k=a(0),I=i(k),b=a(8),x=a(32),z=a(236),L=i(z),E=a(260),w=i(E),D=function(e){function t(){var e,a,i,r,A=this;(0,f.default)(this,t);for(var n=arguments.length,l=Array(n),u=0;u<n;u++)l[u]=arguments[u];return a=i=(0,g.default)(this,(e=t.__proto__||(0,d.default)(t)).call.apply(e,[this].concat(l))),i.handleMoreData=(0,o.default)(s.default.mark(function e(){var t,a,r,n,l;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.props,a=t.curcity,r=t.list,n=a.get("key"),e.next=4,apireq("api/list/"+n);case 4:l=e.sent,l.success&&(r=r.concat((0,x.fromJS)(l.data)),i.props.dispatch("news/save",{list:r}));case 6:case"end":return e.stop()}},e,A)})),r=a,(0,g.default)(i,r)}return(0,v.default)(t,e),(0,m.default)(t,[{key:"componentWillMount",value:function(){this.handleReqData(this.props)}},{key:"componentWillReceiveProps",value:function(e){e.curcity.get("key")!==this.props.curcity.get("key")&&(this.props.dispatch("news/save",{list:[]}),this.handleReqData(e))}},{key:"handleReqData",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,o.default)(s.default.mark(function e(t){var a,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.curcity.get("key"),e.next=3,apireq("api/list/"+a);case 3:i=e.sent,i.success&&this.props.dispatch("news/save",{list:i.data});case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"render",value:function(){var e=this.props,t=e.list,a=e._viewport,i=e.placeholder;return t&&t.size>0?[t.map(function(e,t){return I.default.createElement("div",{className:w.default.item,key:t},I.default.createElement("div",{className:w.default.title},I.default.createElement("div",{className:w.default.tit},e.get("title")),I.default.createElement("div",{className:w.default.dec},e.get("createdAt"))),I.default.createElement(L.default,(0,A.default)({src:e.get("image"),className:w.default.img,alt:e.get("title")},a)))}),I.default.createElement(S,a)]:[i.map(function(e){return I.default.createElement("div",{className:w.default.item,key:e},I.default.createElement("div",{className:w.default.title},I.default.createElement("div",{className:w.default.tit}),I.default.createElement("div",{className:w.default.dec})),I.default.createElement(L.default,{className:w.default.img}))})]}}]),t}(k.Component);D.defaultProps={placeholder:[0,1,2,3,4,5]},t.default=(0,b.connect)(function(e){return{curcity:e.getIn(["init","curcity"]),list:e.getIn(["news","list"])}})(D);var R=function(e){function t(e){var a=this;(0,f.default)(this,t);var i=(0,g.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return i.handleReqMoreData=(0,o.default)(s.default.mark(function e(){var t,r,A,n,l,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=i.ele.getBoundingClientRect(),r=t.top,A=t.height,n=i.props,l=n._vph,o=n._fwb,r+A+o>=0&&r<=l+o&&i.handleReqData();case 3:case"end":return e.stop()}},e,a)})),i.handleReqData=(0,o.default)(s.default.mark(function e(){var t,r,A,n,l,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.setState({loading:!0,loaderror:!1}),t=i.state.currentpage+1,r=i.props,A=r.curcity,n=r.list,l=A.get("key"),e.next=6,apireq("api/list/"+l,{params:{currentpage:t}});case 6:o=e.sent,o.success?(n=n.concat((0,x.fromJS)(o.data)),i.props.dispatch("news/save",{list:n}),i.setState({loading:!1,currentpage:t})):i.setState({loading:!1,loaderror:!0});case 8:case"end":return e.stop()}},e,a)})),i.state={loading:!1,loaderror:!1,currentpage:e.currentpage},i}return(0,v.default)(t,e),(0,m.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.state.loading||this.state.loaderror||!this.props._fwb||this.handleReqMoreData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading;return t.loaderror?I.default.createElement("div",{className:w.default.loadmore,onTouchStart:this.handleReqData},"加载数据出错了，请点击重试"):I.default.createElement("div",{className:w.default.loadmore,ref:function(t){return e.ele=t}},a?"数据正在加载中...":"数据加载完成")}}]),t}(k.Component);R.defaultProps={_fwb:50,currentpage:1};var S=(0,b.connect)(function(e){return{curcity:e.getIn(["init","curcity"]),list:e.getIn(["news","list"])}})(R)},236:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(10),A=i(r),n=a(14),s=i(n),l=a(15),o=i(l),u=a(16),d=i(u),c=a(17),f=i(c),p=a(18),m=i(p),h=a(0),g=i(h),y=a(237),v=i(y),k=a(239),I=i(k),b=a(240),x=i(b),z=function(e){function t(e){(0,o.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.handleUpdate=function(){var e=a.ele.getBoundingClientRect(),t=e.top,i=e.height,r=a.props,A=(r._vpt,r._vph),n=r._fwb;t+i+n>=0&&t<=A+n&&a.handleLoadImg()},a.handleLoadImg=function(){if(!a.state.loaded){a.showImage=!0;var e=a.props,t=e.src,i=e.errorImg,r=new Image;r.src=t,r.onload=function(){a.setState({loader:t,loaded:!0})},r.onerror=function(){a.setState({loader:i})}}},a.state={loader:e.loader,loaded:e.loaded},a.showImage=!1,a}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){!this.showImage&&this.props._fwb&&this.props.src&&this.handleUpdate(),!this.showImage&&this.props.show&&this.props.src&&this.handleLoadImg()}},{key:"componentWillReceiveProps",value:function(e){!this.showImage&&e.show&&this.props.src&&this.handleLoadImg()}},{key:"shouldComponentUpdate",value:function(e,t){return!this.state.loaded}},{key:"componentDidUpdate",value:function(e){!this.showImage&&e._fwb&&this.handleUpdate()}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,i=t.style,r=(t.alt,this.state.loader);return g.default.createElement("div",{ref:function(t){return e.ele=t},onClick:this.handleLoadImg,className:v.default.LazyImg+" "+a,style:(0,A.default)({},i,{backgroundImage:"url("+r+")"})})}}]),t}(h.Component);z.defaultProps={_fwb:50,loader:x.default,errorImg:I.default,loaded:!1,show:!1},t.default=z},237:function(e,t,a){var i=a(238);"string"==typeof i&&(i=[[e.i,i,""]]);var r={};r.transform=void 0,a(222)(i,r),i.locals&&(e.exports=i.locals)},238:function(e,t,a){t=e.exports=a(221)(void 0),t.push([e.i,".LazyImg_LazyImg_2eZlg{background-size:cover;background-position:50%;background-repeat:no-repeat;height:100%}",""]),t.locals={LazyImg:"LazyImg_LazyImg_2eZlg"}},239:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAEsBAMAAAAfmfjxAAAAG1BMVEXd3d0AAADBwcE3Nzdubm5SUlKKioqlpaUbGxuyYLcKAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAE0klEQVR4nO3bzY/bRBjHcTevHHGXwh6TpVCOhEDpMcsi4MgCQhw3ha44NpX6cmyoVPXPJmMn8Yz9zPTJKCYe9P0c0MZTP56f47Ede8gyAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACfRm/ssTt21w/Ryn59P3bXDEKRr/ldBvhfdnLprhzFBTt2HoyBI1xCkawjSNQTpGoJ0DUG6hiBdQ5CuIcgBm7i4mLS8iaz9IOMnj8yTjDe/T9rcSqYKMsrze9WnF1eP1vli+2FpP2wZ/zV/l3/krvt8vXsoc/6dvmyMA4PcnxW92m3RCtK7KlrcIH/bz5e+VZeNcViQP7d92m2xCjIqu+IGcXLk+Vfasq0H+Sn3BRnsDiE7yGfbg2o+XwsdDZRtO0i1g+tBRvuhYAUZFwu/fmb+/vwP8/c9ZdmWg2x38Dc/3N5O3CC966Ll7Lfb28fVeivzbew/Pzf/4h9d2XaDlDv4obOxbZBXRYzH7mpjk+Om+mw6fG6tHSgbQx9kWetYlu2CjExX3tZXW9WHt4n7papsDHWQgdnpT2tNZZDL5rl1U3hdPxf3Zs4oCZSNoQ5yKe24IshA+j6yfnPwmkVViUDZGNogo8Z1wCiCbP5zNpGaalf54ku6qykbQxtk1exXVgYZi+fNnjsgSlP72AqUjWE2+FJS/ROzRbMzb5prmyBf5PnHzZbhpu6kvtDs/6fWB1/ZGN5Xb1UvzBaHYm+LINdiX6birp5ZX1OgbAxlkKm85zZBfpH7shnEr5tLN0fSJ4qyMZRBZu7txc4myK/ya9Nc7GLfGiSBsjF0QaSRa5irWX4mNIzkc4i9OFA2hgnyTjJxti6MXKMIcldoGObyvrYGd6BsDN3p13eSLIIshIY71mCwXVcHYqBsDG2Q12JTcaMkNWxG9YeeFXaVAmVjaIMsxKalb6deeo7+aXUkBsrG0AaZiE1LzxAxF4yFtPyD6mQdKBtDGcRzljRBxDkra+sSbhtW32CgbAxlEHHklkGkDvd8O3tQna0DZWMog4gjtwwiLR/7qo6rk0OgbAxlEM91aylfDs0q4nJ7c4GyMZRBFnKT8KOjMPAFyapjLlA2hjKI58fo0nOYD7zj2A1yjN+4W8ogE7lp6Tn7Dr3X7Op0FigbQxnE07T0jFdtEF0fVXRBxNuQzLnjcCiD+MrGaCdI3xtktr/9PUkQzynIBBHPoMogvrIx2gkSPLRu3ls2xgmCVGOEIIJ2gigviEkE0dyidD+I8qax+0HGvmuEexvf/SDKH1bdD6L8qZtAEN3DhwSC+B4H3XEeByUQZOW5m1w5D+gSCKJ7ZJpAkL7qIXYCQTw/NmqvFRIIonvRk0KQa82rtxSCTMVXizP3ZWgKQYbuDJp9Jef1dApBfBMGqkqJBDHX9saPxFltCkcSQfrN85Y7zyaVIJppTkkEKSaeOW+zXrkvP5MJYk5R9lSs+3ljKuCxg4izg17utxkZpDbJz+SoT848dhDZ/rCIDVJOuywnxT8o5mk789PSCZJ9WhZ6M5/Pyr8WdmtCQd47pTyZINVkcaM5yT+dINmTfbnzH2tNRw7StvFVMeTb/x9h/gMXD55NTt0HAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABO5l9H2SI9+BJzugAAAABJRU5ErkJggg=="},240:function(e,t){e.exports="data:image/png;base64,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"},260:function(e,t,a){var i=a(261);"string"==typeof i&&(i=[[e.i,i,""]]);var r={};r.transform=void 0,a(222)(i,r),i.locals&&(e.exports=i.locals)},261:function(e,t,a){t=e.exports=a(221)(void 0),t.push([e.i,".LazyList_item_1CqMV{margin:.1rem 0;background:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;padding:.1rem .2rem;border-bottom:1px solid #f1f1f1}.LazyList_item_1CqMV .LazyList_title_7Q3Fe{-webkit-box-flex:1;-ms-flex:1;flex:1}.LazyList_item_1CqMV .LazyList_tit_1ZsoC{line-height:.48rem;height:.96rem;overflow:hidden;font-size:.32rem}.LazyList_item_1CqMV .LazyList_dec_1Rz24{font-size:.26rem;line-height:.64rem;color:#8d8d8d}.LazyList_item_1CqMV .LazyList_img_sOzrz{margin-left:.1rem;width:2rem;height:1.6rem;border:none;background-size:cover}.LazyList_loadmore_J2ohw{text-align:center;line-height:.88rem;height:.88rem}",""]),t.locals={item:"LazyList_item_1CqMV",title:"LazyList_title_7Q3Fe",tit:"LazyList_tit_1ZsoC",dec:"LazyList_dec_1Rz24",img:"LazyList_img_sOzrz",loadmore:"LazyList_loadmore_J2ohw"}}});
//# sourceMappingURL=4.map