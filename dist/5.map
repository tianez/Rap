{"version":3,"sources":["webpack:///5-ac365c84c7a1119e4479.js","webpack:///./src/Libs/Extended/LazyImg/LazyImg.jsx","webpack:///./src/Libs/Extended/LazyImg/LazyImg.scss?58d1","webpack:///./src/Libs/Extended/LazyImg/LazyImg.scss"],"names":["webpackJsonp","225","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_extends2","_extends3","_getPrototypeOf","_getPrototypeOf2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_react","_react2","_LazyImg","_LazyImg2","LazyImg","_Component","props","this","_this","__proto__","call","handleUpdate","_this$ele$getBounding","ele","getBoundingClientRect","top","height","_this$props","_vpt","_vph","_fwb","handleLoadImg","state","loaded","showImage","_this$props2","src","errorImg","img","Image","onload","setState","loader","onerror","key","show","nextProps","nextState","prevProps","_this2","_props","className","style","alt","createElement","ref","onClick","backgroundImage","Component","defaultProps","253","content","i","options","transform","locals","254","push"],"mappings":"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","file":"5-ac365c84c7a1119e4479.js","sourcesContent":["webpackJsonp([5],{\n\n/***/ 225:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = __webpack_require__(9);\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _getPrototypeOf = __webpack_require__(11);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(12);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(13);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(14);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(15);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _LazyImg = __webpack_require__(253);\n\nvar _LazyImg2 = _interopRequireDefault(_LazyImg);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\r\n * 图片懒加载子组件\r\n */\n\nvar LazyImg = function (_Component) {\n    (0, _inherits3.default)(LazyImg, _Component);\n\n    function LazyImg(props) {\n        (0, _classCallCheck3.default)(this, LazyImg);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (LazyImg.__proto__ || (0, _getPrototypeOf2.default)(LazyImg)).call(this, props));\n\n        _this.handleUpdate = function () {\n            var _this$ele$getBounding = _this.ele.getBoundingClientRect(),\n                top = _this$ele$getBounding.top,\n                height = _this$ele$getBounding.height;\n\n            var _this$props = _this.props,\n                _vpt = _this$props._vpt,\n                _vph = _this$props._vph,\n                _fwb = _this$props._fwb;\n\n            if (_vpt <= top + height && top <= _vpt + _vph + _fwb) {\n                _this.handleLoadImg();\n            }\n        };\n\n        _this.handleLoadImg = function () {\n            var loaded = _this.state.loaded;\n\n            if (loaded) {\n                return;\n            }\n            _this.showImage = true;\n            var _this$props2 = _this.props,\n                src = _this$props2.src,\n                errorImg = _this$props2.errorImg;\n\n            var img = new Image();\n            img.src = src;\n            img.onload = function () {\n                _this.setState({\n                    loader: src,\n                    loaded: true\n                });\n            };\n            img.onerror = function () {\n                _this.setState({\n                    loader: errorImg\n                });\n            };\n        };\n\n        _this.state = {\n            loader: props.loader,\n            loaded: props.loaded\n        };\n        _this.showImage = false;\n        return _this;\n    }\n\n    (0, _createClass3.default)(LazyImg, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            if (!this.showImage && this.props._fwb) {\n                this.handleUpdate();\n            }\n            if (!this.showImage && this.props.show) {\n                this.handleLoadImg();\n            }\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            if (!this.showImage && nextProps.show) {\n                this.handleLoadImg();\n            }\n        }\n    }, {\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps, nextState) {\n            return !this.state.loaded;\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            if (!this.showImage && prevProps._fwb) {\n                this.handleUpdate();\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var _props = this.props,\n                className = _props.className,\n                style = _props.style,\n                alt = _props.alt;\n            var loader = this.state.loader;\n\n            return _react2.default.createElement('div', { ref: function ref(ele) {\n                    return _this2.ele = ele;\n                }, onClick: this.handleLoadImg, className: _LazyImg2.default.LazyImg + ' ' + className, style: (0, _extends3.default)({}, style, { backgroundImage: 'url(' + loader + ')' }) });\n        }\n    }]);\n    return LazyImg;\n}(_react.Component);\n\nLazyImg.defaultProps = {\n    _fwb: 50, //距离底部多少距离开始加载图片\n    loader: '../../../public/images/default.png', //未加载图片时显示的默认图片\n    errorImg: '../../../public/images/error.png',\n    loaded: false,\n    show: false\n};\nexports.default = LazyImg;\n\n/***/ }),\n\n/***/ 253:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(254);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = __webpack_require__(224)(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/.0.28.7@css-loader/index.js??ref--1-2!../../../../node_modules/.2.0.8@postcss-loader/lib/index.js!../../../../node_modules/.6.0.6@sass-loader/lib/loader.js!./LazyImg.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/.0.28.7@css-loader/index.js??ref--1-2!../../../../node_modules/.2.0.8@postcss-loader/lib/index.js!../../../../node_modules/.6.0.6@sass-loader/lib/loader.js!./LazyImg.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n\n/***/ 254:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(223)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \".LazyImg_LazyImg_2eZlg{background-size:cover;background-position:50%;background-repeat:no-repeat;height:100%}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LazyImg\": \"LazyImg_LazyImg_2eZlg\"\n};\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 5-ac365c84c7a1119e4479.js","/**\r\n * 图片懒加载子组件\r\n */\r\n\r\nimport React, { Component } from 'react'\r\n\r\nimport styles from './LazyImg.scss';\r\n\r\nclass LazyImg extends Component {\r\n    static defaultProps = {\r\n        _fwb: 50, //距离底部多少距离开始加载图片\r\n        loader: '../../../public/images/default.png', //未加载图片时显示的默认图片\r\n        errorImg: '../../../public/images/error.png',\r\n        loaded: false,\r\n        show: false,\r\n    }\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            loader: props.loader,\r\n            loaded: props.loaded,\r\n        }\r\n        this.showImage = false\r\n    }\r\n    componentDidMount() {\r\n        if (!this.showImage && this.props._fwb) {\r\n            this.handleUpdate();\r\n        }\r\n        if (!this.showImage && this.props.show) {\r\n            this.handleLoadImg()\r\n        }\r\n    }\r\n    componentWillReceiveProps(nextProps) {\r\n        if (!this.showImage && nextProps.show) {\r\n            this.handleLoadImg()\r\n        }\r\n    }\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        return !this.state.loaded\r\n    }\r\n    componentDidUpdate(prevProps) {\r\n        if (!this.showImage && prevProps._fwb) {\r\n            this.handleUpdate();\r\n        }\r\n    }\r\n    handleUpdate = () => {\r\n        let { top, height } = this.ele.getBoundingClientRect();\r\n        let { _vpt, _vph, _fwb } = this.props\r\n        if (_vpt <= (top + height) && top <= (_vpt + _vph + _fwb)) {\r\n            this.handleLoadImg()\r\n        }\r\n    }\r\n    handleLoadImg = () => {\r\n        let { loaded } = this.state\r\n        if (loaded) {\r\n            return\r\n        }\r\n        this.showImage = true\r\n        let { src, errorImg } = this.props\r\n        let img = new Image();\r\n        img.src = src;\r\n        img.onload = () => {\r\n            this.setState({\r\n                loader: src,\r\n                loaded: true,\r\n            })\r\n        };\r\n        img.onerror = () => {\r\n            this.setState({\r\n                loader: errorImg,\r\n            })\r\n        };\r\n    }\r\n    render() {\r\n        let { className, style, alt } = this.props\r\n        let { loader } = this.state\r\n        return (\r\n            <div ref={ele => this.ele = ele} onClick={this.handleLoadImg} className={styles.LazyImg + ' ' + className} style={{ ...style, backgroundImage: 'url(' + loader + ')' }}></div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default LazyImg\n\n\n// WEBPACK FOOTER //\n// ./src/Libs/Extended/LazyImg/LazyImg.jsx","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/.0.28.7@css-loader/index.js??ref--1-2!../../../../node_modules/.2.0.8@postcss-loader/lib/index.js!../../../../node_modules/.6.0.6@sass-loader/lib/loader.js!./LazyImg.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/.0.18.2@style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/.0.28.7@css-loader/index.js??ref--1-2!../../../../node_modules/.2.0.8@postcss-loader/lib/index.js!../../../../node_modules/.6.0.6@sass-loader/lib/loader.js!./LazyImg.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/.0.28.7@css-loader/index.js??ref--1-2!../../../../node_modules/.2.0.8@postcss-loader/lib/index.js!../../../../node_modules/.6.0.6@sass-loader/lib/loader.js!./LazyImg.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Libs/Extended/LazyImg/LazyImg.scss\n// module id = 253\n// module chunks = 5","exports = module.exports = require(\"../../../../node_modules/.0.28.7@css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".LazyImg_LazyImg_2eZlg{background-size:cover;background-position:50%;background-repeat:no-repeat;height:100%}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LazyImg\": \"LazyImg_LazyImg_2eZlg\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.0.28.7@css-loader?{\"modules\":true,\"localIdentName\":\"[name]_[local]_[hash:base64:5]\"}!./node_modules/.2.0.8@postcss-loader/lib!./node_modules/.6.0.6@sass-loader/lib/loader.js!./src/Libs/Extended/LazyImg/LazyImg.scss\n// module id = 254\n// module chunks = 5"],"sourceRoot":""}