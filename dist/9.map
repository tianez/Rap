{"version":3,"sources":["webpack:///9-f3da2899b0742552d314.js","webpack:///./src/pages/Logout/Logout.jsx"],"names":["webpackJsonp","230","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_regenerator","_regenerator2","_asyncToGenerator2","_asyncToGenerator3","_getPrototypeOf","_getPrototypeOf2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_react","_react2","_reactRedux","_reactRouterDom","_action","_action2","Logout","_React$Component","props","this","__proto__","call","key","componentWillMount","_ref","apply","arguments","mark","_callee","user","res","wrap","_context","prev","next","size","apicloud","method","sent","success","localStorage","removeItem","dispatch","stop","_props","location","from","pathname","createElement","Redirect","to","Component","connect","state","get"],"mappings":"AAAAA,cAAc,IAERC,IACA,SAAUC,EAAQC,EAASC,GAEjC,YA+CA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GA5CvFG,OAAOC,eAAeP,EAAS,cAC3BQ,UAGJ,IAAIC,GAAeR,EAAoB,IAEnCS,EAAgBR,EAAuBO,GAEvCE,EAAqBV,EAAoB,IAEzCW,EAAqBV,EAAuBS,GAE5CE,EAAkBZ,EAAoB,IAEtCa,EAAmBZ,EAAuBW,GAE1CE,EAAmBd,EAAoB,IAEvCe,EAAmBd,EAAuBa,GAE1CE,EAAgBhB,EAAoB,IAEpCiB,EAAgBhB,EAAuBe,GAEvCE,EAA8BlB,EAAoB,IAElDmB,EAA8BlB,EAAuBiB,GAErDE,EAAapB,EAAoB,IAEjCqB,EAAapB,EAAuBmB,GCtCxCE,EAAAtB,EAAA,GD0CIuB,EAAUtB,EAAuBqB,GCzCrCE,EAAAxB,EAAA,GACAyB,EAAAzB,EAAA,IAEA0B,EAAA1B,EAAA,ID8CI2B,EAAW1B,EAAuByB,GC5ChCE,EDgDO,SAAUC,GC/CnB,QAAAD,GAAYE,GAAO,SAAAf,EAAAX,SAAA2B,KAAAH,MAAAT,EAAAf,SAAA2B,MAAAH,EAAAI,cAAAnB,EAAAT,SAAAwB,IAAAK,KAAAF,KACTD,ID8GV,SA/DIT,EAAWjB,SAASwB,EAAQC,MAO5BZ,EAAcb,SAASwB,IACvBM,IAAK,qBACL3B,MAAO,WAqCH,QAAS4B,KACL,MAAOC,GAAKC,MAAMN,KAAMO,WArC5B,GAAIF,MAAWzB,EAAmBP,SAAuBK,EAAcL,QAAQmC,KAAK,QAASC,KACzF,GAAIC,GAAMC,CACV,OAAOjC,GAAcL,QAAQuC,KAAK,SAAkBC,GAChD,OACI,OAAQA,EAASC,KAAOD,EAASE,MAC7B,IAAK,GAGD,MC9DlBL,EAASV,KAAKD,MAAdW,OACMA,EAAKM,KAAO,GD6D8B,CAC1BH,EAASE,KAAO,CAChB,OAKJ,SCnEpBnB,EAAAvB,SAAM,YDkEcwC,EAASE,KAAO,ECjEpBE,SAAS,eACrBC,OAAQ,QDqEI,KAAK,GCtEjBP,EDuEsBE,EAASM,KCpE/BR,EAAIS,UACJC,aAAaC,WAAW,iBACxBtB,KAAKD,MAAMwB,SAAS,mBACpB3B,EAAAvB,SAAM,UDyEM,KAAK,GACL,IAAK,MACD,MAAOwC,GAASW,SAG7Bf,EAAST,QAOhB,OAAOI,QAGXD,IAAK,SACL3B,MAAO,WCrFF,GAAAiD,GACoBzB,KAAKD,MAAxB2B,EADDD,EACCC,SAAUhB,EADXe,EACWf,KACZiB,EAAOD,EAASC,OAAUC,SAAU,IACxC,OACIlB,IAAQA,EAAKM,KAAO,EAChB,KACAxB,EAAAnB,QAAAwD,cAAAnC,EAAAoC,UAAUC,GAAIJ,QDwFnB9B,GChHUL,EAAAnB,QAAM2D,UDmH3BhE,GAAQK,WCtFOoB,EAAAwC,SAAQ,SAACC,GAAD,OAAcxB,KAAMwB,EAAMC,IAAI,WAAYtC","file":"9-f3da2899b0742552d314.js","sourcesContent":["webpackJsonp([9],{\n\n/***/ 230:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _regenerator = __webpack_require__(19);\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = __webpack_require__(20);\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _getPrototypeOf = __webpack_require__(14);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(15);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(16);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(17);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(18);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactRedux = __webpack_require__(8);\n\nvar _reactRouterDom = __webpack_require__(11);\n\nvar _action = __webpack_require__(26);\n\nvar _action2 = _interopRequireDefault(_action);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Logout = function (_React$Component) {\n    (0, _inherits3.default)(Logout, _React$Component);\n\n    function Logout(props) {\n        (0, _classCallCheck3.default)(this, Logout);\n        return (0, _possibleConstructorReturn3.default)(this, (Logout.__proto__ || (0, _getPrototypeOf2.default)(Logout)).call(this, props));\n    }\n\n    (0, _createClass3.default)(Logout, [{\n        key: 'componentWillMount',\n        value: function () {\n            var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee() {\n                var user, res;\n                return _regenerator2.default.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                user = this.props.user;\n\n                                if (!(user && user.size > 0)) {\n                                    _context.next = 7;\n                                    break;\n                                }\n\n                                (0, _action2.default)('退出登录中...');\n                                _context.next = 5;\n                                return apicloud('user/logout', {\n                                    method: 'post'\n                                });\n\n                            case 5:\n                                res = _context.sent;\n\n                                if (res.success) {\n                                    localStorage.removeItem('authorization');\n                                    this.props.dispatch('user/init', {});\n                                    (0, _action2.default)('退出登录成功');\n                                }\n\n                            case 7:\n                            case 'end':\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this);\n            }));\n\n            function componentWillMount() {\n                return _ref.apply(this, arguments);\n            }\n\n            return componentWillMount;\n        }()\n    }, {\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                location = _props.location,\n                user = _props.user;\n\n            var from = location.from || { pathname: '/' };\n            return user && user.size > 0 ? null : _react2.default.createElement(_reactRouterDom.Redirect, { to: from });\n        }\n    }]);\n    return Logout;\n}(_react2.default.Component);\n\nexports.default = (0, _reactRedux.connect)(function (state) {\n    return { user: state.get('user') };\n})(Logout);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 9-f3da2899b0742552d314.js","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Redirect } from 'react-router-dom'\r\n\r\nimport toast from 'Components/toast/action';\r\n\r\nclass Logout extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n    }\r\n    async componentWillMount() {\r\n        let { user } = this.props\r\n        if (user && user.size > 0) {\r\n            toast('退出登录中...')\r\n            let res = await apicloud('user/logout', {\r\n                method: 'post'\r\n            })\r\n            if (res.success) {\r\n                localStorage.removeItem('authorization')\r\n                this.props.dispatch('user/init', {})\r\n                toast('退出登录成功')\r\n            }\r\n        }\r\n    }\r\n    render() {\r\n        let { location, user } = this.props\r\n        let from = location.from || { pathname: '/' }\r\n        return (\r\n            user && user.size > 0 ?\r\n                null :\r\n                <Redirect to={from} />\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect((state) => ({ user: state.get('user') }))(Logout)\n\n\n// WEBPACK FOOTER //\n// ./src/pages/Logout/Logout.jsx"],"sourceRoot":""}