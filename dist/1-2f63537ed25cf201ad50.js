webpackJsonp([1],{228:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(19),u=l(n),c=a(10),i=l(c),r=a(20),s=l(r),d=a(14),o=l(d),f=a(15),m=l(f),h=a(16),v=l(h),p=a(17),_=l(p),w=a(18),E=l(w),N=a(0),g=l(N),b=a(8),x=a(11),k=a(71),y=l(k),C=a(26),M=l(C),R=a(243),S=l(R),O=[{title:"用户名",name:"username",type:"text",placeholder:"请输入你的用户名"},{title:"密码",name:"password",type:"text",extype:"password",placeholder:"请输入你的密码"},{title:"邮箱地址",name:"email",type:"text",extype:"email",placeholder:"请输入你的邮箱地址"}],P=function(e){function t(e){var a=this;(0,m.default)(this,t);var l=(0,_.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return l.hanleChange=function(e){l.setState({formdata:e})},l.hanlePostRegister=function(){var e=(0,s.default)(u.default.mark(function e(t){var n,c;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.setState({show:!0,message:"注册中..."}),e.next=3,request("https://d.apicloud.com/mcm/api/user",{method:"post",data:t});case 3:if(n=e.sent,l.setState({show:!1,message:""}),!n.success){e.next=14;break}return l.setState({show:!0,message:"注册成功，正在自动登录中..."}),e.next=9,request("https://d.apicloud.com/mcm/api/user/login",{method:"post",data:t});case 9:c=e.sent,l.setState({show:!1,message:""}),c.success&&(localStorage.authorization=c.data.id,localStorage.userId=c.data.userId,l.props.dispatch("user/save",(0,i.default)({},c.data)),(0,M.default)("登录成功")),e.next=15;break;case 14:(0,M.default)(n.message);case 15:case"end":return e.stop()}},e,a)}));return function(t){return e.apply(this,arguments)}}(),l.state={formdata:{username:"tianez"},show:!1,message:""},l}return(0,E.default)(t,e),(0,v.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.location,l=t.user,n=a.from||{pathname:"/ucenter"},u=this.state,c=u.formdata,i=u.show,r=u.message;return l&&l.size>0?g.default.createElement(x.Redirect,{to:n}):g.default.createElement("div",{className:"warper"},g.default.createElement("div",{className:"header"},g.default.createElement("div",{className:"h1"},"用户注册")),g.default.createElement("div",{className:"content"},g.default.createElement(S.default,{formdata:c,formlist:O,onChange:this.hanleChange},g.default.createElement("div",{className:"weui-btn-area"},g.default.createElement("input",{type:"button",onClick:function(){return e.hanlePostRegister(e.state.formdata)},className:"weui-btn weui-btn_primary",value:"确定"})),g.default.createElement("div",{className:"weui-btn-area"},g.default.createElement(x.Link,{to:"/login",className:"weui-btn weui-btn_primary"},"返回登录")))),g.default.createElement(y.default,{show:i},g.default.createElement("div",{className:"weui-toast"},g.default.createElement("i",{className:"weui-loading weui-icon_toast"}),g.default.createElement("p",{className:"weui-toast__content"},r))))}}]),t}(g.default.Component);t.default=(0,b.connect)(function(e){return{user:e.get("user")}})(P)},233:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(10),u=l(n),c=a(14),i=l(c),r=a(15),s=l(r),d=a(16),o=l(d),f=a(17),m=l(f),h=a(18),v=l(h),p=a(0),_=l(p),w=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],function(e){return function(t){function a(e){(0,s.default)(this,a);var t=(0,m.default)(this,(a.__proto__||(0,i.default)(a)).call(this,e));return t.state={tip:null},t}return(0,v.default)(a,t),(0,o.default)(a,[{key:"shouldComponentUpdate",value:function(e,t){return e.value!=this.props.value}},{key:"render",value:function(){return _.default.createElement(e,(0,u.default)({},this.props,{tip:this.state.tip}))}}]),a}(_.default.Component)}};t.default=w},243:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(14),u=l(n),c=a(15),i=l(c),r=a(16),s=l(r),d=a(17),o=l(d),f=a(18),m=l(f),h=a(0),v=l(h),p=a(244),_=a(251),w=l(_),E=a(253),N=l(E),g=function(e){function t(e){(0,i.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.state={formdata:{username:"tianez22"}},a._onChange=a._onChange.bind(a),a}return(0,m.default)(t,e),(0,s.default)(t,[{key:"_onChange",value:function(e,t){if(this.props.onChange){var a=this.props.formdata,l=void 0===a?{}:a;l[e]=t,this.props.onChange(l)}else{var n=this.state.formdata,u=void 0===n?{}:n;u[e]=t,this.setState({formdata:u})}}},{key:"render",value:function(){var e=this.props,t=e.formlist,a=e.onChange,l=e.children,n=a?this.props:this.state,u=n.formdata,c=void 0===u?{}:u,i=this._onChange;return v.default.createElement("div",{className:w.default.form},t&&t.map(function(e,t){switch(e.onChange=i,e.value=c[e.name],e.key=t,e.type){case"text":return v.default.createElement(p.Input,e);case"time":return v.default.createElement(p.Time,e);case"textare":return v.default.createElement(p.Textare,e);case"switch":return v.default.createElement(p.Switch,e);case"radio":return e.modal?v.default.createElement(N.default,e,v.default.createElement(p.Radio,e)):v.default.createElement(p.Radio,e);case"checkbox":return e.modal?v.default.createElement(N.default,e,v.default.createElement(p.CheckBox,e)):v.default.createElement(p.CheckBox,e)}}),l)}}]),t}(v.default.Component);t.default=g},244:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}var n=a(245),u=l(n),c=a(246),i=l(c),r=a(247),s=l(r),d=a(248),o=l(d),f=a(249),m=l(f),h=a(250),v=l(h);e.exports={Radio:i.default,CheckBox:u.default,Textare:s.default,Input:o.default,Switch:m.default,Time:v.default}},245:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(14),u=l(n),c=a(15),i=l(c),r=a(16),s=l(r),d=a(17),o=l(d),f=a(18),m=l(f),h=a(0),v=a(233),p=l(v),_=function(e){function t(e){(0,i.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.state={value:a.props.value||[]},a.onChange=a.onChange.bind(a),a}return(0,m.default)(t,e),(0,s.default)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.list!=this.props.list||e.value!=this.props.value}},{key:"onChange",value:function(e){var t=this.state.value.concat(),a=e.target.value;if(e.target.checked)t.push(a);else{var l=t.indexOf(a);t.splice(l,1)}this.setState({value:t});var n=this.props,u=n.onChange,c=n.name;u&&u(c,t)}},{key:"render",value:function(){var e=this,t=this.props,a=t.list,l=t.name,n=t.title,u=t.ext,c=this.state.value;return React.createElement("div",null,n&&React.createElement("div",{className:"weui-cells__title"},n,"(多选)"),React.createElement("div",{className:u?"weui-cells weui-cells_radio":"weui-cells weui-cells_checkbox"},a.map(function(t,a){return React.createElement("label",{className:"weui-cell weui-check__label",key:a},!u&&React.createElement("div",{className:"weui-cell__hd"},React.createElement("input",{type:"checkbox",defaultValue:String(t.id),className:"weui-check",name:l,checked:-1!=c.indexOf(String(t.id)),onChange:e.onChange}),React.createElement("i",{className:"weui-icon-checked"})),React.createElement("div",{className:"weui-cell__bd"},React.createElement("p",null,t.text)),u&&React.createElement("div",{className:"weui-cell__ft"},React.createElement("input",{type:"checkbox",defaultValue:String(t.id),className:"weui-check",name:l,defaultChecked:-1!=c.indexOf(String(t.id)),onChange:e.onChange}),React.createElement("i",{className:"weui-icon-checked"})))})))}}]),t}(h.Component);t.default=(0,p.default)()(_)},246:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),u=l(n),c=a(233),i=l(c),r=function(e){var t=e.list,a=e.onChange,l=e.name,n=e.value,c=e.title,i=e.defaultValue,r=void 0===i?0:i;return u.default.createElement("div",null,c&&u.default.createElement("div",{className:"weui-cells__title"},c,"(单选)"),u.default.createElement("div",{className:"weui-cells weui-cells_checkbox",id:"form"},t.map(function(e,t){return u.default.createElement("label",{className:"weui-cell weui-check__label",key:t},u.default.createElement("div",{className:"weui-cell__hd"},u.default.createElement("input",{type:"radio",defaultValue:e.id,className:"weui-check",name:l,checked:n?e.id==n:e.id==r,onChange:function(e){a&&a(l,e.target.value)}}),u.default.createElement("i",{className:"weui-icon-checked"})),u.default.createElement("div",{className:"weui-cell__bd"},u.default.createElement("p",null,e.text)))})))};t.default=(0,i.default)()(r)},247:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),u=l(n),c=a(233),i=l(c),r=function(e){var t=e.onChange,a=e.name,l=e.value,n=e.title,c=e.placeholder;return u.default.createElement("div",null,n&&u.default.createElement("div",{className:"weui-cells__title"},n),u.default.createElement("div",{className:"weui-cells weui-cells_form"},u.default.createElement("div",{className:"weui-cell"},u.default.createElement("div",{className:"weui-cell__bd"},u.default.createElement("textarea",{className:"weui-textarea",value:l,placeholder:c,onChange:function(e){t&&t(a,e.target.value)},rows:"3"}),u.default.createElement("div",{className:"weui-textarea-counter"},u.default.createElement("span",null,l&&l.length||0))))))};t.default=(0,i.default)()(r)},248:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),u=l(n),c=a(233),i=l(c),r=function(e){var t=e.onChange,a=e.name,l=e.value,n=void 0===l?"":l,c=e.tip,i=e.title,r=e.placeholder,s=e.extype;return u.default.createElement("div",null,i&&u.default.createElement("div",{className:"weui-cells__title"},i),u.default.createElement("div",{className:"weui-cells weui-cells_form"},u.default.createElement("div",{className:"weui-cell"},u.default.createElement("div",{className:"weui-cell__bd"},u.default.createElement("input",{className:"weui-input",type:s||"text",value:n,placeholder:r,onChange:function(e){t&&t(a,e.target.value.trim())}})))),c&&u.default.createElement("div",{className:"weui-cells__tips"},c))};t.default=(0,i.default)("okkk2")(r)},249:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),u=l(n),c=a(233),i=l(c),r=function(e){var t=e.onChange,a=e.name,l=e.value,n=e.title,c=(e.placeholder,e.defaultValue),i=void 0===c?0:c;return u.default.createElement("div",null,u.default.createElement("div",{className:"weui-cells weui-cells_form"},u.default.createElement("div",{className:"weui-cell weui-cell_switch"},u.default.createElement("div",{className:"weui-cell__bd"},n),u.default.createElement("div",{className:"weui-cell__ft"},u.default.createElement("label",{className:"weui-switch-cp"},u.default.createElement("input",{className:"weui-switch-cp__input",name:a,value:"1",checked:void 0===l?i:l,type:"checkbox",onChange:function(e){t&&(void 0===l&&(l=i),l=l?0:1,t(a,l))}}),u.default.createElement("div",{className:"weui-switch-cp__box"}))))))};t.default=(0,i.default)()(r)},250:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),u=l(n),c=a(233),i=l(c),r=function(e){var t=e.onChange,a=e.name,l=e.value,n=e.title,c=e.placeholder,i=e.extype;return l=moment(l).format("YYYY-MM-DDTH:mm"),15==l.length&&(l=l.replace("T","T0")),u.default.createElement("div",null,n&&u.default.createElement("div",{className:"weui-cells__title"},n),u.default.createElement("div",{className:"weui-cells weui-cells_form"},u.default.createElement("div",{className:"weui-cell"},u.default.createElement("div",{className:"weui-cell__bd"},u.default.createElement("input",{className:"weui-input",type:i||"datetime-local",value:l,placeholder:c,onChange:function(e){t&&t(a,e.target.value)}})))))};t.default=(0,i.default)()(r)},251:function(e,t,a){var l=a(252);"string"==typeof l&&(l=[[e.i,l,""]]);var n={};n.transform=void 0,a(222)(l,n),l.locals&&(e.exports=l.locals)},252:function(e,t,a){t=e.exports=a(221)(void 0),t.push([e.i,"",""])},253:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(14),u=l(n),c=a(15),i=l(c),r=a(16),s=l(r),d=a(17),o=l(d),f=a(18),m=l(f),h=a(0),v=l(h),p=a(254),_=l(p),w=function(e){function t(e){(0,i.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.state={show:!1},a}return(0,m.default)(t,e),(0,s.default)(t,[{key:"_show",value:function(){this.setState({show:!0})}},{key:"_hide",value:function(){this.setState({show:!1})}},{key:"render",value:function(){var e=this.props,t=e.title,a=e.value,l=e.list,n=e.children,u=e.type,c="";if("checkbox"==u)c=a&&a.length>0?"已选择"+a.length+"项":"暂未选择";else if("radio"==u){var i=l.filter(function(e){return a==e.id});c=i.length>0?i[0].text:"暂未选择"}var r=this.state.show,s=r?_.default.modalcontent:_.default.modalcontenthide;return v.default.createElement("div",{className:_.default.modalbox},v.default.createElement("div",{className:_.default.modalheader},v.default.createElement("div",{className:"weui-cells weui-cells_form"},v.default.createElement("div",{className:"weui-cell weui-cell_switch",onClick:this._show.bind(this)},v.default.createElement("div",{className:"weui-cell__bd"},t),v.default.createElement("div",{className:"weui-cell__ft"},v.default.createElement("div",{className:_.default.cur},c))))),v.default.createElement("div",{className:s},v.default.createElement("div",{className:"warper"},v.default.createElement("div",{className:"header"},v.default.createElement("a",{className:"span"}),v.default.createElement("div",{className:"h1"},t),v.default.createElement("a",{className:"span icontitle",onClick:this._hide.bind(this)},"保存")),v.default.createElement("div",{className:"content"},n))))}}]),t}(v.default.Component);t.default=w},254:function(e,t,a){var l=a(255);"string"==typeof l&&(l=[[e.i,l,""]]);var n={};n.transform=void 0,a(222)(l,n),l.locals&&(e.exports=l.locals)},255:function(e,t,a){t=e.exports=a(221)(void 0),t.push([e.i,".Modalbox_modalcontent_1O84c{position:fixed;top:0;left:0;width:100%;height:100%;z-index:999999;background:#f1f1f1;display:block}.Modalbox_modalcontenthide_1AQvq{display:none}.Modalbox_cur_NmCZK{height:.64rem;line-height:.64rem;font-size:.32rem;text-align:center}",""]),t.locals={modalcontent:"Modalbox_modalcontent_1O84c",modalcontenthide:"Modalbox_modalcontenthide_1AQvq",cur:"Modalbox_cur_NmCZK"}}});
//# sourceMappingURL=1.map