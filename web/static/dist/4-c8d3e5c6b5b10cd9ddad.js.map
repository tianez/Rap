{"version":3,"sources":["webpack:///./src/pages/Login/login.scss?ab2e","webpack:///./src/pages/Login/login.scss","webpack:///./src/pages/Login/Login.jsx"],"names":["content","__webpack_require__","module","i","hmr","transform","insertInto","locals","exports","push","version","sources","names","mappings","file","sourcesContent","sourceRoot","link","O3NY","e","t","n","Object","defineProperty","value","default","a","r","b","o","l","d","s","u","c","f","A","p","B","g","h","_reactRouterDom","E","k","w","v","__esModule","TipsText","title","btnTitle","registerTitle","Login","contextConsumers","state","token","props","_this2","this","_classCallCheck3","_this","_possibleConstructorReturn3","__proto__","_getPrototypeOf2","call","handleSubmit","_asyncToGenerator3","_regenerator2","mark","_callee","data","postdata","res","wrap","_context","prev","next","setState","loading","phone","password","_md2","toString","toUpperCase","Request","post","sent","console","log","success","localStorage","userId","user","id","dispatch","set","_toast2","info","removeItem","stop","name","_this3","_props","location","_react2","createElement","Redirect","to","_state","tips","isweixin","_BaseLayout2","_ContentView2","_list2","renderHeader","_inputItem2","placeholder","onChange","handleChange","type","_whiteSpace2","_wingBlank2","_button2","onClick","disabled","Link","AppConfig","baseRouterUrl","className","styles","React","Component"],"mappings":"gFACA,IAAAA,EAAAC,EAAA,QAEA,iBAAAD,QAAAE,EAAAC,EAAAH,EAAA,MAYAC,EAAA,OAAAA,CAAAD,GALeI,OAEfC,iBACAC,oBAIAN,EAAAO,SAAAL,EAAAM,QAAAR,EAAAO,+BCjBAC,EAAAN,EAAAM,QAAAP,EAAA,OAAAA,MAKAQ,MAAAP,EAAAC,EAAA,2gBAAgiB,IAAUO,QAAA,EAAAC,SAAA,4CAAAC,SAAAC,SAAA,gRAAuVC,KAAA,aAAAC,gBAAA,ofAAuiBC,WAAA,MAGx6CR,EAAAD,QACAU,KAAA,qBAAAC,KAAA,SAAAC,EAAAC,EAAAC,GAAA,aAAAC,OAAAC,eAAAH,EAAA,cAAAI,OAAA,IAAAJ,EAAAK,aAAA,MAAAC,EAAAC,EAAAC,EAAAP,EAAA,SAAAQ,EAAAD,EAAAP,EAAA,SAAAS,EAAAF,EAAAP,EAAA,SAAAlB,EAAAyB,EAAAP,EAAA,SAAAU,EAAAH,EAAAP,EAAA,SAAAW,EAAAJ,EAAAP,EAAA,SAAAY,EAAAL,EAAAP,EAAA,SAAAa,EAAAN,EAAAP,EAAA,SAAAc,EAAAP,EAAAP,EAAA,SAAAe,EAAAR,EAAAP,EAAA,SAAAgB,EAAAT,EAAAP,EAAA,SAAAiB,EAAAV,EAAAP,EAAA,SAAAkB,EAAAX,EAAAP,EAAA,SAAAA,EAAA,QAAAA,EAAA,QAAAA,EAAA,QAAAA,EAAA,QAAAA,EAAA,QAAAA,EAAA,QCTA,IAAAmB,EAAAZ,EAAA3B,EAAA,SAEAwC,EAAAxC,EAAA,QAAAyC,EAAAd,EACA3B,EAAA,SAAA0C,EAAAf,EAEA3B,EAAA,SAAA2C,EAAAhB,EACA3B,EAAA,SAAA4C,GAAAjB,EACA3B,EAAA,SAAA2B,EACA3B,EAAA,mBAAA2B,EAAAT,GAAA,OAAAA,KAAA2B,WAAA3B,GAAAM,QAAAN,GAEA,IAAM4B,GAEEC,MAAO,QACPC,SAAU,QACVC,cAAe,gBAJjBH,GAOEC,MAAO,KACPC,SAAU,KACVC,cAAe,aAWFC,KAJrBlD,EAAA,QACCmD,kBAAiB,SAAAC,GAAA,OACdC,MAAOD,EAAMC,QAEIH,CAFJG,cAGb,SAAAH,EAAYI,GAAO,IAAAC,EAAAC,QAAAC,EAAAjC,SAAAgC,KAAAN,GAAA,IAAAQ,KAAAC,EAAAnC,SAAAgC,MAAAN,EAAAU,cAAAC,EAAArC,SAAA0B,IAAAY,KAAAN,KACTF,IADS,OAAAI,EAiBnBK,gBAjBmBC,EAAAxC,SAAAyC,EAAAzC,QAAA0C,KAiBJ,SAAAC,IAAA,IAAAC,EAAAC,EAAAC,EAAA,OAAAL,EAAAzC,QAAA+C,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACLN,EAASV,EAAKN,MAAdgB,KACNV,EAAKiB,UAAWC,aACZP,GACAQ,MAAOT,EAAKS,MACZC,YAAUC,EAAAvD,SAAI4C,EAAKU,UACdE,WACAC,eAPET,EAAAE,KAAA,EASKQ,QAAQC,KAAK,aAAcd,GAThC,OASPC,EATOE,EAAAY,KAUXC,QAAQC,IAAIhB,GAERA,EAAIiB,SACJC,aAAanC,MAAQiB,EAAIF,KAAKf,MAC9BmC,aAAaC,OAASnB,EAAIF,KAAKsB,KAAKC,GACpCjC,EAAKiB,UAAWC,aAChBlB,EAAKJ,MAAMsC,SAASC,KAChBxC,MAAOiB,EAAIF,KAAKf,MAChBqC,KAAMpB,EAAIF,KAAKsB,SAGnBhC,EAAKiB,UAAWC,aAChBkB,EAAAtE,QAAMuE,KAAK,QACXP,aAAaQ,WAAW,SACxBR,aAAaQ,WAAW,WAxBjB,wBAAAxB,EAAAyB,SAAA9B,EAAAZ,MAfXG,EAAKN,OACDgB,MACIS,MAAO,cACPC,SAAU,UAEdF,YAPWlB,+EAUNwC,EAAM3E,GAAO,IAChB6C,EAASZ,KAAKJ,MAAdgB,KACNA,EAAK8B,GAAQ3E,EACbiC,KAAKmB,UACDP,0CA8BC,IAAA+B,EAAA3C,KAAA4C,EACqB5C,KAAKF,MAAzBD,EADD+C,EACC/C,MAAOgD,EADRD,EACQC,SACb,GAAIhD,EACA,OAAOiD,EAAA9E,QAAA+E,cAAC/D,EAAAgE,UAASC,GAAIJ,EAASjD,OAAS,MAHtC,IAAAsD,EAKmBlD,KAAKJ,MAAvBgB,EALDsC,EAKCtC,KAAMQ,EALP8B,EAKO9B,QACR+B,EAAO7D,EAIX,OAHI8D,WACAD,EAAO7D,GAGPwD,EAAA9E,QAAA+E,cAACM,EAAArF,SAAWuB,MAAO4D,EAAK5D,OACpBuD,EAAA9E,QAAA+E,cAACO,EAAAtF,QAAD,KACI8E,EAAA9E,QAAA+E,cAAAQ,EAAAvF,SAAMwF,aAAc,iBAAM,SACtBV,EAAA9E,QAAA+E,cAAAU,EAAAzF,SACI0F,YAAY,SACZ3F,MAAO6C,EAAKS,MACZsC,SAAU,SAAA5F,GAAA,OAAS4E,EAAKiB,aAAa,QAAS7F,MAElD+E,EAAA9E,QAAA+E,cAAAU,EAAAzF,SACI6F,KAAK,WACLH,YAAY,QACZ3F,MAAO6C,EAAKU,SACZqC,SAAU,SAAA5F,GAAA,OAAS4E,EAAKiB,aAAa,WAAY7F,OAGzD+E,EAAA9E,QAAA+E,cAAAe,EAAA9F,QAAA,MACA8E,EAAA9E,QAAA+E,cAAAe,EAAA9F,QAAA,MACA8E,EAAA9E,QAAA+E,cAAAgB,EAAA/F,QAAA,KACI8E,EAAA9E,QAAA+E,cAAAiB,EAAAhG,SAAQ6F,KAAK,UAAUI,QAASjE,KAAKO,aAAca,QAASA,EAAS8C,SAAU9C,GAC1E+B,EAAK3D,UAEVsD,EAAA9E,QAAA+E,cAAC/D,EAAAmF,MAAKlB,GAAImB,UAAUC,cAAgB,WAAYC,UAAWC,UAAO/G,MAC7D2F,EAAK1D,wBAhFjBI,CAEkB2E,UAAMC,yBAApB/E","file":"4-c8d3e5c6b5b10cd9ddad.js","sourcesContent":["\nvar content = require(\"!!../../../node_modules/.0.28.11@css-loader/index.js??ref--5-1!../../../node_modules/.2.1.5@postcss-loader/lib/index.js!../../../node_modules/.6.0.7@sass-loader/lib/loader.js!./login.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/.0.20.3@style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/.0.28.11@css-loader/index.js??ref--5-1!../../../node_modules/.2.1.5@postcss-loader/lib/index.js!../../../node_modules/.6.0.7@sass-loader/lib/loader.js!./login.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/.0.28.11@css-loader/index.js??ref--5-1!../../../node_modules/.2.1.5@postcss-loader/lib/index.js!../../../node_modules/.6.0.7@sass-loader/lib/loader.js!./login.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/.0.28.11@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".login_link_16Xq_ {\\n  text-align: center;\\n  display: block;\\n  margin: 0.2rem 0;\\n  outline: 0 none;\\n  -webkit-appearance: none;\\n  box-sizing: border-box;\\n  padding: 0;\\n  text-align: center;\\n  font-size: 0.18rem;\\n  height: 0.47rem;\\n  line-height: 0.47rem;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  word-break: break-word;\\n  white-space: nowrap;\\n  color: #000;\\n  background-color: #fff;\\n  border: 1px solid #ddd;\\n  border-radius: 0.05rem; }\\n  .login_link_16Xq_:active {\\n    background: #ddd; }\\n\", \"\", {\"version\":3,\"sources\":[\"E:/www/51智慧医疗/src/pages/Login/login.scss\"],\"names\":[],\"mappings\":\"AAAA;EACE,mBAAmB;EACnB,eAAe;EACf,iBAAiB;EACjB,gBAAgB;EAChB,yBAAyB;EACzB,uBAAuB;EACvB,WAAW;EACX,mBAAmB;EACnB,mBAAmB;EACnB,gBAAgB;EAChB,qBAAqB;EACrB,iBAAiB;EACjB,wBAAwB;EACxB,uBAAuB;EACvB,oBAAoB;EACpB,YAAY;EACZ,uBAAuB;EACvB,uBAAuB;EACvB,uBAAuB,EAAE;EACzB;IACE,iBAAiB,EAAE\",\"file\":\"login.scss\",\"sourcesContent\":[\".link {\\n  text-align: center;\\n  display: block;\\n  margin: 0.2rem 0;\\n  outline: 0 none;\\n  -webkit-appearance: none;\\n  box-sizing: border-box;\\n  padding: 0;\\n  text-align: center;\\n  font-size: 0.18rem;\\n  height: 0.47rem;\\n  line-height: 0.47rem;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  word-break: break-word;\\n  white-space: nowrap;\\n  color: #000;\\n  background-color: #fff;\\n  border: 1px solid #ddd;\\n  border-radius: 0.05rem; }\\n  .link:active {\\n    background: #ddd; }\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"link\": \"login_link_16Xq_\"\n};","import React, { Component } from \"react\";\r\nimport { List, InputItem, WhiteSpace, Button, WingBlank, Toast } from \"antd-mobile\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport MD5 from \"crypto-js/md5\";\r\n\r\nimport ContentView from \"Views/Layout/ContentView\";\r\nimport BaseLayout from \"../Layout/BaseLayout\";\r\nimport signature from \"Utils/signature\";\r\nimport styles from \"./login.scss\";\r\n\r\nconst TipsText = {\r\n    weixin: {\r\n        title: \"登录并绑定\",\r\n        btnTitle: \"登录并绑定\",\r\n        registerTitle: \"没有账号？前往注册并绑定\"\r\n    },\r\n    app: {\r\n        title: \"登录\",\r\n        btnTitle: \"登录\",\r\n        registerTitle: \"没有账号？前往注册\"\r\n    }\r\n};\r\n\r\n/**\r\n * 系统登录模块\r\n */\r\nimport { contextConsumers } from \"Libs/ContextRudex\";\r\n@contextConsumers(state => ({\r\n    token: state.token\r\n}))\r\nexport default class Login extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            data: {\r\n                phone: \"18672035432\",\r\n                password: \"123456\"\r\n            },\r\n            loading: false\r\n        };\r\n    }\r\n    handleChange(name, value) {\r\n        let { data } = this.state;\r\n        data[name] = value;\r\n        this.setState({\r\n            data\r\n        });\r\n    }\r\n    handleSubmit = async () => {\r\n        let { data } = this.state;\r\n        this.setState({ loading: true });\r\n        let postdata = {\r\n            phone: data.phone,\r\n            password: MD5(data.password)\r\n                .toString()\r\n                .toUpperCase()\r\n        };\r\n        let res = await Request.post(\"user/login\", postdata);\r\n        console.log(res);\r\n\r\n        if (res.success) {\r\n            localStorage.token = res.data.token;\r\n            localStorage.userId = res.data.user.id;\r\n            this.setState({ loading: false });\r\n            this.props.dispatch.set({\r\n                token: res.data.token,\r\n                user: res.data.user\r\n            });\r\n        } else {\r\n            this.setState({ loading: false });\r\n            Toast.info(\"登录失败\");\r\n            localStorage.removeItem(\"token\");\r\n            localStorage.removeItem(\"userId\");\r\n        }\r\n    };\r\n    render() {\r\n        let { token, location } = this.props;\r\n        if (token) {\r\n            return <Redirect to={location.state || \"/\"} />;\r\n        }\r\n        let { data, loading } = this.state;\r\n        let tips = TipsText.app;\r\n        if (isweixin) {\r\n            tips = TipsText.weixin;\r\n        }\r\n        return (\r\n            <BaseLayout title={tips.title}>\r\n                <ContentView>\r\n                    <List renderHeader={() => \"用户登录\"}>\r\n                        <InputItem\r\n                            placeholder=\"请输入用户名\"\r\n                            value={data.phone}\r\n                            onChange={value => this.handleChange(\"phone\", value)}\r\n                        />\r\n                        <InputItem\r\n                            type=\"password\"\r\n                            placeholder=\"请输入密码\"\r\n                            value={data.password}\r\n                            onChange={value => this.handleChange(\"password\", value)}\r\n                        />\r\n                    </List>\r\n                    <WhiteSpace />\r\n                    <WhiteSpace />\r\n                    <WingBlank>\r\n                        <Button type=\"primary\" onClick={this.handleSubmit} loading={loading} disabled={loading}>\r\n                            {tips.btnTitle}\r\n                        </Button>\r\n                        <Link to={AppConfig.baseRouterUrl + \"register\"} className={styles.link}>\r\n                            {tips.registerTitle}\r\n                        </Link>\r\n                    </WingBlank>\r\n                </ContentView>\r\n            </BaseLayout>\r\n        );\r\n    }\r\n}\r\n"],"sourceRoot":""}