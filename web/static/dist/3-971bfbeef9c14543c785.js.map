{"version":3,"sources":["webpack:///./src/pages/Register/Register.jsx","webpack:///./src/pages/Register/Register.scss?3af1","webpack:///./src/pages/Register/Register.scss"],"names":["m","k","__webpack_require__","_reactRouterDom","E","v","w","e","__esModule","default","TipsText","title","btnTitle","registerTitle","Register","contextConsumers","state","token","props","_this2","this","_classCallCheck3","_this","_possibleConstructorReturn3","__proto__","_getPrototypeOf2","call","handleSubmit","_asyncToGenerator3","_regenerator2","mark","_callee","data","res","wrap","_context","prev","next","setState","loading","Apicloud","post","sent","success","localStorage","id","userId","getUserInfo","_toast2","info","removeItem","stop","username","password","name","value","_this3","_props","location","_react2","createElement","Redirect","to","_state","tips","isweixin","_BaseLayout2","_ContentView2","_list2","renderHeader","_inputItem2","placeholder","onChange","handleChange","type","_whiteSpace2","_wingBlank2","_button2","onClick","Link","AppConfig","baseRouterUrl","className","styles","link","React","Component","content","module","i","hmr","transform","insertInto","locals","exports","push","version","sources","names","mappings","file","sourcesContent","sourceRoot"],"mappings":"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","file":"3-971bfbeef9c14543c785.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { List, InputItem, WhiteSpace, Button, WingBlank, Toast } from \"antd-mobile\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\n\r\nimport ContentView from \"Views/Layout/ContentView\";\r\nimport BaseLayout from \"../Layout/BaseLayout\";\r\n\r\nimport styles from \"./Register.scss\";\r\n\r\nconst TipsText = {\r\n    weixin: {\r\n        title: \"注册并绑定\",\r\n        btnTitle: \"注册并绑定\",\r\n        registerTitle: \"已有账号？前往直接绑定\"\r\n    },\r\n    app: {\r\n        title: \"注册\",\r\n        btnTitle: \"注册\",\r\n        registerTitle: \"已有账号？直接登录\"\r\n    }\r\n};\r\n/**\r\n * 系统登录模块\r\n */\r\nimport { contextConsumers } from \"Libs/ContextRudex\";\r\n@contextConsumers(state => ({\r\n    token: state.token\r\n}))\r\nexport default class Register extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            data: {\r\n                username: \"\",\r\n                password: \"\"\r\n            },\r\n            loading: false\r\n        };\r\n    }\r\n    handleChange(name, value) {\r\n        let { data } = this.state;\r\n        data[name] = value;\r\n        this.setState({\r\n            data\r\n        });\r\n    }\r\n    handleSubmit = async () => {\r\n        let { data } = this.state;\r\n        this.setState({ loading: true });\r\n        let res = await Apicloud.post(\"user/login\", data);\r\n        if (res.success) {\r\n            localStorage.token = res.data.id;\r\n            localStorage.userId = res.data.userId;\r\n            this.getUserInfo();\r\n        } else {\r\n            this.setState({ loading: false });\r\n            Toast.info(\"登录失败\");\r\n            localStorage.removeItem(\"token\");\r\n            localStorage.removeItem(\"userId\");\r\n        }\r\n    };\r\n    render() {\r\n        let { token, location } = this.props;\r\n        if (token) {\r\n            return <Redirect to={location.state || \"/\"} />;\r\n        }\r\n        let { data, loading } = this.state;\r\n        let tips = TipsText.app;\r\n        if (isweixin) {\r\n            tips = TipsText.weixin;\r\n        }\r\n        return (\r\n            <BaseLayout title={tips.title}>\r\n                <ContentView>\r\n                    <List renderHeader={() => \"用户注册\"}>\r\n                        <InputItem\r\n                            placeholder=\"请输入用户名\"\r\n                            value={data.username}\r\n                            onChange={value => this.handleChange(\"username\", value)}\r\n                        />\r\n                        <InputItem\r\n                            type=\"password\"\r\n                            placeholder=\"请输入密码\"\r\n                            value={data.password}\r\n                            onChange={value => this.handleChange(\"password\", value)}\r\n                        />\r\n                    </List>\r\n                    <WhiteSpace />\r\n                    <WhiteSpace />\r\n                    <WingBlank>\r\n                        <Button type=\"primary\" onClick={this.handleSubmit} loading={loading}>\r\n                            {tips.btnTitle}\r\n                        </Button>\r\n                        <Link to={AppConfig.baseRouterUrl + \"login\"} className={styles.link}>\r\n                            {tips.registerTitle}\r\n                        </Link>\r\n                    </WingBlank>\r\n                </ContentView>\r\n            </BaseLayout>\r\n        );\r\n    }\r\n}\r\n","\nvar content = require(\"!!../../../node_modules/.0.28.11@css-loader/index.js??ref--5-1!../../../node_modules/.2.1.5@postcss-loader/lib/index.js!../../../node_modules/.6.0.7@sass-loader/lib/loader.js!./Register.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/.0.20.3@style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/.0.28.11@css-loader/index.js??ref--5-1!../../../node_modules/.2.1.5@postcss-loader/lib/index.js!../../../node_modules/.6.0.7@sass-loader/lib/loader.js!./Register.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/.0.28.11@css-loader/index.js??ref--5-1!../../../node_modules/.2.1.5@postcss-loader/lib/index.js!../../../node_modules/.6.0.7@sass-loader/lib/loader.js!./Register.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/.0.28.11@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".Register_link_2UhI_ {\\n  text-align: center;\\n  display: block;\\n  margin: 0.2rem 0;\\n  outline: 0 none;\\n  -webkit-appearance: none;\\n  box-sizing: border-box;\\n  padding: 0;\\n  text-align: center;\\n  font-size: 0.18rem;\\n  height: 0.47rem;\\n  line-height: 0.47rem;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  word-break: break-word;\\n  white-space: nowrap;\\n  color: #000;\\n  background-color: #fff;\\n  border: 1px solid #ddd;\\n  border-radius: 0.05rem; }\\n  .Register_link_2UhI_:active {\\n    background: #ddd; }\\n\", \"\", {\"version\":3,\"sources\":[\"E:/www/51智慧医疗/src/pages/Register/Register.scss\"],\"names\":[],\"mappings\":\"AAAA;EACE,mBAAmB;EACnB,eAAe;EACf,iBAAiB;EACjB,gBAAgB;EAChB,yBAAyB;EACzB,uBAAuB;EACvB,WAAW;EACX,mBAAmB;EACnB,mBAAmB;EACnB,gBAAgB;EAChB,qBAAqB;EACrB,iBAAiB;EACjB,wBAAwB;EACxB,uBAAuB;EACvB,oBAAoB;EACpB,YAAY;EACZ,uBAAuB;EACvB,uBAAuB;EACvB,uBAAuB,EAAE;EACzB;IACE,iBAAiB,EAAE\",\"file\":\"Register.scss\",\"sourcesContent\":[\".link {\\n  text-align: center;\\n  display: block;\\n  margin: 0.2rem 0;\\n  outline: 0 none;\\n  -webkit-appearance: none;\\n  box-sizing: border-box;\\n  padding: 0;\\n  text-align: center;\\n  font-size: 0.18rem;\\n  height: 0.47rem;\\n  line-height: 0.47rem;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  word-break: break-word;\\n  white-space: nowrap;\\n  color: #000;\\n  background-color: #fff;\\n  border: 1px solid #ddd;\\n  border-radius: 0.05rem; }\\n  .link:active {\\n    background: #ddd; }\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"link\": \"Register_link_2UhI_\"\n};"],"sourceRoot":""}